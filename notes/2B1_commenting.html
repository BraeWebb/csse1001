<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Programming Style</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" href="/style/main.css">
</head>

<body>
    <div class="container">
        <p class="link-bar">
            <a href="/notes/2B1_commenting.pdf" data-toggle="tooltip" title="View as PDF"><i class="fa fa-file-pdf"></i></a>
            <a href="https://github.com/BraeWebb/csse1001" data-toggle="tooltip" title="Contribute Fixes"><i class="fab fa-github"></i></a>
        </p>
        <blockquote class="blockquote">
  <p> King Arthur:  ‘What does it say?’</p>
  <p> Maynard:  ‘It reads, ‘Here may be found the last words of Joseph of </p>
  <p> Arimathea. He who is valiant and pure of spirit may find the Holy Grail </p>
  <p> in the Castle of aaarrrrggh’.’</p>
  <p> King Arthur:  ‘What?’</p>
  <p> Maynard:  ‘…The Castle of aaarrrrggh.’</p>
  <p> Bedevere: ‘What is that?’</p>
  <p> Maynard:  ‘He must have died while carving it.’</p>
</blockquote>

<h1 id="programming-style">Programming Style</h1>
<p>Code should be written in a style that makes it easier to comprehend. How you structure and layout your code is called programming style and it is a seemingly trivial but important part of ensuring your code is easy to read. (This is called making the code ‘readable’.) In this course we will following the <a href="https://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a> when writing code. Please ensure that you read and follow these rules. In the style guide the first section, Python Language Rules, relates to how to use particular language features. The second section, Python Style Rules, relates to how to structure your code. The style rules are most immediately applicable to the code you write in the early stages of this course. Some of the language rules will become more applicable later in the course.</p>

<h2 id="commenting">Commenting</h2>

<h3 id="writing-comments">Writing Comments</h3>
<p>Documentation is a software engineering concept that provides the “explanation” of the code. Comments should describe what the code is supposed to do, how to use it properly, and anything else that would be useful to know. A comment is a piece of syntax in a programming language which lets us describe the program code. We can add comments without affecting what our code actually does. Programming languages do this to give us a way of easily documenting our code.</p>

<p>Documenting code is very important — it aids communication between developers and is a great help when it comes to maintenance! Just as an agreed upon layout style is critical, the same holds for commenting style. In Python there are two types of comments, each serving a different purpose.</p>

<p>The first style of comment uses the <code class="highlighter-rouge">#</code> character followed by the comment until the end of the line. These comments are useful for describing complicated lines of code, or as a reminder for what a particular line of code is used for. These lines are ignored by the Python interpreter and are mainly notes to the writer of the code.</p>

<p>The second, more important style of comments, are called triple-quote comments or <em>docstrings</em>. These are written using triple quotes (three quote marks: <code class="highlighter-rouge">"""</code>). Docstrings are meant to explain what use a function serves, without going into the details of “how it does what it does”. In Python, docstrings, are composed of two important parts. The first is a brief explanation of what the function does. This is followed by a detailed explanation of how to use the function. This detailed explanation should include a description of the parameters; any preconditions, which are any requirements that need to be met before the function is called in order for the function to perform correctly; a description of what the function returns; and possibly some examples of usage.
We can think of these comments as a kind of contract between the writer and user of the function. The writer is promising that, if the user calls the function with arguments of the correct type that satisfy the precondition (if there is one), the function will behave as described in the comment. If the user calls the function with arguments of the wrong type, or that do not satisfy the precondition, the writer is not responsible for the function’s behaviour.</p>

<h2 id="function-docstrings">Function Docstrings</h2>
<p>Below is our <code class="highlighter-rouge">discuss</code> function updated with some helpful comments, which is in the <code class="highlighter-rouge">interaction.py</code> file.</p>
<div class="viz">

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">discuss</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Discuss a topic with the user and return their response.

    Ask if the user likes the topic and why.

    Parameters:
        topic (str): The topic under discussion.

    Return:
        str: Response to the question of why they like the topic.
    """</span>
    <span class="n">like</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Do you like "</span> <span class="o">+</span> <span class="n">topic</span> <span class="o">+</span> <span class="s">"? "</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Why do you think that? "</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</code></pre></div>  </div>
</div>

<p>In this course, we will use the following triple quote commenting style.</p>

<p>The opening triple quote should be the first line of the body, indented as part of the body. The first line should give a short summary of the function’s behaviour. If necessary, this line is followed by a blank line, and then by a more detailed explanation of the function’s behaviour. This is followed by a blank line followed by a description of each parameter. The parameter description should indicate the type the function expects for that parameter, the type is in parenthesis after the function name, and then should provide a description of what the function expects to be passed to that parameter. If the function does not have any parameters this section is omitted. Following the parameter description is another blank line and then a description of what the function returns. The return description should indicate the type of value being returned and then describe what is being returned. In this case, the <code class="highlighter-rouge">discuss</code> function has one parameter <code class="highlighter-rouge">topic</code> of type <code class="highlighter-rouge">str</code> (short for “string”) that is the topic used for the discussion in the function’s body. The function returns a <code class="highlighter-rouge">str</code> that is the response to the question of why the user likes the topic or not. We can also add a precondition to the comments. Preconditions state what must be done (be logically true) before the function is called. Often this is a constraint on the values of some parameters, over and above the type constraint. (i.e. The code calling the function must ensure that the value of the parameters meets the precondition constraints.) The precondition may also be something that needs to be done before the function is called (e.g. some other function must be called before this function is called). The prime numbers example below shows a function with preconditions. Examples of usage demonstrate what the caller can expect when the use the function. These examples serve two purposes. Firstly, they demonstrate what result will be returned with particular parameters. This is useful for functions with complex logic. Secondly, the example of usage provides test cases, as the function can be executed and the results checked against the results indicated in the example of usage. The examples of usage should be formatted to look like an interactive Python session in the interpreter. This allows the Python <a href="https://docs.python.org/3.6/library/doctest.html">doctest tool</a> to automatically test the function to ensure it produces the expected results. (<strong>Note</strong>: Initially do not worry about understanding how to use doctest or getting the examples of usage perfectly formatted. It is more important to get the idea of writing comments that help other programmers, than it is to worry about understanding automatic testing. Automated testing concepts will be explored in detail in later courses.) At the end is a line containing the terminating triple quotes.</p>
<div class="viz">

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns True iff 'num' is prime.

    Parameters:
        num (int): Integer value to be tested to see if it is prime.

    Return:
        bool: True if 'num' is prime. False otherwise.

    Preconditions:
        num &gt; 1

    Examples:
        &gt;&gt;&gt; is_prime(2)
        True
        &gt;&gt;&gt; is_prime(3)
        True
        &gt;&gt;&gt; is_prime(4)
        False
        &gt;&gt;&gt; is_prime(5)
        True
        &gt;&gt;&gt; is_prime(9)
        False
    """</span>
</code></pre></div>  </div>
</div>

<p>The <code class="highlighter-rouge">#</code> style comments are completely ignored by the interpreter. On the other hand the triple quotes comments become part of the function. If you load <code class="highlighter-rouge">interaction.py</code> into the interpreter and then start typing a function call, you will see that the first line of the comment appears in the little pop-up window, as shown below.</p>

<p><img src="2B1_Commenting_1.png" alt="" /></p>

<p>Further, some python tools, like <code class="highlighter-rouge">pydoc</code>, extract this documentation to, for example, generate documentation. Also, below is an example using the <code class="highlighter-rouge">help</code> function which displays the docstring comments of the function.</p>
<div class="viz">

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="n">discuss</span><span class="p">)</span>
<span class="n">Help</span> <span class="n">on</span> <span class="n">function</span> <span class="n">discuss</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">__main__</span><span class="p">:</span>

<span class="n">discuss</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>
    <span class="n">Discuss</span> <span class="n">a</span> <span class="n">topic</span> <span class="k">with</span> <span class="n">the</span> <span class="n">user</span> <span class="ow">and</span> <span class="k">return</span> <span class="n">their</span> <span class="n">response</span><span class="o">.</span>
    
    <span class="n">Ask</span> <span class="k">if</span> <span class="n">the</span> <span class="n">user</span> <span class="n">likes</span> <span class="n">the</span> <span class="n">topic</span> <span class="ow">and</span> <span class="n">why</span><span class="o">.</span>
    
    <span class="n">Parameters</span><span class="p">:</span>
        <span class="n">topic</span> <span class="p">(</span><span class="nb">str</span><span class="p">):</span> <span class="n">The</span> <span class="n">topic</span> <span class="n">under</span> <span class="n">discussion</span><span class="o">.</span>

    <span class="n">Return</span><span class="p">:</span>
        <span class="nb">str</span><span class="p">:</span> <span class="n">Response</span> <span class="n">to</span> <span class="n">the</span> <span class="n">question</span> <span class="n">of</span> <span class="n">why</span> <span class="n">they</span> <span class="n">like</span> <span class="n">the</span> <span class="n">topic</span><span class="o">.</span>

<span class="o">&gt;&gt;&gt;</span> 
</code></pre></div>  </div>
</div>

<h2 id="classes-and-methods-docstrings">Classes and Methods Docstrings</h2>
<p>Commenting classes and their methods is slightly different to commenting functions. The class itself requires a comment describing what the class does. Again not explaining how it does it. The methods are commented similarly to functions but with a slight difference to the type declaration. The other difference is that the <code class="highlighter-rouge">__init__</code> method of the class has a <strong>Constructor</strong> in place of the type declaration. 
Below is the Point class from the Class Design notes.</p>

<div class="viz">

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A 2D point ADT using Cartesian coordinates."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Construct a point object based on (x, y) coordinates.
        
        Parameters:
            x (float): x coordinate in a 2D cartesian grid.
            y (float): y coordinate in a 2D cartesian grid.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the x coordinate of the point."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>

    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the y coordinate of the point."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Move the point by (dx, dy).

        Parameters:
            dx (float): Amount to move in the x direction.
            dy (float): Amount to move in the y direction.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">+=</span> <span class="n">dy</span>
</code></pre></div>  </div>
</div>

<p>Note that the comment for the <code class="highlighter-rouge">__init__</code> method does not have a Return: comment. This is due to a class constructor not returning a value, it creates an object of the class type instead of returning a value.</p>

<p>Also notice that the <code class="highlighter-rouge">self</code> parameter is never described in the Parameters: comment. Every method that operates on an object must have a <code class="highlighter-rouge">self</code> parameter, and it refers to the object on which the method operates. Consequently its type and value are always known. When calling a method on an object you do not pass the object as a parameter, it is implicitly passed as part of the method call. The <code class="highlighter-rouge">move</code> method of <code class="highlighter-rouge">Point</code>, would be called like: <code class="highlighter-rouge">point_object.move(1.0, 2.5)</code>. In this case the <code class="highlighter-rouge">self</code> parameter refers to the <code class="highlighter-rouge">point_object</code>.</p>

    </div>
</body>

</html>