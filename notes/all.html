<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>CSSE1001/7030 Notes</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" href="/style/main.css">
</head>

<body>
    <div class="container">
        <p class="link-bar">
            <a href="/notes/all.pdf" data-toggle="tooltip" title="View as PDF"><i class="fa fa-file-pdf"></i></a>
            <a href="https://github.com/BraeWebb/csse1001" data-toggle="tooltip" title="Contribute Fixes"><i class="fab fa-github"></i></a>
        </p>
        <h1 id="csse10017030-notes">CSSE1001/7030 Notes</h1>

<blockquote class="blockquote">
  <p>What’s all this then, Amen!</p>
  <p class="indent">– Monty Python</p>
</blockquote>

<h2 id="introduction-to-software-engineering-and-programming">Introduction to Software Engineering and Programming</h2>

<h3 id="what-is-software-engineering">What is Software Engineering?</h3>

<p><strong>Software Engineering</strong> is the application of a systematic, disciplined, quantifiable approach to the development, operation, and maintenance of software (<cite>IEEE std 610.12-1990</cite>). A software engineer must have a good understanding of tools and techniques for requirements gathering, specification, design, implementation, testing and maintenance.</p>

<p>These days, software systems are often very large and many contain key safety or mission-critical components. The complexity of modern software systems require the application of good software engineering principles. Indeed, many agencies mandate the use of particular tools and techniques to achieve very high quality and reliable software.</p>

<p>This course introduces some of the key principles of software engineering and gives you the chance to put them into practice by using the programming language Python. While you’ll learn lots of Python in this course, it is equally important that you learn some common programming principles and techniques so that learning the next language is not as daunting.</p>

<h4 id="what-is-python">What is Python?</h4>

<p>Python is a powerful, yet simple to use high-level programming language. Python was designed and written by Guido van Rossum and named in honour of Monty Python’s Flying Circus. The idea being that programming in Python should be fun! The quotes in these notes all come from Monty Python and it has become somewhat of a tradition to reference Monty Python when writing Python tutorials.</p>

<h4 id="what-is-software">What is Software?</h4>

<p>Software (a computer program) is a set of instructions that tell the computer (hardware) what to do. All computer programs are written in some kind of <strong>programming language</strong>, which allows us to precisely tell the computer what we want to do with it.</p>

<h3 id="features-of-a-programming-language">Features of a Programming Language</h3>

<p>There are many programming languages but they all have some things in common.</p>

<h4 id="syntax-and-semantics">Syntax and Semantics</h4>

<p>Firstly, each program language has a well defined <strong>syntax</strong>. The syntax of a language describes the well-formed ‘sentences’ of the language. Syntax tells us how to write the instructions: what is the order of the words, how our program must be structured, etc. It’s a bit like grammar and sentence rules when we write in English.</p>

<p>When we write a sentence in English, we may mess up the grammar and still be understood by the reader (or, the reader may ask us what we mean). On the other hand, if we mess up the syntax when we write a computer program, the computer is not as forgiving - it will usually respond by throwing up an error message and exit. So it is fundamentally important that we understand the syntax of a programming language.</p>

<p>Secondly, each self-contained piece of valid syntax has well defined <strong>semantics</strong> (meaning). For programming languages, it is vitally important that there are no ambiguities - i.e. a valid piece of syntax has only one meaning.</p>

<h4 id="high--and-low--level-languages">High- and Low- Level Languages</h4>

<p>Programming languages are typically divided into <strong>high-level</strong> and <strong>low-level</strong> languages.</p>

<p>Low-level languages (like assembler) are ‘close’ to the hardware in the sense that little translation is required to execute programs on the hardware. Programs written in such languages are very verbose; making it difficult for humans to write and equally importantly, difficult to read and understand!</p>

<p>On the other hand, high-level languages are much more human-friendly. The code is more compact and easier to understand. The downside is that more translation is required in order to execute the program.</p>

<h4 id="compiled-and-interpreted-languages">Compiled and Interpreted Languages</h4>

<p>Before we can run our program, we need to type out the list of instructions (called our <strong>source code</strong> or just <strong>code</strong>) that outlines what our program does when we want to run it later. So how does our source code then turn into a running program? This depends on whether the programming language we have written the source code in is either a <strong>Compiled</strong> or <strong>Interpreted</strong> language.</p>

<p>Compiled languages come with a special program called a <strong>compiler</strong> which takes source code written by a user and translates it into <strong>object code</strong>. Object code is a sequence of very low-level instructions that are executed when the program runs. Once a user’s program has been compiled, it can be run repeatedly, simply by executing the object code. Examples of compiled languages include Java, Visual Basic and C.</p>

<p>Interpreted languages come with a special program called an <strong>interpreter</strong> which takes source code written by the user, determines the semantics of the source code (interprets it) and executes the semantics. This is typically done in a step-by-step fashion, repeatedly taking the next semantic unit and executing it. Examples of interpreted languages include Python, Ruby and Lisp.</p>

<p>Both compilers and interpreters need to understand the semantics of the language - the compiler uses the semantics for the translation to object code; the interpreter uses the semantics for direct execution. Consequently, a program in a compiled language executes faster than the equivalent program in an interpreted language but has the overhead of the compilation phase (i.e. we need to compile our program first before we can run it, which can take a while if the program is very big). If we make a change in our code with a compiled language, we need to recompile the entire program before we can test out our new changes.</p>

<p>One advantage for an interpreted language is the relatively quick turn-around time for program development. Individual components of a large program can be written, tested and debugged without the overhead of compiling a complete program. Interpreters also encourage experimentation, particularly when starting out - just enter an expression into the interpreter and see what happens.</p>

<p>Python is an interpreted language - it has an interpreter. The python interpreter is a typical <strong>read-eval-print loop interpreter</strong>. In other words, it repeatedly reads expressions input by the user, evaluates the expressions and prints out the result.</p>

<h4 id="data-types">Data Types</h4>

<p>Another important issue when considering programming languages is the way the language deals with <strong>types</strong>. Types are used by programming languages (and users) to distinguish between “apples and oranges”. At the lowest level all data stored in the computer are simply sequences of 1’s and 0’s. What is the meaning of a given sequence of 1’s and 0’s? Does it represent an “apple” or an “orange”? In order to determine the intended meaning of such a sequence, it has a <em>type</em> associated it. The type is used to determine the meaning of the 1’s and 0’s <em>and</em> to determine what operations are valid for that data. Programming languages come with built-in types such as integers (whole numbers) and strings (sequences of characters). They also allow users to define their own types.</p>

<p>Programming languages implement <strong>type checking</strong> in order to ensure the consistency of types in our code. This stops us from doing silly things like trying to add a number to a word, or trying to store an “apple” in a memory location which should only contain an “orange”.</p>

<p>Programming languages are typically either <strong>statically typed</strong> or <strong>dynamically typed</strong> languages. When using a statically typed language, checks for the consistency of types are done ‘up-front’, typically by the compiler and any inconsistencies are reported to the user as type errors at <strong>compile time</strong> (i.e. while the compiler is compiling the program). When using a dynamically typed language, checks for type errors are carried out at <strong>run time</strong> (i.e. while the user is running the program).</p>

<p>There is a connection between whether the language is compiled or interpreted and whether the language is statically or dynamically typed; many statically typed languages are compiled, and many dynamically typed languages are interpreted. Statically typed languages are usually preferred for large-scale development because there is better control over one source of ‘bugs’: type errors. (But remember, just because the program has no type errors doesn’t make it correct! This is just one kind of bug that our program must not have to run properly.) On the other hand, dynamically typed languages tend to provide a gentler introduction to types and programs tend to be simpler. Python is dynamically typed.</p>

<h3 id="notes-formatting">Notes Formatting</h3>
<p>In the remainder of the notes we will use different boxes to indicate different parts of the content. These may appear in the readings or separately on Blackboard. Below are examples.</p>

<div class="important">

  <h4 id="information">Information</h4>

  <p>Detailed information will appear in boxes similar to this one, such as the syntax and semantics of Python code presented in the notes, and summaries of the content. Understanding the concepts presented here will assist you in writing programs.</p>

</div>

<div class="aside">

  <h4 id="aside">Aside</h4>

  <p>Further information will appear in these boxes. These asides go beyond the course content, but you may find them interesting. You can safely ignore them, but they will often demonstrate several powerful features of Python, and they may be a useful challenge for some students.</p>

</div>

<div class="extra">

  <h4 id="extra-examples">Extra examples</h4>

  <p>In the remainder of the notes we sometimes give more detailed examples. These extra examples are delimited from the main text by these boxes. You may find them useful.</p>

</div>

<div class="viz">

  <h4 id="visualizations">Visualizations</h4>

  <p>These boxes contain visualizations of Python code. You might find that these visualizations aid in your understanding of how Python works. You can visualize your own code by going to the Python Tutor Visualisation Tool at <a href="http://pythontutor.com/visualize.html">http://pythontutor.com/visualize.html</a>. The home page for Python Tutor is at <a href="http://www.pythontutor.com/">http://www.pythontutor.com/</a>.</p>

</div>

<blockquote class="blockquote">
  <p>Our galaxy itself contains a hundred million stars;</p>
  <p>It’s a hundred thousand light-years side to side;</p>
  <p>It bulges in the middle sixteen thousand light-years thick,</p>
  <p>But out by us it’s just three thousand light-years wide.</p>
</blockquote>

<h2 id="arithmetic-basic-types-and-variables">Arithmetic, Basic Types and Variables</h2>

<h3 id="python-arithmetic-and-integers">Python Arithmetic and Integers</h3>

<p>Python understands arithmetical expressions and so the interpreter can be used as a calculator. For example:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span>
<span class="mi">14</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span>
<span class="mi">20</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">10</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">-</span> <span class="mi">3</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">10</span> <span class="o">-</span> <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="mi">3</span><span class="p">)</span>
<span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span>
<span class="o">-</span><span class="mi">12</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">3</span>
<span class="mi">8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">**</span> <span class="mi">2</span>
<span class="mi">18</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
<span class="mi">36</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">7</span> <span class="o">//</span> <span class="mi">3</span>
<span class="mi">2</span>
</code></pre>
    </div>
  </div>
</div>

<p>(Notice how ** is the Python operator for exponentiation.)</p>

<p>There are a few things worth pointing out about these examples.
Firstly, the Python interpreter reads user input as strings – i.e. sequences of characters. So for example, the first user input is read in as the string “2 + 3 * 4”. This is treated by the interpreter as a piece of syntax – in this case valid syntax that represents an arithmetic expression. The interpreter then uses the semantics to convert from a string representing an arithmetic expression into the actual expression. So the substring “2” is converted to its semantics (meaning) – i.e. the number 2. The substring “+” is converted to its meaning – i.e. the addition operator. Once the interpreter converts from the syntax to the semantics, the interpreter then evaluates the expression, displaying the result.</p>

<p>This process of converting from syntax to semantics is called <strong>parsing</strong>.</p>

<p>Secondly, the relationship between the arithmetical operators is what humans normally expect – for example, multiplication takes precedence over addition. When looking at expressions involving operators, we need to consider both <strong>precedence</strong> and <strong>associativity</strong>.</p>

<p>Precedence of operators describes how tightly the operators bind to the arguments. For example, exponentiation binds more tightly than multiplication or division, which in turn bind more tightly than addition or subtraction. Precedence dictates the order of operator application (i.e. exponentiation is done first, etc.)</p>

<p>Associativity describes the order of application when the same operator appears in a sequence – for example <code class="highlighter-rouge">10 - 4 - 3</code>. All the arithmetical operators are left-associative – i.e. the evaluation is from left to right. Just like in mathematics, we can use brackets when the desired expression requires the operators to be evaluated in a different order.</p>

<p>Finally, dividing one integer by another, using the // divide operator (known as the div operator), produces an integer – the fractional part of the answer is discarded.</p>

<p>These examples are about integer arithmetic – integers form a built-in type in Python.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">int</span><span class="s">'&gt;</span><span class="err">
</span></code></pre>
    </div>
  </div>
</div>

<p>Note how the abbreviation for integers in Python is int. Also, note that type is a built-in Python function that takes an object (in this case the number 3) and returns the type of the object. We will see plenty of examples of Python functions in following sections.</p>

<h3 id="floats">Floats</h3>

<p>There is another number type that most programming languages support – <strong>floats</strong>. Unlike integers, which can only store whole numbers, floats can store fractional parts as well. Below are some examples involving floats in Python.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">7</span><span class="o">/</span><span class="mi">4</span>
<span class="mf">1.75</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">7</span><span class="o">//</span><span class="mi">4</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">-</span><span class="mi">7</span><span class="o">//</span><span class="mi">4</span>
<span class="o">-</span><span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mf">7.9</span><span class="o">//</span><span class="mi">3</span>
<span class="mf">2.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mf">2.0</span><span class="o">**</span><span class="mi">60</span>
<span class="mf">1.152921504606847e+18</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mf">0.5</span><span class="o">**</span><span class="mi">60</span>
<span class="mf">8.6736173798840355e-19</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mf">2e3</span>
<span class="mf">2000.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="mf">2e3</span><span class="p">)</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">float</span><span class="s">'&gt;</span><span class="err">
</span><span class="s">&gt;&gt;&gt; int(2.3)</span><span class="err">
</span><span class="s">2</span><span class="err">
</span><span class="s">&gt;&gt;&gt; float(3)</span><span class="err">
</span><span class="s">3.0</span><span class="err">
</span><span class="s">&gt;&gt;&gt; 5/6</span><span class="err">
</span><span class="s">0.8333333333333334</span><span class="err">
</span><span class="s">&gt;&gt;&gt; -5/6</span><span class="err">
</span><span class="s">-0.8333333333333334</span><span class="err">
</span></code></pre>
    </div>
  </div>
</div>
<p>The syntax for floats is a sequence of characters representing digits, optionally containing the decimal point character and also optionally a trailing ‘e’ and another sequence of digit characters. The character sequence after the ‘e’ represents the power of 10 by which to multiply the first part of the number. This is called <strong>scientific notation</strong>.</p>

<p>The first example shows that dividing two integers with the / operator gives a float result of the division. The single / division is known as <strong>float division</strong> and will always result in a float. If an integer result is desired, the // operator must be used. This is the integer division operator and will divide the two numbers as if they are integers (performs the mathematical operation <strong>div</strong>). <strong>Note</strong> that this will always round down towards negative infinity, as shown in the third example. If one of the numbers is a float, it turns both numbers into their integer form and then performs the integer division but returns a float answer still, as seen in the third example.</p>

<p>The last two examples highlights one very important aspect of floats – <strong>they are approximations to numbers</strong>. Not all decimal numbers can be accurately represented by the computer in its internal representation. This is because floats occupy a fixed chunk of memory. The amount of memory used to store a float constrains the precision of the numbers that it can represent.</p>

<h3 id="variables-and-assignments">Variables and Assignments</h3>
<p>Most calculators allow results to be stored away in memory and later retrieved in order to carry out complex calculations. This can be done in Python by using <strong>variables</strong>. As we will soon see, variables are not just for numerical calculations but can be used to store any information for later use.</p>

<p>The valid syntax for variables is any string starting with an alphabetic or underscore character (‘a’-‘z’ or ‘A’- ‘Z’ or ‘<em>’) followed by a sequence of alphanumeric characters (alphabetic + ‘0’-‘9’) and ‘</em>’. Python uses special <strong>keywords</strong> itself and these cannot be used for any other purpose (for example, as variable names). The Python keywords are listed in the table below. A way of knowing that a word is a keyword is that it will appear in a different colour in IDLE.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="bp">False</span>      <span class="k">class</span>      <span class="nc">finally</span>    <span class="ow">is</span>         <span class="k">return</span>
    <span class="bp">None</span>       <span class="k">continue</span>   <span class="k">for</span>        <span class="k">lambda</span>     <span class="k">try</span>
    <span class="bp">True</span>       <span class="k">def</span>        <span class="nf">from</span>       <span class="k">nonlocal</span>   <span class="k">while</span>
    <span class="ow">and</span>        <span class="k">del</span>        <span class="k">global</span>     <span class="ow">not</span>        <span class="k">with</span>
    <span class="k">as</span>         <span class="k">elif</span>       <span class="k">if</span>         <span class="ow">or</span>         <span class="k">yield</span>
    <span class="k">assert</span>     <span class="k">else</span>       <span class="kn">import</span>     <span class="nn">pass</span>
    <span class="k">break</span>      <span class="k">except</span>     <span class="ow">in</span>         <span class="k">raise</span>
</code></pre>
    </div>
  </div>
</div>
<p>In later sections, we will see that it is important to choose a good name for variables that accurately shows what the value is meant to represent. There is a convention as well in Python of using lowercase letters in variable names and underscores to separate words, which is adhered to in these notes. There is not anything stopping us ignoring the points in this paragraph, but it becomes an unnecessary annoyance for other people reading our code.
Below are some examples of the use of variables.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">num1</span> <span class="o">=</span> <span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">num1</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">12</span><span class="o">**</span><span class="n">num1</span>
<span class="mi">144</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">num2</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s">'num2'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">num3</span> <span class="o">=</span> <span class="n">num1</span><span class="o">**</span><span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">num3</span>
<span class="mi">4</span>
</code></pre>
    </div>
  </div>
</div>
<p>The first example above shows an <strong>assignment</strong> – the variable <code class="highlighter-rouge">num1</code> is assigned the value <code class="highlighter-rouge">2</code>. The semantics of the <strong>assignment statement</strong> is: evaluate (i.e. work out the value of) the right hand expression and associate the variable on the left hand side of the statement with that value. The left hand side of an assignment statement must be a variable (at least for now – later we will see other possibilities). If the variable already has a value, that value is overwritten by the value on the right hand side of the statement. Note that the assignment statement (when evaluated) has no value – the interpreter does not display a value. Assignments are used for their <strong>side-effect</strong> – the association of a variable with a value.</p>

<p>The second example shows what happens when we ask the interpreter to evaluate <code class="highlighter-rouge">num1</code>. The result is the value associated with the variable. The third example extends this by putting <code class="highlighter-rouge">num1</code> inside an arithmetical expression. The fourth example shows what happens when we try to get the value of the variable <code class="highlighter-rouge">num2</code>, to which we have not yet given a value. This is known as an exception and will appear whenever something is typed that Python cannot understand or evaluate. The final example shows how variables can appear on both sides of an assignment (in this case, a variable called <code class="highlighter-rouge">num3</code> is assigned the value worked out by evaluating <code class="highlighter-rouge">num1**2</code>; the value of <code class="highlighter-rouge">num1</code> is 2, so <code class="highlighter-rouge">num1**2</code> is 4 and this is the value given to <code class="highlighter-rouge">num3</code>.</p>

<h3 id="strings">Strings</h3>

<p>To finish this section we introduce the <strong>string</strong> type, which is used to represent text, and we give some examples of type conversion and printing.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"Spam "</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">s</span>
<span class="s">'Spam Spam Spam '</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">s</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> 
<span class="nb">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">+</span><span class="p">:</span> <span class="s">'int'</span> <span class="ow">and</span> <span class="s">'str'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="s">''</span><span class="p">)</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">str</span><span class="s">'&gt;</span><span class="err">
</span><span class="s">&gt;&gt;&gt; int("42")</span><span class="err">
</span><span class="s">42</span><span class="err">
</span><span class="s">&gt;&gt;&gt; str(42)</span><span class="err">
</span><span class="s">'</span><span class="mi">42</span><span class="s">'</span><span class="err">
</span><span class="s">&gt;&gt;&gt; print(s + 42)</span><span class="err">
</span><span class="s">Traceback (most recent call last):</span><span class="err">
</span><span class="s">  File "&lt;stdin&gt;", line 1, in </span><span class="err">
</span><span class="s">TypeError: cannot concatenate '</span><span class="nb">str</span><span class="s">' and '</span><span class="nb">int</span><span class="s">' objects</span><span class="err">
</span><span class="s">&gt;&gt;&gt; print(s + str(42))</span><span class="err">
</span><span class="s">Spam 42</span><span class="err">
</span></code></pre>
    </div>
  </div>
</div>

<p>The syntax for strings is a double or single quote, followed by a sequence of characters, followed by a matching double or single quote. Notice how the space character is part of the string assigned in the variable <code class="highlighter-rouge">s</code>, as it is contained within the double quotes. The string <code class="highlighter-rouge">s</code>, therefore, is five characters in length. Notice carefully how this affects the statements executed after it.</p>

<p>As the second example shows, the multiplication operator is overloaded and generates a string that is the number copies of the original string.</p>

<p>Type conversion is used to change between a string representing a number and the number itself.</p>

<p>The built-in <code class="highlighter-rouge">print</code> function takes a string argument and displays the result to the user. Note, that in this example, <code class="highlighter-rouge">str</code> converts <code class="highlighter-rouge">42</code> into a string and then the addition operator concatenates (i.e. joins) the two strings together and the result is displayed to the user – another example of overloading.</p>

<blockquote class="blockquote">
  <p>Uhh, you do realise, uh, he has to be, uh,… well, dead,… by the terms of the card, uh, before he donates his liver.</p>
  <p class="indent">— Monty Python’s The Meaning of Life</p>
</blockquote>

<h2 id="python-programming">Python Programming</h2>

<h3 id="writing-software">Writing Software</h3>
<p>Software is often written by using a program called an <strong>Integrated Development Environment</strong>, or <strong>IDE</strong>. An IDE typically consists of an editor (often with syntax highlighting and layout support), a compiler or interpreter, class or library browsers and other tools to aid in software development and maintenance.</p>

<p>In this course we will be using <strong>IDLE</strong>, which is an IDE for Python.</p>

<p>When IDLE is started it will look something like this.</p>

<p><img src="images/04-idle-01.png" alt="" /></p>

<p>The window shown contains the running interpreter. The <code class="highlighter-rouge">&gt;&gt;&gt;</code> is the interpreter prompt – the interpreter is waiting for user input. <strong>Note</strong>: This image is taken from Windows 10 and will appear different depending on the Operating System you are using.</p>

<p>Below is a simple example of an interaction with the interpreter – note the syntax highlighting used by IDLE. The user inputs an expression at the prompt (followed by pressing Enter) and the interpreter responds by printing the result and another prompt.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span><span class="o">+</span><span class="mi">3</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">6</span><span class="o">*</span><span class="mi">7</span>
<span class="mi">42</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s">"I don't like spam!"</span><span class="p">)</span>
<span class="n">I</span> <span class="n">don</span><span class="s">'t like spam!</span><span class="err">
</span></code></pre>
    </div>
  </div>
</div>

<h3 id="using-idle-to-write-code">Using IDLE to write code</h3>
<p>Once we get beyond simple examples in the interpreter, we typically want to be able to save our code so we can use it again later. We can do this by writing our code in a file. IDLE has an editor window that enables us to write our code and save it into a file.</p>

<p>In the <strong>File</strong> menu choose <strong>New Window</strong>.</p>

<p>This will open a new window similar to the one below in which to enter the code.</p>

<p><img src="images/04-idle-02.png" alt="" /></p>

<p>In this window we will write our code. Let’s start with the simplest program used in programming, the “Hello World!” program.</p>

<p>Type the following code into the new window that you just opened.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'Hello World!'</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>
<p>When you have finished choose <strong>Save As</strong> from the <strong>File</strong> menu and save the file in a folder in which you want to do Python development. Name the file <code class="highlighter-rouge">hello.py</code>.
It is important to use the <code class="highlighter-rouge">.py</code> extension for Python files. Apart from making it easier for us to spot the Python files, various operating systems and some tools also recognise the extension.
You will notice that if the <code class="highlighter-rouge">.py</code> extension is missing the colours of the code that you write and have written will no longer be present in the IDLE editor window. If this happens re-save the file with the <code class="highlighter-rouge">.py</code> extension.
Now under the <strong>Run</strong> menu choose <strong>Run Module</strong> (or alternatively press <strong>F5</strong>) to run the program that we have just written. The output will appear in IDLE similar to the following image.</p>

<p><img src="images/04-idle-03.png" alt="" /></p>

<p>As can be seen the <code class="highlighter-rouge">print</code> function of Python displays the data that is the input to the <code class="highlighter-rouge">print</code> function (data inside the brackets) in the interpreter. In this case, the string <code class="highlighter-rouge">'Hello World!'</code> is displayed.</p>

<h3 id="code-layout--good-programming-practices">Code Layout – Good Programming Practices</h3>
<p>Most editors will automatically lay out the code with the use of whitespace (a combination of spaces and tabs). In most programming languages, however, whitespace is (mostly) unimportant, as it does not affect the code.</p>

<p>So why bother with layout then?</p>

<p>It is for <strong>human readability</strong>. Software engineers typically work in teams and so they need to share code. Consistency is important as it makes it easier for one human to understand what another human has written (we are not machines). It also helps for maintenance and modification of the code at a later date – if we were looking at code we wrote 6 months ago, it’s unlikely we would remember it, so we would want it to be easy to read.</p>

<p>Python takes layout one step further:</p>

<h4 id="whitespaces-affect-the-semantics">Whitespaces affect the semantics!</h4>
<p>When writing a block of code (the body of a function definition for example), some way of determining the start and end of code blocks is required. In many languages, keywords or some form of brackets are used to mark the start and end of a block.</p>

<h4 id="python-uses-indentation">Python uses indentation.</h4>
<p>When a new block is started (indicated by a <code class="highlighter-rouge">:</code>, the level of indentation is increased (typically one tab stop or 4 spaces). After the last statement in the block the indentation level is decremented.</p>

<p>It is also regarded as <strong>good coding practice</strong> to keep the width of any code written to within <strong>80 characters wide</strong>. There are multiple reasons for this including:</p>
<ul>
  <li>It is easy to read – 80 characters is an easy to read line width especially for something that we are already straining our brains to read, such as code.</li>
  <li>Screen sizes are different – If we write code on a wide screen and do not care about line width and later read it on a standard width monitor then it may not necessarily fit (even with the window enlarged), producing unexpected line wrapping.</li>
  <li>An A4 page, in portrait layout, with normal margins and font size is approximately 80 characters wide – if we keep within this then our code should print without any unwanted line-wrap</li>
  <li>Windows that are used for writing code have a default width of just over the 80 characters wide. If the 80 characters width is changed then the window needs to be resized to fit.</li>
</ul>

<div class="aside">

  <p>I arrange, design, and sell shrubberies</p>

</div>

<p>In this section we will look at some issues relating to the design and implementation of software via a simple example. As we go we will introduce more of Python’s syntax and semantics. Before doing so, we look at <strong>the software lifecycle</strong>. One description of the software lifecycle can be found in Wikipedia at <a href="https://en.wikipedia.org/wiki/Software_development_process">https://en.wikipedia.org/wiki/Software_development_process</a>.</p>

<p>Basically, the software lifecycle describes all the processes required in order to follow good software engineering practices – the aim being to produce high quality software. The basic components of the software lifecycle are as follows:</p>

<ul>
  <li>Requirements gathering
    <ul>
      <li>What does the client want?</li>
      <li>What operating system will the system run on?</li>
      <li>What commercial off-the-shelf (COTS) software/hardware will be available?</li>
      <li>Will a hazard/risk analysis be required? (This is often needed when the software will be part of a safety or security critical system)</li>
      <li>What other systems will this system interface to?</li>
    </ul>
  </li>
  <li>Design
    <ul>
      <li>Top-level specification of the system. This may be informal - e.g. a structured English specification, or formal – using logic and mathematics (e.g. for safety/security critical systems)</li>
      <li>Problem decomposition</li>
      <li>Module design</li>
      <li>Interface design</li>
    </ul>
  </li>
  <li>Coding
    <ul>
      <li>Implementation of modules</li>
      <li>System integration</li>
    </ul>
  </li>
  <li>Testing
    <ul>
      <li>Bottom-up (unit) testing</li>
      <li>Integration testing (gluing modules together)</li>
      <li>Systems testing (does the overall system perform as required?)</li>
    </ul>
  </li>
  <li>Maintenance
    <ul>
      <li>Fix problems</li>
      <li>Add features</li>
      <li>Respond to changed client requirements</li>
    </ul>
  </li>
</ul>

<p>Earlier phases often need to be revisited as problems are uncovered in later phases.  In this course we will concentrate mostly on the design, coding and testing phases, typically by working through examples.</p>

<p>In follow-on courses, we will broaden the scope and move from programming as individuals to software development by teams of software engineers where no individual can reasonably be expected to have a deep understanding of all the software relating to a given project.</p>

<blockquote class="blockquote">
  <p> Other Man: Well I’m very sorry but you didn’t pay!</p>
  <p> Man:	Ah hah! Well if I didn’t pay, why are you arguing? </p>
  <p> Ah HAAAAAAHHH! Gotcha!</p>
  <p> Other Man: No you haven’t!</p>
  <p> Man:	Yes I have! If you’re arguing, I must have paid.</p>
  <p> Other Man: Not necessarily. I <em>could</em> be arguing in my spare time.</p>
  <p> Man:	I’ve had enough of this!</p>
  <p> Other Man: No you haven’t.</p>
  <p> Man:	Oh shut up!</p>
</blockquote>

<h1 id="introduction-to-software-design-and-implementation">Introduction to Software Design and Implementation</h1>
<h3 id="asking-a-question">Asking a Question</h3>

<p>There comes a time when input from the user is required to be able to
collect data to process. This can be done using the input function. This
function takes a string prompt as an argument. When the code is run the
user sees the prompt and types in the data. input takes this data in as
a <strong>string</strong>, i.e. a piece of text. An example of using input follows.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What is your name? "</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"! Have a nice day."</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>Saving as <code class="highlighter-rouge">input.py</code> and running the code, the output is similar to</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; 
What is your name? Arthur, King of the Britons
Hello Arthur, King of the Britons! Have a nice day.
</code></pre>
    </div>
  </div>
</div>
<p>Notice that the <code class="highlighter-rouge">input</code> prompt has a space at the end after the question mark. This space is included to separate the question from the user’s response in the interaction. Without it, the interaction would look less appealing to the user: 
	<code class="highlighter-rouge">What is your name?Arthur, King of the Britons</code></p>

<p>As the example shows, strings can be joined together to form one string for use in a <code class="highlighter-rouge">print</code> function. This is very useful in situations such as this where we want to print a combination of messages and values (as in our example). The examples show both methods of joining strings together for printing. The <code class="highlighter-rouge">,</code> is the first one used, it joins any items together with spaces automatically placed in between. The second is the <code class="highlighter-rouge">+</code> symbol, it joins the items together by adding one string to the next to form a single string.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="nb">input</span> <span class="n">Syntax</span> 
<span class="n">variable_name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">string_prompt</span><span class="p">)</span>
<span class="nb">input</span> <span class="n">Semantics</span>
<span class="n">variable_name</span> <span class="ow">is</span> <span class="n">given</span> <span class="n">the</span> <span class="n">string</span> <span class="n">value</span> <span class="n">of</span> <span class="n">what</span> <span class="n">the</span> <span class="n">user</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">after</span> <span class="n">being</span> <span class="n">prompted</span><span class="o">.</span>
<span class="k">print</span> <span class="n">Syntax</span> 
<span class="k">print</span><span class="p">(</span><span class="n">item1</span><span class="p">,</span> <span class="n">item2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">itemn</span><span class="p">)</span>
<span class="k">print</span> <span class="n">Semantics</span> 
<span class="n">Each</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">displayed</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">interpreter</span><span class="p">,</span> <span class="k">with</span> <span class="n">a</span> <span class="n">space</span> <span class="n">separating</span> <span class="n">each</span> <span class="n">item</span><span class="o">.</span> <span class="k">print</span> <span class="n">also</span> <span class="n">takes</span> <span class="n">two</span> <span class="n">optional</span> <span class="n">arguments</span><span class="o">.</span> <span class="n">The</span> <span class="n">sep</span> <span class="n">argument</span> <span class="n">changes</span> <span class="n">what</span> <span class="n">the</span> <span class="n">separator</span> <span class="n">between</span> <span class="n">the</span> <span class="n">items</span><span class="o">.</span> <span class="n">If</span> <span class="ow">not</span> <span class="n">given</span><span class="p">,</span> <span class="n">the</span> <span class="n">items</span> <span class="n">are</span> <span class="n">separated</span> <span class="k">with</span> <span class="n">a</span> <span class="n">space</span> <span class="n">otherwise</span><span class="p">,</span> <span class="n">the</span> <span class="n">items</span> <span class="n">will</span> <span class="n">be</span> <span class="n">separated</span> <span class="n">by</span> <span class="n">the</span> <span class="n">given</span> <span class="n">string</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">:</span>
	<span class="k">print</span><span class="p">(</span><span class="n">item1</span><span class="p">,</span> <span class="n">item2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">itemn</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">"separator"</span><span class="p">)</span>
<span class="n">Results</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">items</span> <span class="n">being</span> <span class="n">separated</span> <span class="n">by</span> <span class="n">the</span> <span class="s">"separator"</span> <span class="n">string</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">spaces</span><span class="o">.</span> <span class="n">The</span> <span class="n">end</span> <span class="n">argument</span> <span class="n">changes</span> <span class="n">what</span> <span class="ow">is</span> <span class="n">printed</span> <span class="n">after</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">items</span><span class="o">.</span> <span class="n">Multiple</span> <span class="k">print</span> <span class="n">function</span> <span class="n">calls</span> <span class="n">will</span> <span class="n">display</span> <span class="n">output</span> <span class="n">on</span> <span class="n">separate</span> <span class="n">lines</span><span class="p">,</span> <span class="n">unless</span> <span class="n">the</span> <span class="n">end</span> <span class="n">argument</span> <span class="ow">is</span> <span class="n">changed</span> <span class="k">as</span> <span class="n">the</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">end</span> <span class="n">prints</span> <span class="k">with</span> <span class="n">a</span> <span class="n">newline</span> <span class="n">character</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">:</span> 
	<span class="k">print</span><span class="p">(</span><span class="n">item1</span><span class="p">,</span> <span class="n">item2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">itemn</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">"ending"</span><span class="p">)</span>
<span class="n">Will</span> <span class="n">end</span> <span class="n">the</span> <span class="k">print</span> <span class="k">with</span> <span class="n">the</span> <span class="s">"ending"</span> <span class="n">string</span> <span class="n">after</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">items</span> <span class="n">are</span> <span class="n">printed</span><span class="o">.</span> 
</code></pre>
    </div>
  </div>
</div>

<h3 id="true-or-false">True or False</h3>
<p>In programing there is always a time when a test is required. This can be used, for example, to see if a number has a relationship with another or if two objects are the same.</p>

<p>There are several character combinations that allow for testing.</p>
<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>== is equal to
!=  not equal to
&lt;   Less than
&gt;   Greater than
&lt;=  Less than or equal to
&gt;=  Greater than or equal to
</code></pre>
    </div>
  </div>
</div>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">1</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">1</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">"Tim"</span> <span class="o">&lt;</span> <span class="s">"Tom"</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">"Apple"</span> <span class="o">&gt;</span> <span class="s">"Banana"</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">"A"</span> <span class="o">&lt;</span> <span class="s">"a"</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">bool</span><span class="s">'&gt;</span><span class="err">
</span></code></pre>
    </div>
  </div>
</div>

<p>As can be seen these statements result in either True or False. True or False are the two possible values of the type <code class="highlighter-rouge">bool</code> (short for boolean). Also note that upper and lower case letters in strings are not equal and that an upper case letter is less than the corresponding lower case letter. The reason for this is that computers can only understand numbers and not any characters. Therefore, there is a convention set up to map every character to a number. This convention has become the <code class="highlighter-rouge">ASCII</code> scheme. ASCII makes the upper case letters be the numbers 65 through to 90 and the lower case letters the numbers 97 to 122.</p>

<h3 id="making-decisions">Making Decisions</h3>
<p>The ability to do a test has no use if it can not be used in a program. It is possible to test and execute a body of code if the test evaluates to <code class="highlighter-rouge">True</code>.</p>

<p>This is done using the <code class="highlighter-rouge">if</code> statement.</p>

<p>Let’s start with a simple example. The following code is an example of an if statement that will display a hello message if the name input by the user is <code class="highlighter-rouge">"Tim"</code>.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What is your name? "</span><span class="p">)</span>

<span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Tim"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Greetings, Tim the Enchanter"</span><span class="p">)</span>

</code></pre>
    </div>
  </div>
</div>
<p>Saving this code as <code class="highlighter-rouge">if.py</code> and running, the output from this code looks like:</p>
<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; 
What is your name? Tim
Greetings, Tim the Enchanter

&gt;&gt;&gt; 
What is your name? Arthur, King of the Britons
</code></pre>
    </div>
  </div>
</div>
<p>As can be seen if name does not equal <code class="highlighter-rouge">"Tim"</code> then nothing is output from the code.</p>

<div class="important">
  <h4 id="if-statement-syntax">If Statement Syntax</h4>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>If statements start with an <code class="highlighter-rouge">if</code> followed by a <em>test</em> and then a colon. The <em>body</em> of code to be executed starts on a new line and indented following the Python indentation rules.</p>
  <h4 id="semantics">Semantics</h4>
  <p>If test evaluates to <code class="highlighter-rouge">True</code> then <em>body</em> is executed. Otherwise, <em>body</em> is skipped.</p>

</div>

<p>What if we want to run a different block of code if the test is False?
This requires an <strong>if, else</strong> statement
Our example can be modified to print a different message if name is not <code class="highlighter-rouge">"Tim"</code>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What is your name? "</span><span class="p">)</span>

<span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Tim"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Greetings, Tim the Enchanter"</span><span class="p">)</span>
<span class="k">else</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>Saving this code as <code class="highlighter-rouge">if_else.py</code> , the output from this code looks like:</p>
<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; 
What is your name? Tim
Greetings, Tim the Enchanter

&gt;&gt;&gt; 
What is your name? Arthur, King of the Britons
Hello Arthur, King of the Britons
</code></pre>
    </div>
  </div>
</div>

<div class="important">
  <h4 id="if-else-syntax">If-Else Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body1&lt;/span&gt;  &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body2&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>The <code class="highlighter-rouge">if</code> segment of the If-Else statement is the same is for <code class="highlighter-rouge">if</code>. After <em>body1</em> of the if on a new line and de-dented is an <code class="highlighter-rouge">else</code> followed by a colon. Then <em>body2</em> starts on a new line and indented again following the Python indentation rules.
Semantics
If test evaluates to <code class="highlighter-rouge">True</code> then <em>body1</em> is executed. Otherwise <em>body2</em> is executed.</p>

</div>

<p>It is also possible to carry out multiple tests within the same if statement and execute different blocks of code depending on which test evaluates to True. We can do this simply by using an <strong>if, elif, else</strong> statement.
Our example can be modified further to look like the following</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>name = input("What is your name? ")

if name == "Tim" :
    print("Greetings, Tim the Enchanter")
elif name == "Brian" :
    print("Bad luck, Brian")
else :
    print("Hello", name)
</code></pre>
    </div>
  </div>
</div>

<p>Saving this code as <code class="highlighter-rouge">if_elif_else.py</code> , our example now has the following output:</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; 
What is your name? Tim
Greetings, Tim the Enchanter

&gt;&gt;&gt; 
What is your name? Brian
Bad luck, Brian

&gt;&gt;&gt; 
What is your name? Arthur, King of the Britons
Hello Arthur, King of the Britons
</code></pre>
    </div>
  </div>
</div>

<div class="important">
  <h4 id="if-elif-else-syntax">If-Elif-Else Syntax</h4>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;test1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body1&lt;/span&gt; &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;test2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body2&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;testn&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;bodyn&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;bodyn1&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>The <code class="highlighter-rouge">if</code> segment of the If-Elif-Else statement is the same as the <code class="highlighter-rouge">if</code> statement. This is the followed by an <code class="highlighter-rouge">elif</code> on a new line and de-dented from the body of the <code class="highlighter-rouge">if</code>. This is followed by the next test and a colon. The body of this test starts on a new, indented line. This is repeated for all the <code class="highlighter-rouge">elif</code> statements required. Then (if required) an <code class="highlighter-rouge">else</code> statement is last as described in the If-Else syntax section.</p>
  <h4 id="semantics-1">Semantics</h4>
  <p>If <em>test1</em> evaluates to <code class="highlighter-rouge">True</code> then <em>body1</em> is executed. Otherwise, if <em>test2</em> evaluates to <code class="highlighter-rouge">True</code> <em>body2</em> is executed. If all the tests are tested and if none evaluate to <code class="highlighter-rouge">True</code> then <em>bodyn1</em> is executed. In other words, the first (and only the first) <code class="highlighter-rouge">True</code> test in the if-elif-elif-… chain executes its body. If there is no <code class="highlighter-rouge">else</code> statement and none of the tests are <code class="highlighter-rouge">True</code>, then nothing is executed.
The <code class="highlighter-rouge">test</code> of an if/elif statement is known as the <strong>condition</strong>, because it specifies when the body will execute. if, elif, and else statements are also known as <strong>conditional statements</strong>.</p>
</div>

<h3 id="being-repetitive">Being Repetitive</h3>
<p>We are off to a good start, but the interaction is not very long. We are not doing much before we abruptly end the conversation. For our next addition to the program, we would like to be able to talk to the user for as long as we can. Let’s accomplish this by asking the user for a topic, talking about that topic, then asking for another topic. Here is an example of what we might want:</p>
<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>What is your name? Tim
Greetings, Tim the Enchanter
What do you want to talk about? Python
Do you like Python? yes
Why do you think that? it's easy to use
I also think that it's easy to use
What do you want to talk about? coconuts
Do you like coconuts? no
Why do you think that? they cannot migrate
I also think that they cannot migrate
What do you want to talk about? CSSE1001
Do you like CSSE1001? very much
Why do you think that? the course notes are very useful
I also think that the course notes are very useful
What do you want to talk about? nothing
Okay. Goodbye, Tim!
</code></pre>
    </div>
  </div>
</div>

<p>To do this, we will need to have a way to repeat the discussion until the conversation is over. We can use a construct called a <strong>while</strong> loop. We need to consider what code should be repeated (in this case, the discussion of a topic) and when it should keep going (in this case, when the topic is not “nothing”). Let’s update our code to include the repetition. This code can be downloaded as <code class="highlighter-rouge">interaction_while.py</code></p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What is your name? "</span><span class="p">)</span>
<span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Tim"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Greetings, Tim the Enchanter"</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Brian"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Bad luck, Brian"</span><span class="p">)</span>
<span class="k">else</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<span class="n">topic</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What do you want to talk about? "</span><span class="p">)</span>
<span class="k">while</span> <span class="n">topic</span> <span class="o">!=</span> <span class="s">"nothing"</span> <span class="p">:</span>
    <span class="n">like</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Do you like "</span> <span class="o">+</span> <span class="n">topic</span> <span class="o">+</span> <span class="s">"? "</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Why do you think that? "</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"I also think that"</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
    <span class="n">topic</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What do you want to talk about? "</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Okay. Goodbye, "</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"!"</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">topic = input(...)</code> line above the loop asks for the first topic. The <code class="highlighter-rouge">while topic != "nothing"</code> line checks if the given condition is <code class="highlighter-rouge">True</code>, and if it is, then the loop body repeatedly performs the actions until the condition is <code class="highlighter-rouge">False</code>. Notice that the last line of the body asks for a new topic, which is used as the topic for the next repetition of the loop. If that new topic is <code class="highlighter-rouge">nothing</code>, then the loop test <code class="highlighter-rouge">topic != "nothing"</code> becomes <code class="highlighter-rouge">False</code>, so the while loop will stop running and the code will continue after the loop body (where the indentation stops).
Notice that we are asking if the user likes the topic, but we are not using the response that the user gives. Ignoring the input from the user is very unusual behaviour, but we have done it here to simplify the example.
Run this code to experiment with it. What happens when the first topic is “nothing”? Why does that happen?
One thing that might seem a bit odd about our code is that the <code class="highlighter-rouge">topic = input(...)</code> line occurs in two places, once before the while loop, and once at the end of the loop body. This has to happen this way because the topic needs to be entered in before the <code class="highlighter-rouge">topic != "nothing"</code> test happens. We can avoid this by exiting the loop from inside the body. This is done using the <strong>break</strong> keyword. When <code class="highlighter-rouge">break</code> is executed inside a loop, the program will immediately exit the loop and continue after the body. We can use this with an if statement to specify how the loop should finish. This code is available at <code class="highlighter-rouge">interaction_break.py</code></p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What is your name? "</span><span class="p">)</span>
<span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Tim"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Greetings, Tim the Enchanter"</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Brian"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Bad luck, Brian"</span><span class="p">)</span>
<span class="k">else</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
    <span class="n">topic</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What do you want to talk about? "</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">topic</span> <span class="o">==</span> <span class="s">"nothing"</span> <span class="p">:</span>
        <span class="k">break</span>
    <span class="n">like</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Do you like "</span> <span class="o">+</span> <span class="n">topic</span> <span class="o">+</span> <span class="s">"? "</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Why do you think that? "</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"I also think that"</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Okay. Goodbye, "</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"!"</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first change that we have made is the condition test of the while loop. Since the loop keeps going as long as the condition is <code class="highlighter-rouge">True</code>, that means that “<code class="highlighter-rouge">while True</code>” will keep going until the <code class="highlighter-rouge">break</code> is reached (or it will go on forever if there is no <code class="highlighter-rouge">break</code>; loops that go forever are called <em>infinite loops</em>). Using <code class="highlighter-rouge">break</code> in this way means that the <code class="highlighter-rouge">topic = input(...)</code> line only has to appear once in our code.
In many situations, it is considered bad programming practice to have logic that exits a loop from within the middle of the loop body. This is because it complicates understanding the loop’s behaviour. The reader needs to understand the loop’s logical condition plus find and understand the break logic in the middle of the loop body. In the example above, the loop body is short and simple enough that finding the break logic is not difficult. However, once the logic becomes more complex and the code longer it would be harder to read. Try to avoid writing code that exits a loop from the middle of the loop’s body. But, be aware that it is possible and you may need to identify this type of logic in someone else’s code.</p>

<div class="important">

  <h4 id="while-loop-syntax">While Loop Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>The first line contains the word <code class="highlighter-rouge">while</code> followed by a boolean <code class="highlighter-rouge">test</code> and a <code class="highlighter-rouge">:</code>. Following is the body, an indented block of code.</p>
  <h4 id="semantics-2">Semantics</h4>
  <p>If <code class="highlighter-rouge">test</code> evaluates to <code class="highlighter-rouge">True</code> then the <code class="highlighter-rouge">body</code> is executed. Then the test is evaluated again, if it is still <code class="highlighter-rouge">True</code>, then the body is executed again. This process repeats until the test fails (becomes <code class="highlighter-rouge">False</code>). Each repetition is called an <strong>iteration</strong> through the loop, and the act of performing a repeated task is called <strong>iterating</strong>. When the test becomes <code class="highlighter-rouge">False</code> (or if it is <code class="highlighter-rouge">False</code> to start with), we “exit the loop” and execute the next statement after the indented block.
If a <code class="highlighter-rouge">break</code> statement is executed inside the loop, the loop will exit immediately.</p>
</div>

<blockquote class="blockquote">
  <p> Then you must cut down the mightiest tree in the forest… with… a herring!</p>
</blockquote>

<h1 id="loop-invariants">Loop Invariants</h1>

<p>It is not always easy to tell if a loop will create the correct result in every circumstance. Therefore, we use a <strong>loop invariant</strong> that states if this condition is True then the result should be correct. For this to work completely the invariant needs to be True at the start, at the end of the loop body and if the loop condition is False the invariant must still be True.</p>

<p>Here is an example that finds the prime factors of a number and puts them into a list. This function will use the <code class="highlighter-rouge">next_prime</code> function found in <code class="highlighter-rouge">prime.py</code>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">from</span> <span class="nn">prime</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">factorise</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns a list of the prime factors of 'n'.

    Parameters:
        n (int): Number for which factors are to be found.

    Preconditions:
        n &gt;= 2

    Return:
        list&lt;int&gt;: Prime factors of 'n'.
    """</span>
    <span class="n">prime</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">:</span>
        <span class="c1"># Loop Invariant: product(factors) * n == initial n
</span>        <span class="k">while</span> <span class="n">n</span> <span class="o">%</span> <span class="n">prime</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="n">factors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prime</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">/=</span> <span class="n">prime</span>
        <span class="n">prime</span> <span class="o">=</span> <span class="n">next_prime</span><span class="p">(</span><span class="n">prime</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">factors</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function starts with the current prime number set to 2, as 2 is the first prime number, and an empty list to store the primes in. We then start a while loop that keeps iterating as long as n &gt; 1. We do not want to go less than 2 as there are no primes less than 2. It is here, in a comment, that we introduce our loop invariant. In this case it is that the product of all the primes found so far multiplied by the current number that we are operating on equals the initial number. We then start another while loop that keeps appending the current prime number to the factors list while the current number is divisible by that prime, also dividing the current number by that prime to move onto the next number. Back in the first while loop we use the <code class="highlighter-rouge">next_prime</code> function to move onto the next prime number. The last thing the function does is return the list of factors.</p>

<p>Saving as <code class="highlighter-rouge">factorise.py</code> we can run a few tests to show this function working.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">factorise</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">factorise</span><span class="p">(</span><span class="mi">340</span><span class="p">)</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">17</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">17</span>
<span class="mi">340</span>
</code></pre>
    </div>
  </div>
</div>

<blockquote class="blockquote">
  <p> All right … all right … but apart from better sanitation and </p>
  <p> medicine and education and irrigation and public health and roads and a </p>
  <blockquote>

  </blockquote>
  <p> freshwater system and baths and public order … what have the Romans </p>
  <p> ever done for us? </p>
  <p class="indent"> — Monty Python’s Life of Brian</p>
</blockquote>

<h1 id="functional-decomposition">Functional Decomposition</h1>
<h2 id="reusing-the-code">Reusing the Code</h2>
<p>In the previous readings we used control structures to implement a simple conversation between a user and the computer. It is not very much to ask the user for all the topics to discuss. Let’s add in some code that starts off with a query about university, and make the computer’s reply “That’s very interesting”. In principle, this is easy, because we already have code that does a discussion, so perhaps we can reuse it by just copying it and changing certain parts.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What is your name? "</span><span class="p">)</span>
<span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Tim"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Greetings, Tim the Enchanter"</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Brian"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Bad luck, Brian"</span><span class="p">)</span>
<span class="k">else</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Hello "</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"."</span><span class="p">)</span>

<span class="n">like</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Do you like university? "</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Why do you think that? "</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"That's very interesting."</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
    <span class="n">topic</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What do you want to talk about? "</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">topic</span> <span class="o">==</span> <span class="s">"nothing"</span> <span class="p">:</span>
        <span class="k">break</span>
    <span class="n">like</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Do you like "</span> <span class="o">+</span> <span class="n">topic</span> <span class="o">+</span> <span class="s">"? "</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Why do you think that? "</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"I also think that"</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Okay. Goodbye, "</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"!"</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>
<p>This works, but there are a couple of things that might go wrong with copying code like this. First, it makes the code look more complicated than it is, and it is harder to read when the code is in two places instead of one. The second issue is to do with updating the program: if we want to modify how a discussion works, then we would need to update the code in two separate places. Worse, if we forget one of those two places, then the two discussions become different.</p>

<p>What we want to be able to do is to pull out, or abstract the idea of a “discussion” into a separate part of the code, and then be able to easily use that code in as many places as possible. Ideally, we want to end up with code that behaves like this (with code instead of the comments):</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="c1"># have a discussion on "university"
</span><span class="k">print</span><span class="p">(</span><span class="s">"That's very interesting."</span><span class="p">)</span>
<span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
    <span class="n">topic</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What do you want to talk about? "</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">topic</span> <span class="o">==</span> <span class="s">"nothing"</span> <span class="p">:</span>
        <span class="k">break</span>
    <span class="c1"># have a discussion on "topic"
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"I also think that"</span><span class="p">)</span><span class="c1"># , user's response
</span></code></pre>
    </div>
  </div>
</div>
<p>And then somewhere else in the code, we can define how a discussion works. This abstraction is called a <strong>function</strong>. Here is what the definition of a “discuss” function looks like in Python:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">discuss</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">like</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Do you like "</span> <span class="o">+</span> <span class="n">topic</span> <span class="o">+</span> <span class="s">"? "</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Why do you think that? "</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</code></pre>
    </div>
  </div>
</div>
<p>We use the <code class="highlighter-rouge">def</code> keyword to say that we are defining the function called <code class="highlighter-rouge">discuss</code>. Inside parentheses, we state the <em>formal parameters</em>, also called <em>arguments</em>, that the function takes, which are the bits of information that the function needs to know to complete its task. In this case, we cannot discuss something without knowing what topic to discuss, so we specify that the <code class="highlighter-rouge">discuss</code> function takes a single parameter, which we will give the name <code class="highlighter-rouge">topic</code>. After the first line is an indented body of code, most of which we are already familiar with. In this case, the discussion needs to supply or ‘give back’ a result at the end, which is the response that the user entered. We do this using the <strong>return</strong> keyword, which is shown in the last line above. When a <code class="highlighter-rouge">return</code> statement is reached, the function will end immediately; if there is a value after the return keyword, it is the result that is ‘given back’ (we say the value is <em>returned</em>).
Every time that we use the <code class="highlighter-rouge">discuss</code> function, this body of code is what actually gets executed. The indentation behaves in the same way we’ve seen before – when we stop indenting, then we have finished the function definition. Now that we have this abstraction, we can use the <code class="highlighter-rouge">discuss</code> function instead of using the actual discussion code directly:</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What is your name? "</span><span class="p">)</span>
<span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Tim"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Greetings, Tim the Enchanter"</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s">"Brian"</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Bad luck, Brian"</span><span class="p">)</span>
<span class="k">else</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Hello "</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"."</span><span class="p">)</span>

<span class="n">discuss</span><span class="p">(</span><span class="s">"university"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"That's very interesting."</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
    <span class="n">topic</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"What do you want to talk about? "</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">topic</span> <span class="o">==</span> <span class="s">"nothing"</span> <span class="p">:</span>
        <span class="k">break</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">discuss</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"I also think that"</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Okay. Goodbye, "</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"!"</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The full program that we have written is in <code class="highlighter-rouge">interaction.py</code>. This file also includes comments, which are discussed in the next section.</p>

<p>Notice the use of the return value in this line: <code class="highlighter-rouge">response = discuss(topic)</code>. This will execute the <code class="highlighter-rouge">discuss</code> function above, and the value that is returned is assigned to the variable <code class="highlighter-rouge">response</code>. The line <code class="highlighter-rouge">discuss("university")</code> shows a situation where our function is used for its side-effect of interacting with the user. The value is still returned by the function, but it is discarded by the main program.</p>

<div class="important">

  <h4 id="function-syntax">Function Syntax</h4>

  <p>A definition has the following form:</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;function_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>Function definitions start with the word <code class="highlighter-rouge">def</code>, followed by a <code class="highlighter-rouge">function_name</code> which follows the same syntax rules as for variable names. In parentheses is a comma separated list of arguments – these are all names of variables and are usually called the <strong>formal parameters</strong>. The body is an indented sequence of statements.</p>

  <p>Executing, or “calling”, a function uses the syntax</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="n"&gt;function_name&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>
  <p>The comma-separated values are called the <strong>actual parameters</strong>. The number of <code class="highlighter-rouge">values</code> must be the same as the number of <code class="highlighter-rouge">args</code> in the definition.</p>

  <h4 id="semantics">Semantics</h4>
  <p>When a function is called, the actual parameters are associated with the formal parameters. That is, each <code class="highlighter-rouge">arg</code> is treated as a variable with the corresponding <code class="highlighter-rouge">value</code>. Then the body is executed. After that, the program will continue from the point where the function was called.
If a <code class="highlighter-rouge">return</code> statement is executed, then the function will exit immediately. The resulting value of the function call will be the value used in the <code class="highlighter-rouge">return</code> statement.</p>
</div>

<div class="extra">
  <p>Another example of function definition and use 
Although addition is built into Python we can create our own definition as follows.</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>
  <p>In detail <code class="highlighter-rouge">– def</code> introduces the function definition for <code class="highlighter-rouge">add</code>. The name of the function is <code class="highlighter-rouge">add</code> and its formal parameters are <code class="highlighter-rouge">n</code> and <code class="highlighter-rouge">m</code>. The function simply computes the sum of <code class="highlighter-rouge">n</code> and <code class="highlighter-rouge">m</code> and returns that as the result of the function (using the <code class="highlighter-rouge">return</code> statement).</p>

  <p>Here are some example uses.</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>
  <p>In the first case we call the function passing in actual parameters 2 and 3. When the function is evaluated, <code class="highlighter-rouge">n</code> gets the value 2 and <code class="highlighter-rouge">m</code> gets the value 3. The function returns 5 as is seen when evaluated in the interpreter. The second example shows that we can use a call to the function within an arithmetic expression.</p>
</div>

<h2 id="decomposing-problems">Decomposing Problems</h2>
<p>There is more to software engineering than knowing how to write code. Part of the design process discussed above is problem decomposition. If we are given a description of a problem or task, how can we write a program that solves the problem?</p>

<p>The problem we will work on in this section is “write a program to find the nth prime number”. The first prime is 2, the second is 3, the third is 5 and so on.</p>

<p>The first step (after we understand the problem) is to decompose the problem into simpler and simpler subproblems until we reach a point where the subproblems are easy to implement.</p>

<p>Given we need to find the nth prime number, we could start at some prime (like 2 or 3) and find the next prime number. If we repeat this process, we will get to the prime we want. So an interesting subproblem is “given a number n, find the next prime number after n”.</p>

<p>To do this we can repeatedly look at the next number and ask if that number is a prime, if so we have finished, if not we keep looking. So the next interesting subproblem is “given a number n determine if n is a prime”.</p>

<p>Recall that a prime is a number that is divisible by only itself and one. We can therefore test for a number being a prime if we can test for divisibility of every number from 2 up to n. So, the last subproblem is “given numbers n and m, determine if m divides n (exactly)”.</p>

<h2 id="divisible-or-not-divisible">Divisible or not Divisible</h2>
<p>There is a useful mathematical operation that can be used for testing for divisibility. The operator <code class="highlighter-rouge">%</code> is known as <strong>mod</strong> or <strong>modulo</strong>. It returns the remainder of division, making it useful to test for divisibility.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">7</span> <span class="o">%</span> <span class="mi">2</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">7</span> <span class="o">%</span> <span class="mi">4</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">9</span> <span class="o">%</span> <span class="mi">3</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">10</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">7</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span>
<span class="bp">False</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first three results are because <code class="highlighter-rouge">7 // 2</code> is <code class="highlighter-rouge">3</code> with remainder <code class="highlighter-rouge">1</code>, <code class="highlighter-rouge">7 // 4</code> is <code class="highlighter-rouge">1</code> with remainder <code class="highlighter-rouge">3</code>, and <code class="highlighter-rouge">9 // 3</code> is <code class="highlighter-rouge">3</code> with remainder <code class="highlighter-rouge">0</code>. Testing for divisibility is the same as testing if the remainder is equal to <code class="highlighter-rouge">0</code>. So, <code class="highlighter-rouge">10</code> is divisible by <code class="highlighter-rouge">5</code>, and <code class="highlighter-rouge">7</code> is not divisible by <code class="highlighter-rouge">4</code>.</p>

<p>Now we have reached a level of detail that we know how to write it all in Python code, so we can now start writing the code, building up to larger subproblems.</p>

<h2 id="is-a-number-prime">Is a Number Prime?</h2>
<p>We will write a function called <code class="highlighter-rouge">is_prime</code> to test a number and return whether it is a prime number or not, using the idea above of testing numbers from 2 to n. This code can be downloaded as the file <code class="highlighter-rouge">is_prime1.py</code>.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns True iff 'num' is prime.

    Parameters:
        num (int): Integer value to be tested to see if it is prime.

    Return:
        bool: True if 'num' is prime. False otherwise.

    Preconditions:
        num &gt; 1
    """</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<p>The input to the function is the number <code class="highlighter-rouge">num</code>, this is the number that we wish to test if it is prime. Notice in the comment there is a <strong>precondition</strong>. As we discussed earlier, preconditions form a “contract” with the user; the function will work only if certain conditions are met. So, for example, if someone uses <code class="highlighter-rouge">is_prime</code> with a number less than 2, then the result could be anything - in this case, an incorrect value will be returned, in other cases the function could cause an error - but that is the caller’s problem because this falls outside the contract.</p>

<p>The first line of the function sets <code class="highlighter-rouge">i</code> to 2, <code class="highlighter-rouge">i</code> is the counting variable that is being used to keep track of the current value to test. It is common coding practice to use <code class="highlighter-rouge">i</code> (and <code class="highlighter-rouge">j</code> and <code class="highlighter-rouge">k</code> as counting variables in loops). The next line is a while, this while tests if <code class="highlighter-rouge">i &lt; num</code>, this will mean that we can test the divisibility of all the numbers less than <code class="highlighter-rouge">num</code>. The first line of the body of code in the while is an if statement. Inside the while loop, all we need to do is check if <code class="highlighter-rouge">i</code> divides <code class="highlighter-rouge">num</code> using the <code class="highlighter-rouge">%</code> operator. If <code class="highlighter-rouge">i</code> does divide <code class="highlighter-rouge">num</code> then <code class="highlighter-rouge">num</code> is not prime, therefore the body of the if statement is to simply return False. Notice that this takes advantage of the way return works: <em>a return statement will end the function immediately</em>; at this stage, we already know that <code class="highlighter-rouge">num</code> is not prime, so we can return immediately and ignore the rest of the function. The last line of the while body is to increment <em>i</em> by 1, this moves onto the next number to check. The last line of the function is to return <code class="highlighter-rouge">True</code>. This again uses the “stop immediately” property of return statements: if the function has not returned <code class="highlighter-rouge">False</code> by now, then the <code class="highlighter-rouge">if num % i == 0:</code> test never became <code class="highlighter-rouge">True</code> during the while loop, so we know that <code class="highlighter-rouge">num</code> must be prime, so we return <code class="highlighter-rouge">True</code>.</p>

<p>Here are a couple of examples of <code class="highlighter-rouge">is_prime</code>. Try out some more to test your understanding of the function.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">is_prime</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">is_prime</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<p>This code works fine but we can do better! Firstly note that if 2 does not divide <code class="highlighter-rouge">num</code> then there is no point testing if other even numbers divide <code class="highlighter-rouge">num</code> (as all even numbers are divisible by 2). We only need to consider odd <code class="highlighter-rouge">i</code>. Secondly if <code class="highlighter-rouge">i</code> does divide <code class="highlighter-rouge">num</code> then there is a <code class="highlighter-rouge">j</code> such that <code class="highlighter-rouge">num == i*j</code>. Therefore, if <code class="highlighter-rouge">num</code> has a factor then one will be less than or equal to the square root of <code class="highlighter-rouge">num</code>. Summarising, we only need to test if 2 divides <code class="highlighter-rouge">num</code> and if any odd <code class="highlighter-rouge">i</code> less than or equal to the square root of <code class="highlighter-rouge">num</code> divide <code class="highlighter-rouge">num</code>.</p>

<p>The function below implements these ideas. Update the definition to match the following code, or download <code class="highlighter-rouge">is_prime2.py</code>.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns True iff 'num' is prime.

    Parameters:
        num (int): Integer value to be tested to see if it is prime.

    Return:
        bool: True if 'num' is prime. False otherwise.

    Preconditions:
        num &gt; 1
    """</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="n">sqrt_num</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">sqrt_num</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first line introduces an <code class="highlighter-rouge">import</code> statement. This is used to load a module of other functions and data that could be useful. In this case the “<code class="highlighter-rouge">math</code>” module is used. This module contains many mathematical functions and numbers (such as pi) not present in the default Python libraries, in our case we are using the square root function (<code class="highlighter-rouge">sqrt</code>). To see more of what is in the math module, try <code class="highlighter-rouge">&gt;&gt;&gt; help(math) after importing the math module.</code></p>

<p>The first if statement in the code checks if <code class="highlighter-rouge">num</code> is 2 and if so, it is obviously prime so <code class="highlighter-rouge">True</code> is returned. The elif statement deals with divisibility by 2, if <code class="highlighter-rouge">num</code> is divisible by 2 then it is not prime, therefore <code class="highlighter-rouge">False</code> is returned. <code class="highlighter-rouge">sqrt_num</code> is set to the square toot of <code class="highlighter-rouge">num</code>. To do this, we call the square root function (<code class="highlighter-rouge">sqrt</code>) of the <code class="highlighter-rouge">math</code> library using the syntax <code class="highlighter-rouge">math.sqrt(num)</code>. <code class="highlighter-rouge">i</code> is then started at 3 as we are now checking the odd numbers only. The while loop will keep going while <code class="highlighter-rouge">i &lt;= sqrt_num</code> and will terminate when this test becomes false (i.e. when <code class="highlighter-rouge">i &gt; sqrt_num</code>). The if statement checks divisibility of <code class="highlighter-rouge">num</code> with <code class="highlighter-rouge">i</code> as before and returns <code class="highlighter-rouge">False</code> if that is the case. <code class="highlighter-rouge">i</code> is then incremented by 2, moving to the next odd number. As before, if the function has not returned by the end of the while loop, then the last line will be executed returning <code class="highlighter-rouge">True</code> (i.e. num is prime).</p>

<p>Now that we have updated the function, we can test it again.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">is_prime</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">is_prime</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">is_prime</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<p>Thinking more about how to test for primality enabled us to write more efficient code. The second version of the <code class="highlighter-rouge">is_prime</code> function is more efficient as there are fewer iterations through the while loop. This means the code will return an answer faster (especially for larger numbers). Try comparing the two functions with really large numbers and see if there is a difference. Although efficiency is very important in software engineering, we leave more detailed and formal discussions of efficiency to later courses.</p>

<h2 id="the-next-prime">The Next Prime</h2>
<p>The next function to define is <code class="highlighter-rouge">next_prime</code> which takes an <code class="highlighter-rouge">num</code> and returns the next prime after <code class="highlighter-rouge">num</code>. We will use the same idea as in the previous function - i.e. increment by twos. So we will do slightly different things depending on whether <code class="highlighter-rouge">num</code> is odd or even.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">next_prime</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns the next prime number after 'num'.

    Parameters:
        num (int): Starting point for the search for the next prime number.

    Return:
        int: The next prime number that can be found after 'num'.

    Preconditions:
        num &gt; 1
    """</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="n">next_number</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="n">next_number</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">2</span>

    <span class="c1"># next_number is the next odd number after num
</span>    <span class="k">while</span> <span class="ow">not</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">next_number</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">next_number</span> <span class="o">=</span> <span class="n">next_number</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">next_number</span>
</code></pre>
    </div>
  </div>
</div>

<p>Looking at the code in detail – we start with an if statement that tests if <code class="highlighter-rouge">num</code> is even. We use the variable <code class="highlighter-rouge">next_number</code> to be the next candidate for being a prime and we initialise it to be either one or two more than <code class="highlighter-rouge">num</code>, depending on whether <code class="highlighter-rouge">num</code> is odd or even. We have added a comment to remind us about this. The while loop simply increments <code class="highlighter-rouge">next_number</code> by 2 until it becomes prime. Note that the test in the while loop is the logical negation of the <code class="highlighter-rouge">is_prime</code> test. In other words, we continue looping while <code class="highlighter-rouge">next_number</code> is not a prime.</p>

<p>Here are the results of testing.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">next_prime</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">next_prime</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<span class="mi">17</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">next_prime</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="mi">103</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">next_prime</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">next_prime</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="mi">23</span>
</code></pre>
    </div>
  </div>
</div>

<h3 id="the-nth-prime">The n<sup>th</sup> Prime</h3>
<p>Now we bring it all together by writing the top-level function <code class="highlighter-rouge">nth_prime</code> that returns the <code class="highlighter-rouge">n</code><sup>th</sup> prime number.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">nth_prime</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns the n'th prime number.

    Parameters:
        n (int): The number of prime numbers to find.

    Return:
        int: The n'th prime.

    Preconditions:
        n &gt; 0
    """</span>
    <span class="n">next_prime_number</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="p">:</span>
        <span class="c1"># loop invariant: next_prime_number is the i'th prime
</span>        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">next_prime_number</span> <span class="o">=</span> <span class="n">next_prime</span><span class="p">(</span><span class="n">next_prime_number</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">next_prime_number</span>
</code></pre>
    </div>
  </div>
</div>
<p>In this example we introduce the idea of a <strong>loop invariant</strong>. A loop invariant is a property that, if it is true at the beginning of the body, then it is also true at the end of the loop body. So if the code in the body satisfies this property and it is also true initially (i.e. when we enter the while loop) then it must be true when we exit the loop. A loop invariant can be useful in helping decide on how variables should be initialised, how the variable should change in the body, and when to exit the loop. It is also helps document what the loop does. So think of the loop invariant and then write the code!</p>

<p>In our example the loop invariant is true initially (because 2 is the first prime). Assuming it is true at the start of the loop, then the code advances <code class="highlighter-rouge">next_prime_number</code> to the next prime and increments <code class="highlighter-rouge">i</code> and so the loop invariant is true again at the end of the loop. Therefore, it is also true when we terminate. In which case, not only is the invariant true but also <code class="highlighter-rouge">i == n</code> and so <code class="highlighter-rouge">next_prime_number</code> is indeed the <code class="highlighter-rouge">n</code><sup>th</sup> prime.</p>

<p>By the way, <code class="highlighter-rouge">i += 1</code> is a shorthand for <code class="highlighter-rouge">i = i + 1</code>.
The file <code class="highlighter-rouge">prime.py</code> contains all the code above plus a top-level comment (using the triple quotes style). In fact, what we have just done is write our own module! In the interpreter try <code class="highlighter-rouge">import prime</code> and <code class="highlighter-rouge">help(prime)</code>, and see how all the trouble we went to writing comments pays off!</p>

<blockquote class="blockquote">
  <p> King Arthur:  ‘What does it say?’</p>
  <p> Maynard:  ‘It reads, ‘Here may be found the last words of Joseph of </p>
  <p> Arimathea. He who is valiant and pure of spirit may find the Holy Grail </p>
  <p> in the Castle of aaarrrrggh’.’</p>
  <p> King Arthur:  ‘What?’</p>
  <p> Maynard:  ‘…The Castle of aaarrrrggh.’</p>
  <p> Bedevere: ‘What is that?’</p>
  <p> Maynard:  ‘He must have died while carving it.’</p>
</blockquote>

<h1 id="programming-style">Programming Style</h1>
<p>Code should be written in a style that makes it easier to comprehend. How you structure and layout your code is called programming style and it is a seemingly trivial but important part of ensuring your code is easy to read. (This is called making the code ‘readable’.) In this course we will following the <a href="https://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a> when writing code. Please ensure that you read and follow these rules. In the style guide the first section, Python Language Rules, relates to how to use particular language features. The second section, Python Style Rules, relates to how to structure your code. The style rules are most immediately applicable to the code you write in the early stages of this course. Some of the language rules will become more applicable later in the course.</p>

<h2 id="commenting">Commenting</h2>

<h3 id="writing-comments">Writing Comments</h3>
<p>Documentation is a software engineering concept that provides the “explanation” of the code. Comments should describe what the code is supposed to do, how to use it properly, and anything else that would be useful to know. A comment is a piece of syntax in a programming language which lets us describe the program code. We can add comments without affecting what our code actually does. Programming languages do this to give us a way of easily documenting our code.</p>

<p>Documenting code is very important — it aids communication between developers and is a great help when it comes to maintenance! Just as an agreed upon layout style is critical, the same holds for commenting style. In Python there are two types of comments, each serving a different purpose.</p>

<p>The first style of comment uses the <code class="highlighter-rouge">#</code> character followed by the comment until the end of the line. These comments are useful for describing complicated lines of code, or as a reminder for what a particular line of code is used for. These lines are ignored by the Python interpreter and are mainly notes to the writer of the code.</p>

<p>The second, more important style of comments, are called triple-quote comments or <em>docstrings</em>. These are written using triple quotes (three quote marks: <code class="highlighter-rouge">"""</code>). Docstrings are meant to explain what use a function serves, without going into the details of “how it does what it does”. In Python, docstrings, are composed of two important parts. The first is a brief explanation of what the function does. This is followed by a detailed explanation of how to use the function. This detailed explanation should include a description of the parameters; any preconditions, which are any requirements that need to be met before the function is called in order for the function to perform correctly; a description of what the function returns; and possibly some examples of usage.
We can think of these comments as a kind of contract between the writer and user of the function. The writer is promising that, if the user calls the function with arguments of the correct type that satisfy the precondition (if there is one), the function will behave as described in the comment. If the user calls the function with arguments of the wrong type, or that do not satisfy the precondition, the writer is not responsible for the function’s behaviour.</p>

<h2 id="function-docstrings">Function Docstrings</h2>
<p>Below is our <code class="highlighter-rouge">discuss</code> function updated with some helpful comments, which is in the <code class="highlighter-rouge">interaction.py</code> file.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">discuss</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Discuss a topic with the user and return their response.

    Ask if the user likes the topic and why.

    Parameters:
        topic (str): The topic under discussion.

    Return:
        str: Response to the question of why they like the topic.
    """</span>
    <span class="n">like</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Do you like "</span> <span class="o">+</span> <span class="n">topic</span> <span class="o">+</span> <span class="s">"? "</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Why do you think that? "</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>
</code></pre>
    </div>
  </div>
</div>

<p>In this course, we will use the following triple quote commenting style.</p>

<p>The opening triple quote should be the first line of the body, indented as part of the body. The first line should give a short summary of the function’s behaviour. If necessary, this line is followed by a blank line, and then by a more detailed explanation of the function’s behaviour. This is followed by a blank line followed by a description of each parameter. The parameter description should indicate the type the function expects for that parameter, the type is in parenthesis after the function name, and then should provide a description of what the function expects to be passed to that parameter. If the function does not have any parameters this section is omitted. Following the parameter description is another blank line and then a description of what the function returns. The return description should indicate the type of value being returned and then describe what is being returned. In this case, the <code class="highlighter-rouge">discuss</code> function has one parameter <code class="highlighter-rouge">topic</code> of type <code class="highlighter-rouge">str</code> (short for “string”) that is the topic used for the discussion in the function’s body. The function returns a <code class="highlighter-rouge">str</code> that is the response to the question of why the user likes the topic or not. We can also add a precondition to the comments. Preconditions state what must be done (be logically true) before the function is called. Often this is a constraint on the values of some parameters, over and above the type constraint. (i.e. The code calling the function must ensure that the value of the parameters meets the precondition constraints.) The precondition may also be something that needs to be done before the function is called (e.g. some other function must be called before this function is called). The prime numbers example below shows a function with preconditions. Examples of usage demonstrate what the caller can expect when the use the function. These examples serve two purposes. Firstly, they demonstrate what result will be returned with particular parameters. This is useful for functions with complex logic. Secondly, the example of usage provides test cases, as the function can be executed and the results checked against the results indicated in the example of usage. The examples of usage should be formatted to look like an interactive Python session in the interpreter. This allows the Python <a href="https://docs.python.org/3.6/library/doctest.html">doctest tool</a> to automatically test the function to ensure it produces the expected results. (<strong>Note</strong>: Initially do not worry about understanding how to use doctest or getting the examples of usage perfectly formatted. It is more important to get the idea of writing comments that help other programmers, than it is to worry about understanding automatic testing. Automated testing concepts will be explored in detail in later courses.) At the end is a line containing the terminating triple quotes.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns True iff 'num' is prime.

    Parameters:
        num (int): Integer value to be tested to see if it is prime.

    Return:
        bool: True if 'num' is prime. False otherwise.

    Preconditions:
        num &gt; 1

    Examples:
        &gt;&gt;&gt; is_prime(2)
        True
        &gt;&gt;&gt; is_prime(3)
        True
        &gt;&gt;&gt; is_prime(4)
        False
        &gt;&gt;&gt; is_prime(5)
        True
        &gt;&gt;&gt; is_prime(9)
        False
    """</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">#</code> style comments are completely ignored by the interpreter. On the other hand the triple quotes comments become part of the function. If you load <code class="highlighter-rouge">interaction.py</code> into the interpreter and then start typing a function call, you will see that the first line of the comment appears in the little pop-up window, as shown below.</p>

<p><img src="2B1_Commenting_1.png" alt="" /></p>

<p>Further, some python tools, like <code class="highlighter-rouge">pydoc</code>, extract this documentation to, for example, generate documentation. Also, below is an example using the <code class="highlighter-rouge">help</code> function which displays the docstring comments of the function.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="n">discuss</span><span class="p">)</span>
<span class="n">Help</span> <span class="n">on</span> <span class="n">function</span> <span class="n">discuss</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">__main__</span><span class="p">:</span>

<span class="n">discuss</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span>
    <span class="n">Discuss</span> <span class="n">a</span> <span class="n">topic</span> <span class="k">with</span> <span class="n">the</span> <span class="n">user</span> <span class="ow">and</span> <span class="k">return</span> <span class="n">their</span> <span class="n">response</span><span class="o">.</span>
    
    <span class="n">Ask</span> <span class="k">if</span> <span class="n">the</span> <span class="n">user</span> <span class="n">likes</span> <span class="n">the</span> <span class="n">topic</span> <span class="ow">and</span> <span class="n">why</span><span class="o">.</span>
    
    <span class="n">Parameters</span><span class="p">:</span>
        <span class="n">topic</span> <span class="p">(</span><span class="nb">str</span><span class="p">):</span> <span class="n">The</span> <span class="n">topic</span> <span class="n">under</span> <span class="n">discussion</span><span class="o">.</span>

    <span class="n">Return</span><span class="p">:</span>
        <span class="nb">str</span><span class="p">:</span> <span class="n">Response</span> <span class="n">to</span> <span class="n">the</span> <span class="n">question</span> <span class="n">of</span> <span class="n">why</span> <span class="n">they</span> <span class="n">like</span> <span class="n">the</span> <span class="n">topic</span><span class="o">.</span>

<span class="o">&gt;&gt;&gt;</span> 
</code></pre>
    </div>
  </div>
</div>

<h2 id="classes-and-methods-docstrings">Classes and Methods Docstrings</h2>
<p>Commenting classes and their methods is slightly different to commenting functions. The class itself requires a comment describing what the class does. Again not explaining how it does it. The methods are commented similarly to functions but with a slight difference to the type declaration. The other difference is that the <code class="highlighter-rouge">__init__</code> method of the class has a <strong>Constructor</strong> in place of the type declaration. 
Below is the Point class from the Class Design notes.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A 2D point ADT using Cartesian coordinates."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Construct a point object based on (x, y) coordinates.
        
        Parameters:
            x (float): x coordinate in a 2D cartesian grid.
            y (float): y coordinate in a 2D cartesian grid.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the x coordinate of the point."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>

    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the y coordinate of the point."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Move the point by (dx, dy).

        Parameters:
            dx (float): Amount to move in the x direction.
            dy (float): Amount to move in the y direction.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">+=</span> <span class="n">dy</span>
</code></pre>
    </div>
  </div>
</div>

<p>Note that the comment for the <code class="highlighter-rouge">__init__</code> method does not have a Return: comment. This is due to a class constructor not returning a value, it creates an object of the class type instead of returning a value.</p>

<p>Also notice that the <code class="highlighter-rouge">self</code> parameter is never described in the Parameters: comment. Every method that operates on an object must have a <code class="highlighter-rouge">self</code> parameter, and it refers to the object on which the method operates. Consequently its type and value are always known. When calling a method on an object you do not pass the object as a parameter, it is implicitly passed as part of the method call. The <code class="highlighter-rouge">move</code> method of <code class="highlighter-rouge">Point</code>, would be called like: <code class="highlighter-rouge">point_object.move(1.0, 2.5)</code>. In this case the <code class="highlighter-rouge">self</code> parameter refers to the <code class="highlighter-rouge">point_object</code>.</p>

<blockquote class="blockquote">
  <p> Useful stuff, string, no trouble there</p>
</blockquote>

<h1 id="data-structures">Data Structures</h1>
<h2 id="sequences">Sequences</h2>
<p>A sequence can be thought of as an ordered collection of data – i.e. it has a 0<sup>th</sup> element, a first element, a second element and so on.</p>

<p><strong>Note that Python, and many other programming languages, start counting from 0 rather than 1.</strong></p>

<p>A typical operation on any kind of a sequence is to be able to access the i<sup>th</sup> element. Another operation is to determine how many elements there are in the sequence. This also leads to the ability to walk through the sequence from start to end. This is known as <strong>iterating</strong> through the sequence. All sequence-based objects that have this capability are known as <strong>iterables</strong>. 
A string can be considered as a specialisation of a sequence as it represents a series of ordered characters. We will use strings as our first example of using ADTs.</p>

<h2 id="strings">Strings</h2>
<p>As we have seen before a string can be made using the quotation marks. Python interprets anything held within a pair of “” to be a string. This can be thought of as the <strong>constructor</strong> of a string.</p>

<p>Because strings are specialisations of sequences, then we expect to be able to get the ith character of a string and find out how long a string is. To be able to access the characters in a string it is possible to do what is called <strong>indexing</strong>. This is done using <code class="highlighter-rouge">[ ]</code> notation – this is the <strong>accessor</strong>. To be able to find the length of a string we have the <code class="highlighter-rouge">len</code> function.</p>

<p>Note that there are other operations we want to perform on strings that may not make sense for other specialisations of sequences.</p>

<p>Here are some examples of indexing and finding the of length strings in action:</p>
<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; s = "spam"
&gt;&gt;&gt; len(s)
4
&gt;&gt;&gt; s[0]
's'
&gt;&gt;&gt; s[3]
'm'
&gt;&gt;&gt; s[4]
Traceback (most recent call last):
  File "&lt;pyshell#32&gt;", line 1, in &lt;module&gt;
    s[4]
IndexError: string index out of range
&gt;&gt;&gt; s[-1]
'm'
&gt;&gt;&gt; s[-2]
'a'
&gt;&gt;&gt; i = 0
&gt;&gt;&gt; while i &lt; len(s) :
        print(s[i])
        i += 1

s
p
a
m
</code></pre>
    </div>
  </div>
</div>

<p>Note the <code class="highlighter-rouge">'string index out of range'</code> error in the fourth example – <strong>there is no fourth element as Python starts counting at 0</strong>. Also notice that negative numbers can be used in indexing. The use of negative numbers starts the indexing at the <strong>end</strong> of the string. So -1 refers to the last element in the string, -2 refers to the second last, and so on. In the last example we use a while loop to iterate over and print every character in the string. Remember <strong>i += 1</strong> is the same as 
<strong>i = i + 1</strong>.
In Python, there is no separate ‘character type’. Characters in Python are represented as strings of length 1. We will use the term ‘character’ to mean a string of length 1.
Strings are <strong>immutable sequences</strong> – i.e. it is not possible to change the data in a string. We will cover <strong>mutable</strong> and <strong>immutable</strong> objects and sequences in the following weeks’ notes.</p>

<div class="important">

  <h4 id="len-syntax">len Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sequence&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics">Semantics</h4>
  <p>Returns the length of (number of objects in) the sequence.</p>

</div>

<h2 id="for">For</h2>
<p>In the example above, a <code class="highlighter-rouge">while</code> loop was used to iterate over the characters of a string. Iterating over the elements of a sequence is such a common thing to do that Python has a special construct for this purpose – the <strong>for loop</strong>.
Instead of using the <code class="highlighter-rouge">while</code> loop as we did earlier we could use a for loop instead, as a string is an iterable object.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"spam"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">s</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">s</span>
<span class="n">p</span>
<span class="n">a</span>
<span class="n">m</span>
</code></pre>
    </div>
  </div>
</div>
<div class="important">

  <h4 id="syntax">Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;var&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;sequence&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>
  <p>where <em>var</em> is a variable and sequence is a sequence.</p>

  <h4 id="semantics-1">Semantics</h4>
  <p>Iterate over sequence assigning <em>var</em> in turn to each element of the sequence. For each element, execute <em>body</em>. The body typically contains occurrences of <em>var</em>. The body must follow the indentation rules of Python that we have seen before.</p>

</div>

<p>As a simple example of the use of a <code class="highlighter-rouge">for</code> loop we now write a function to determine if a given character is in a string. Here is the definition:</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">is_in</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return True iff 'char' is in 'string'.

    Parameters:
        char (string): The character being searched for.
        string (string): The string being searched.

    Return:
        bool: True if 'char' is in 'string'. False otherwise.
    """</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">string</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="n">char</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</code></pre>
    </div>
  </div>
</div>
<p>Here is an example of <code class="highlighter-rouge">is_in</code>:</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">spam</span> <span class="o">=</span> <span class="s">"spam"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">is_in</span><span class="p">(</span><span class="s">"s"</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">is_in</span><span class="p">(</span><span class="s">"d"</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
<span class="bp">False</span>
</code></pre>
    </div>
  </div>
</div>
<p>The <code class="highlighter-rouge">for</code> loop iterates over the characters in the string, comparing each in turn with the supplied character. If a match is found, <code class="highlighter-rouge">True</code> is returned. If we iterate through all the elements without finding a match, then the <code class="highlighter-rouge">for</code> loop terminates and the following command is executed – returning <code class="highlighter-rouge">False</code>.
Determining if a particular item is an element of a sequence is a common operation, and so Python has a built-in operator <code class="highlighter-rouge">in</code> that does the job for us – so we don’t need the previous function. Actually, for strings, <code class="highlighter-rouge">in</code> does more than the previous function as we can see in the following examples.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="s">'s'</span> <span class="ow">in</span> <span class="s">'spam'</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'x'</span> <span class="ow">in</span> <span class="s">'spam'</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'sp'</span> <span class="ow">in</span> <span class="s">'spam'</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'sa'</span> <span class="ow">in</span> <span class="s">'spam'</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'pa'</span> <span class="ow">in</span> <span class="s">'spam'</span>
<span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<p><strong>Note</strong> how the <code class="highlighter-rouge">in</code> keyword is used in for loops as well as boolean tests. It’s important to be aware of both uses of <code class="highlighter-rouge">in</code> and how to use it in both cases.</p>

<h2 id="slice-it-up">Slice It Up</h2>
<p>Earlier we saw how we can access the i<sub>th</sub> element using square brackets. We can do more! We can also use the square brackets to do <strong>slicing</strong> – i.e. extracting subsequences. Here are some examples.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">'spam'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="s">'p'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="s">'pa'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="s">'spa'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="s">'pam'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="s">'sp'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>
<span class="s">'pam'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[:]</span>
<span class="s">'spam'</span>
</code></pre>
    </div>
  </div>
</div>

<p>The idea is to supply two indices separated by a colon. So when we write <code class="highlighter-rouge">s[n:m]</code>, we mean the substring from the n<sub>th</sub> index <strong>up to, but not including</strong>, the m<sub>th</sub> index. If the first index is missing we get the slice starting at the beginning of the string or sequence. If the second index is missing we get the slice ending at the last element. In the last case we actually generate a <strong>copy</strong> of the original string.
We can also write <code class="highlighter-rouge">s[n:m:k]</code>. This means the substring from n to m in steps of k. Here are some examples.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span> <span class="o">=</span> <span class="s">'Lovely Spam'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="s">'oeySa'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">8</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="s">'Le '</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="s">'o'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="s">'olS'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[:</span><span class="mi">7</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="s">'Ll'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[</span><span class="mi">2</span><span class="p">::</span><span class="mi">3</span><span class="p">]</span>
<span class="s">'vyp'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[::</span><span class="mi">3</span><span class="p">]</span>
<span class="s">'Le a'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="s">'mp lv'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
<span class="s">'py'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sp</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="s">'mapS ylevoL'</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first four examples show starting from one index and ending at another using a step size. The next three examples show ways of starting at the beginning or ending at the end or both using a step size. The last three are examples of using negative step sizes.</p>

<div class="important">

  <h4 id="slicing-syntax">Slicing Syntax</h4>
  <p><em>sequence</em><strong>[n:m:k]</strong></p>
  <h4 id="semantics-2">Semantics</h4>
  <p>Returns the elements in the sequence from <code class="highlighter-rouge">n</code> up to but not including <code class="highlighter-rouge">m</code> in steps of size <code class="highlighter-rouge">k</code>. If <code class="highlighter-rouge">k</code> is not included then step size defaults to 1. To get a backwards segment of the sequence then <code class="highlighter-rouge">m &lt; n</code> and <code class="highlighter-rouge">k</code> must be negative.</p>

</div>

<p>To finish off this section we look at two programming problems involving lists. The first problem is, given a character and a string, find the index of the first occurrence of the character in the string.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return the first i such that string[i] == 'char'

    Parameters:
        char (string): The character being searched for.
        string (string): The string being searched.

    Return:
        int: Index position of 'char' in 'string', 
             or -1 if 'char' does not occur in 'string'.
    """</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="n">string</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre>
    </div>
  </div>
</div>

<p>We use a <code class="highlighter-rouge">while</code> loop to iterate over the elements of the string. Either we find an occurrence of the character — in which case we immediately return that index, or we get to the end of the string without finding the character and return -1.
Here are some tests of <code class="highlighter-rouge">find</code>.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"spam"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">find</span><span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">find</span><span class="p">(</span><span class="s">'s'</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">find</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="o">-</span><span class="mi">1</span>
</code></pre>
    </div>
  </div>
</div>

<h2 id="tuples">Tuples</h2>
<p>A tuple is a comma separated list of values. Tuples are useful for storing data that is required to not be modified. As tuples are immutable, <strong>they cannot be modified</strong>, they are useful for this type of operation.</p>

<p>Here are some examples using tuples.</p>
<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; type((2,3,4))
&lt;class 'tuple'&gt;
&gt;&gt;&gt; point = (2,3)
&gt;&gt;&gt; point
(2, 3)
&gt;&gt;&gt; x, y = point
&gt;&gt;&gt; print(x, y)
2 3
&gt;&gt;&gt; x, y = y, x
&gt;&gt;&gt; print(x, y)
3 2
</code></pre>
    </div>
  </div>
</div>

<p>The second example assigns a tuple to the variable <code class="highlighter-rouge">point</code>. This tuple represents an x, y coordinate, one of the more common uses of tuples. (Formally, we say that the name <code class="highlighter-rouge">point</code> refers to the tuple (2,3) in memory.) The third is an example of <strong>tuple unpacking</strong>, also called <strong>parallel assignment</strong> — it assigns <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> respectively the values of the first and second components of the tuple. The last example uses parallel assignment to swap the values of two variables.</p>

<p>Tuples can also be indexed and sliced in the same way as strings. Here is an example. The tuple in this example represents a person’s details. Using a tuple is an easy way of storing multiple values together to represent the information of a person.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">john</span> <span class="o">=</span> <span class="p">(</span><span class="s">"John"</span><span class="p">,</span> <span class="s">"Cleese"</span><span class="p">,</span> <span class="s">"Ministry of Silly Walks"</span><span class="p">,</span> <span class="mi">5555421</span><span class="p">,</span> <span class="s">"27/10"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">john</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="s">'Ministry of Silly Walks'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">john</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="s">'27/10'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">john</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
<span class="p">(</span><span class="s">'John'</span><span class="p">,</span> <span class="s">'Cleese'</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<h3 id="multiple-outputs">Multiple Outputs</h3>
<p>Tuples are also useful for using multiple values, for example in for loops and return statements. It is possible to rewrite the <code class="highlighter-rouge">find</code> function using a for loop and the <code class="highlighter-rouge">enumerate</code> function. Calling <code class="highlighter-rouge">enumerate</code> on a sequence will create a sequence of tuples containing a counter and the values in the sequence. By default, the counter starts at 0, so it can be used to generate tuples that contain a value of the sequence and the index of that value. The following is a couple of examples using <code class="highlighter-rouge">enumerate</code>.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"I like Spam"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="mi">0</span> <span class="n">I</span>
<span class="mi">1</span>  
<span class="mi">2</span> <span class="n">l</span>
<span class="mi">3</span> <span class="n">i</span>
<span class="mi">4</span> <span class="n">k</span>
<span class="mi">5</span> <span class="n">e</span>
<span class="mi">6</span>  
<span class="mi">7</span> <span class="n">S</span>
<span class="mi">8</span> <span class="n">p</span>
<span class="mi">9</span> <span class="n">a</span>
<span class="mi">10</span> <span class="n">m</span>
<span class="o">&gt;&gt;&gt;</span> 
<span class="o">&gt;&gt;&gt;</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'number:'</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">'character:'</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="n">number</span><span class="p">:</span> <span class="mi">3</span> <span class="n">character</span><span class="p">:</span> <span class="n">I</span>
<span class="n">number</span><span class="p">:</span> <span class="mi">4</span> <span class="n">character</span><span class="p">:</span>  
<span class="n">number</span><span class="p">:</span> <span class="mi">5</span> <span class="n">character</span><span class="p">:</span> <span class="n">l</span>
<span class="n">number</span><span class="p">:</span> <span class="mi">6</span> <span class="n">character</span><span class="p">:</span> <span class="n">i</span>
<span class="n">number</span><span class="p">:</span> <span class="mi">7</span> <span class="n">character</span><span class="p">:</span> <span class="n">k</span>
<span class="n">number</span><span class="p">:</span> <span class="mi">8</span> <span class="n">character</span><span class="p">:</span> <span class="n">e</span>
<span class="n">number</span><span class="p">:</span> <span class="mi">9</span> <span class="n">character</span><span class="p">:</span>  
<span class="n">number</span><span class="p">:</span> <span class="mi">10</span> <span class="n">character</span><span class="p">:</span> <span class="n">S</span>
<span class="n">number</span><span class="p">:</span> <span class="mi">11</span> <span class="n">character</span><span class="p">:</span> <span class="n">p</span>
<span class="n">number</span><span class="p">:</span> <span class="mi">12</span> <span class="n">character</span><span class="p">:</span> <span class="n">a</span>
<span class="n">number</span><span class="p">:</span> <span class="mi">13</span> <span class="n">character</span><span class="p">:</span> <span class="n">m</span>
</code></pre>
    </div>
  </div>
</div>

<p>Notice that the for loop uses tuple unpacking, by assigning the items of the tuple to the variables <code class="highlighter-rouge">i</code> and <code class="highlighter-rouge">c</code>. The first example simply prints out the index and character as a tuple pair. The second gives a second argument to <code class="highlighter-rouge">enumerate</code>, which is the starting value for the counter.</p>

<div class="important">

  <h4 id="enumerate-syntax"><code class="highlighter-rouge">enumerate</code> Syntax</h4>
  <p>Either of these forms can be used:</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sequence&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sequence&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics-3">Semantics</h4>
  <p>Generates a sequence of <code class="highlighter-rouge">(count, value)</code> tuples, with an increasing count and the values of the sequence. The count starts at <code class="highlighter-rouge">start</code>, or at 0 if <code class="highlighter-rouge">start</code> is not given. More precisely, the following sequence is generated:</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; 
                     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seq&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>If the counter starts from 0, then the count is the same as the index of the value in the sequence. This is the most common use of <code class="highlighter-rouge">enumerate</code>.</p>
</div>

<p>Now we can rewrite <code class="highlighter-rouge">find</code> as below:</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return the first i such that string[i] == char

    Parameters:
        char (string): The character being searched for.
        string (string): The string being searched.

    Return:
        int: Index position of 'char' in 'string', 
             or -1 if 'char' does not occur in 'string'.
    """</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="n">char</span> <span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function now goes through each character in the string using a for loop with enumerate. The body of the for loop is to check if the current character, <code class="highlighter-rouge">c</code>, is the same as <code class="highlighter-rouge">char</code>. If it is then the current index <code class="highlighter-rouge">i</code> is returned. Otherwise the for loop moves onto the next character in the string. If the for loop ends then -1 is returned.
Performing test cases on <code class="highlighter-rouge">find.py</code> we can see that it has the same functionality as before.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"spam"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">find</span><span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">find</span><span class="p">(</span><span class="s">'s'</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">find</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="o">-</span><span class="mi">1</span>
</code></pre>
    </div>
  </div>
</div>

<h3 id="returning-a-tuple">Returning a Tuple</h3>
<p>Now we are going to write our own function that returns multiple outputs. Our function is going to take a character and a string and split the string in two, at the first occurrence of the character. In this case we want to write a function that will return three strings - the string up to (but not including) the character; the character; and the string after the character.</p>

<p>Our programming problem can be solved by using <code class="highlighter-rouge">find</code> in combination with slicing.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">partition</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return 'string' split at 'char'.

    The returned result is a tuple consisting of three strings that
    partition 'string' at 'char' - i.e. the substring before the first occurrence
    of 'char', 'char', and the substring after the first occurrence of 'char'.
    If 'char' does not occur in 'string' then the first component returned
    is the entire 'string' and the last two components are empty strings.

    Parameters:
        char (string): The character used to partition string.
        string (string): The string being partitioned.

    Return:
        tuple&lt;tr, str, str&gt;: sub-string before char, char, sub-string after char;
                             or 'string', "", "".
    """</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">find</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">string</span><span class="p">,</span> <span class="s">''</span><span class="p">,</span> <span class="s">''</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">string</span><span class="p">[:</span><span class="n">index</span><span class="p">],</span> <span class="n">char</span><span class="p">,</span> <span class="n">string</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
</code></pre>
    </div>
  </div>
</div>

<p>Here are some tests of <code class="highlighter-rouge">partition</code>.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">spam</span> <span class="o">=</span> <span class="s">'spam'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">partition</span><span class="p">(</span><span class="s">'s'</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
<span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="s">'s'</span><span class="p">,</span> <span class="s">'pam'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">partition</span><span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
<span class="p">(</span><span class="s">'s'</span><span class="p">,</span> <span class="s">'p'</span><span class="p">,</span> <span class="s">'am'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">partition</span><span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
<span class="p">(</span><span class="s">'spa'</span><span class="p">,</span> <span class="s">'m'</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">partition</span><span class="p">(</span><span class="s">'x'</span><span class="p">,</span> <span class="n">spam</span><span class="p">)</span>
<span class="p">(</span><span class="s">'spam'</span><span class="p">,</span> <span class="s">''</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>In next week’s notes we will see that the <code class="highlighter-rouge">find</code> and <code class="highlighter-rouge">partition</code> functions, like the <code class="highlighter-rouge">is_in</code> function are already part of Python as part of the string ADT interface.</p>

<blockquote class="blockquote">
  <p> I’m afraid I’m not personally qualified to confuse cats, </p>
  <p> but I can recommend an extremely good service.</p>
</blockquote>

<h1 id="mutable-and-immutable">Mutable and Immutable</h1>

<p>As we are about to see <strong>lists</strong>, are our first example of a mutable sequence and object, now is a good time to discuss <strong>mutability</strong>. Mutability is the description of whether an object’s data can be modified.</p>

<p>A <strong>mutable</strong> object is an object whose data is <strong>modifiable</strong>. The data can be modified either through the methods of the object or through direct access to the data itself. An <strong>immutable</strong> object is an object where the data <strong>cannot</strong> be modified in anyway. Strings are examples of immutable objects. It is not possible to modify the data of a string. We are about to meet our first mutable objects: <strong>lists</strong>.</p>

<h3 id="lists">Lists</h3>

<p>Lists are <strong>mutable</strong> sequences. We can access elements at a particular index as we did with strings and use slicing, but we can also modify a list by changing elements or by adding and removing elements.</p>

<p>Here are some examples of lists in action:</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; a = [1,2,3,4]
&gt;&gt;&gt; type(a)
&lt;class 'list'&gt;
&gt;&gt;&gt; a[0]
1
&gt;&gt;&gt; a[-1]
4
&gt;&gt;&gt; a[1:3]
[2, 3]
&gt;&gt;&gt; a[::2]
[1, 3]
&gt;&gt;&gt; a[0] = 5
&gt;&gt;&gt; a
[5, 2, 3, 4]
&gt;&gt;&gt; a.append(7)
&gt;&gt;&gt; a
[5, 2, 3, 4, 7]
&gt;&gt;&gt; a.pop(3)
4
&gt;&gt;&gt; a
[5, 2, 3, 7]
&gt;&gt;&gt; a.insert(1,9)
&gt;&gt;&gt; a
[5, 9, 2, 3, 7]
&gt;&gt;&gt; a.sort()
&gt;&gt;&gt; a
[2, 3, 5, 7, 9]
&gt;&gt;&gt;
</code></pre>
    </div>
  </div>
</div>

<p>The first example shows the syntax for lists and the type, the next four examples look up information in the list using indexing and slicing. In the next example, we see indexing used on the left hand side of an assignment statement. The semantics is that the value stored at the supplied index is updated with the value on the right hand side of the assignment. The last four examples use methods of the list class to perform more operations on the list.</p>

<p>The first of these is the <code class="highlighter-rouge">append</code> method. The append method adds the item that is the argument to the end of the list. This is followed by the <code class="highlighter-rouge">pop</code> method. Pop removes the item at the given index from the list and returns that item. Another way to add items to the list is the <code class="highlighter-rouge">insert</code> method. Insert takes an index and an item as arguments and inserts the item at the given index, pushing the other items down the list. The last example shows how we can <code class="highlighter-rouge">sort</code> the elements — arrange them in order.</p>

<p>Notice how all the methods and operations performed on the list modify the list stored in the variable being used and most do not return anything. Compare this to strings, where all methods and operations return a new item and do not change the original string in the variable.</p>

<p>Python also includes a function for converting any sequence into a list of the objects in that sequence.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="s">"spam"</span><span class="p">)</span>
<span class="p">[</span><span class="s">'s'</span><span class="p">,</span> <span class="s">'p'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="s">'m'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">42</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span>
</code></pre>
    </div>
  </div>
</div>

<p>Because lists are sequences we can iterate over a list using a <code class="highlighter-rouge">for</code> loop.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="mi">0</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
</code></pre>
    </div>
  </div>
</div>

<p>A for loop is not much good if we do not do anything with the items. Here is an example of taking a list of numbers and generating a new list with all the numbers from the original list squared.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span> <span class="p">:</span>
	<span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span>
<span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">196</span><span class="p">,</span> <span class="mi">324</span><span class="p">]</span>
</code></pre>
    </div>
  </div>
</div>

<h3 id="range">Range</h3>
<p>Because iterating over sequences of numbers is very common, Python comes with a function for generating a sequence of numbers. This function is called <code class="highlighter-rouge">range</code>. <code class="highlighter-rouge">range</code> generates a special object that is iterable, meaning we can loop over the elements in the range using the <code class="highlighter-rouge">for</code> loop.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span>

<span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> 
</code></pre>
    </div>
  </div>
</div>

<p>In short, <code class="highlighter-rouge">range</code> creates an object that can be looped through that contains a sequence of numbers from a start number up to but not including a given end number. The end number is required and is excluded from the sequence as usually we use range to generate indices. The default start number is zero; this is also for generating indices as indexing starts at zero. The step size can also be changed, enabling us to skip numbers instead of going one number at a time. This can be seen in the following examples. Note, to simplify these examples the <code class="highlighter-rouge">list</code> function has been used.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span> <span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre>
    </div>
  </div>
</div>

<div class="important">

  <h4 id="range-syntax"><code class="highlighter-rouge">range</code> Syntax</h4>
  <p><code class="highlighter-rouge">range(start, end, step_size) </code></p>

  <p>start is optional and defaults to 0, <em>step_size</em> is optional and defaults to 1</p>

  <h4 id="semantics">Semantics</h4>
  <p>Generates an iterable sequence of numbers. If only <code class="highlighter-rouge">end</code> is given, then the sequence will start at 0 go up to but not including <code class="highlighter-rouge">end</code>. If <code class="highlighter-rouge">start</code> and <code class="highlighter-rouge">end</code> are given, then the sequence will start at <code class="highlighter-rouge">start</code> and go up to but not including <code class="highlighter-rouge">end</code>. If all three options are given then the sequence will start at <code class="highlighter-rouge">start</code> and go up to but not including <code class="highlighter-rouge">end</code> with a given <code class="highlighter-rouge">step_size</code>.</p>
</div>

<h3 id="pass-by-reference">Pass by Reference</h3>
<p>The following example is of a function that takes a list and a number and adds all numbers from 0 up to but not including that number to the list.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">add_to</span><span class="p">(</span><span class="n">existing_list</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Adds numbers 0 to 'num' to the end of 'list'
    Parameters:
        existing_list (list): The list to which numbers will be added.
        num (int): The number up to which will be added to 'existing_list'.
    Examples:
        &gt;&gt;&gt; a_list = []
        &gt;&gt;&gt; add_to(a_list, 4)
        &gt;&gt;&gt; a_list
        [0, 1, 2, 3]
    """</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">existing_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>After saving the file as add_to.py and running here is a test.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">add_to</span><span class="p">(</span><span class="n">a_list</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a_list</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre>
    </div>
  </div>
</div>

<p>Notice how even though the function does not return anything the list is modified simply by passing it to the function. We say that objects in Python are <strong>passed by reference</strong>, which means that objects passed into functions are passed directly. Consequently, a mutable object, which is changed inside a function body, will still be changed after the function call. In contrast, some programming languages use a <strong>pass by value</strong> strategy, where a copy of the object is passed into functions, so any modifications will not affect the original object. 
The <code class="highlighter-rouge">add_to</code> function is what is often called a <strong>procedure</strong>, rather than a function, because it does not return a value. In Python, functions or procedures always return a value, even if there is no <code class="highlighter-rouge">return</code> statement. Procedures, like this example, return <code class="highlighter-rouge">None</code> if there is no return line. <code class="highlighter-rouge">None</code> is an instance of a special type in Python called <code class="highlighter-rouge">NoneType</code> which has only one value, <code class="highlighter-rouge">None</code>.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; type(None)
&lt;class 'NoneType'&gt;
&gt;&gt;&gt; a = None
&gt;&gt;&gt; a
&gt;&gt;&gt; 
&gt;&gt;&gt; help(None)
Help on NoneType object:

class NoneType(object)
 |  Methods defined here:
 |  
 |  __bool__(self, /)
 |      self != 0
 |  
 |  __new__(*args, **kwargs) from builtins.type
 |      Create and return a new object.  See help(type) for accurate signature.
 |  
 |  __repr__(self, /)
 |      Return repr(self).
</code></pre>
    </div>
  </div>
</div>

<p><code class="highlighter-rouge">None</code> is treated specially by the interpreter. The second example shows that anything that evaluates to <code class="highlighter-rouge">None</code> is not printed to the interpreter.</p>

<div class="important">

  <h4 id="pass-by-reference">Pass by Reference</h4>
  <p>If a list is passed into a function, <strong>any changes</strong> made to that list inside the function will affect the list <strong>outside</strong> of the function, because lists are mutable.</p>

</div>

<blockquote class="blockquote">
  <p> Word association football</p>
</blockquote>

<h1 id="dictionaries">Dictionaries</h1>
<p>A dictionary is similar to a sequence, as it can be indexed. The difference is that, instead of being indexed by 0, 1, 2, etc.; it is indexed by keys. (Dictionaries cannot be sliced.) A dictionary is really <strong>a mapping from keys to values</strong>. Dictionary <strong>keys</strong> can be any <strong>immutable type</strong> — for example strings or numbers, while <strong>values</strong> can be of <strong>any type</strong>. Dictionaries are used for storing and retrieving information based on a key. For this reason, there can be no duplicates in the keys, but there can be duplicates in the values.</p>

<p>Here are some examples of dictionaries in action using a phone book as an example.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; phone = {'Eric' : 7724, 'John' : 9224, 'Graham' : 8462}
&gt;&gt;&gt; phone
{'John': 9224, 'Graham': 8462, 'Eric': 7724}
&gt;&gt;&gt; type(phone)
&lt;class 'dict'&gt;
&gt;&gt;&gt; phone['John']
9224
&gt;&gt;&gt; phone['Terry']

Traceback (most recent call last):
  File "&lt;pyshell#4&gt;", line 1, in &lt;module&gt;
    phone['Terry']
KeyError: 'Terry'
&gt;&gt;&gt; phone['Terry'] = 6352
&gt;&gt;&gt; phone['Terry']
6352
&gt;&gt;&gt; phone
{'John': 9224, 'Graham': 8462, 'Eric': 7724, 'Terry': 6352}
</code></pre>
    </div>
  </div>
</div>

<p>The first example shows one way of constructing a dictionary — an open brace (curly bracket) followed by a sequence of <code class="highlighter-rouge">key : value</code> pairs followed by a closed brace. Notice how when the dictionary is printed, it is not in the same order that it was created in. This is due to the way dictionaries are stored in memory. They are not necessarily stored in any particular order. The third example shows accessing the dictionary using the square bracket notation. The next example shows that, using the square bracket notation, if a key is not in the dictionary it will raise an error. However, if a key is not in the dictionary it can be added (or if the key is in the dictionary then its value is updated) using the square bracket notation as shown in the last example.</p>

<p>The next couple of examples show other methods of creating a dictionary.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">phone</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Eric</span><span class="o">=</span><span class="mi">7724</span><span class="p">,</span> <span class="n">John</span><span class="o">=</span><span class="mi">9224</span><span class="p">,</span> <span class="n">Graham</span><span class="o">=</span><span class="mi">8462</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phone</span>
<span class="p">{</span><span class="s">'John'</span><span class="p">:</span> <span class="mi">9224</span><span class="p">,</span> <span class="s">'Graham'</span><span class="p">:</span> <span class="mi">8462</span><span class="p">,</span> <span class="s">'Eric'</span><span class="p">:</span> <span class="mi">7724</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phone</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="s">'Eric'</span><span class="p">,</span> <span class="mi">7724</span><span class="p">),</span> <span class="p">(</span><span class="s">'John'</span><span class="p">,</span> <span class="mi">9224</span><span class="p">),</span> <span class="p">(</span><span class="s">'Graham'</span><span class="p">,</span> <span class="mi">8462</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phone</span>
<span class="p">{</span><span class="s">'John'</span><span class="p">:</span> <span class="mi">9224</span><span class="p">,</span> <span class="s">'Graham'</span><span class="p">:</span> <span class="mi">8462</span><span class="p">,</span> <span class="s">'Eric'</span><span class="p">:</span> <span class="mi">7724</span><span class="p">}</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first example shows that a dictionary can be created using the <code class="highlighter-rouge">dict</code> function with a sequence of <code class="highlighter-rouge">key=value</code> pairs as arguments. The second example shows that the <code class="highlighter-rouge">dict</code> function can also be used with a single sequence of <code class="highlighter-rouge">(key, value)</code> pairs as an argument.</p>

<p>The next few examples show a few methods of dictionaries as well as a few examples of for loops on dictionaries.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">phone</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">phone</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

<span class="n">John</span> <span class="mi">9224</span>
<span class="n">Graham</span> <span class="mi">8462</span>
<span class="n">Eric</span> <span class="mi">7724</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phone</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">dict_keys</span><span class="p">([</span><span class="s">'Graham'</span><span class="p">,</span> <span class="s">'John'</span><span class="p">,</span> <span class="s">'Eric'</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">phone</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="n">dict_items</span><span class="p">([(</span><span class="s">'Graham'</span><span class="p">,</span> <span class="mi">8462</span><span class="p">),</span> <span class="p">(</span><span class="s">'John'</span><span class="p">,</span> <span class="mi">9224</span><span class="p">),</span> <span class="p">(</span><span class="s">'Eric'</span><span class="p">,</span> <span class="mi">7724</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">phone</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="p">(</span><span class="s">'Graham'</span><span class="p">,</span> <span class="mi">8462</span><span class="p">)</span>
<span class="p">(</span><span class="s">'John'</span><span class="p">,</span> <span class="mi">9224</span><span class="p">)</span>
<span class="p">(</span><span class="s">'Eric'</span><span class="p">,</span> <span class="mi">7724</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first example shows using a for loop directly on a dictionary. The loop variable <code class="highlighter-rouge">key</code> becomes each key in the dictionary in turn. This prints out all the <code class="highlighter-rouge">key, value</code> pairs of the dictionary. This is the most common method of looping through dictionaries. The next two examples show the <code class="highlighter-rouge">keys</code> and <code class="highlighter-rouge">items</code> dictionary methods. These two methods return a special class (similar to that of range), but as can be seen they contain a sequence of all the keys or all the <code class="highlighter-rouge">key, value</code> pairs that are known as items. These methods (and a similar <code class="highlighter-rouge">values</code> are included to provide an efficient way of getting the keys, values, or both and looping through them, as shown in the last example. They are rarely used in any other way.</p>

<h3 id="using-dictionaries">Using Dictionaries</h3>
<p>Let’s start with a simple example of a function that takes a filename and creates a dictionary where the keys are the line numbers and the values are the corresponding lines. Below is the function definition.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">get_lines</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return a dictionary containing each line in the file as values
    and the corresponding line number as keys.

    Parameters:
        filename (str): Name, including path, of the file to be opened.

    Return:
        dict: Dictionary containing the contents of the file.

    Preconditions:
        'filename' is the name of a file that can be opened for reading.
    """</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">lines</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">lines</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first line creates an empty dictionary, <code class="highlighter-rouge">lines</code>, for us to store our lines in. We then open the <code class="highlighter-rouge">filename</code> in universal read mode. Using a for loop, along with the enumerate function seen before, the index and line is easily obtained. We then use the square bracket notation to added the stripped line as the value to the dictionary, with the index (being the line number) as the key. The line was stripped using the strip method of strings, as this is more useful if we were to do anything more with this dictionary. The dictionary is then returned.</p>

<p>Having saved this code as <code class="highlighter-rouge">get_lines.py</code>, it can be tested. The following is a test using the <code class="highlighter-rouge">text.txt</code> file use previously.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">lines</span> <span class="o">=</span> <span class="n">get_lines</span><span class="p">(</span><span class="s">'text.txt'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lines</span>
<span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s">'Python is fun,'</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s">'it lets me play with files.'</span><span class="p">,</span>
<span class="mi">2</span><span class="p">:</span> <span class="s">'I like playing with files,'</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s">'I can do some really fun stuff.'</span><span class="p">,</span>
<span class="mi">4</span><span class="p">:</span> <span class="s">''</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="s">'I like Python!'</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lines</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="s">'I like Python!'</span>
</code></pre>
    </div>
  </div>
</div>

<p>Let’s now look at a slightly more complex example. This example will look at determining the frequency count of characters in a file. We will need to open the file for reading, read the contents of the file and count how many times each character appears. Dictionaries are ideal for this — we can use the characters as the keys and the character counts as the associated values. We will need to make use of the dictionary method <code class="highlighter-rouge">get</code>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">)</span>
<span class="n">Help</span> <span class="n">on</span> <span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="n">get</span><span class="p">:</span>

<span class="n">get</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">D</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">[,</span><span class="n">d</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">D</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">D</span><span class="p">,</span> <span class="k">else</span> <span class="n">d</span><span class="o">.</span>  <span class="n">d</span> <span class="n">defaults</span> <span class="n">to</span> <span class="bp">None</span><span class="o">.</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">"one"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"three"</span> <span class="p">:</span> <span class="mi">3</span> <span class="p">,</span><span class="s">"many"</span> <span class="p">:</span> <span class="mi">99999999999</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="s">"one"</span><span class="p">]</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"one"</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="s">"two"</span><span class="p">]</span>

<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;pyshell#4&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">d</span><span class="p">[</span><span class="s">"two"</span><span class="p">]</span>
<span class="nb">KeyError</span><span class="p">:</span> <span class="s">'two'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"two"</span><span class="p">))</span>
<span class="bp">None</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">"two"</span><span class="p">,</span> <span class="s">"that number does not exist"</span><span class="p">)</span>
<span class="s">'that number does not exist'</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">get</code> method is similar to the square bracket notation that we have used to look up values associated with a key. The biggest difference is that <code class="highlighter-rouge">get</code> does not raise an error if the key is not in the dictionary as the square bracket notation does.</p>

<div class="important">

  <h4 id="get-syntax"><code class="highlighter-rouge">get</code> Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="n"&gt;dictionary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;dictionary&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics">Semantics</h4>
  <p><code class="highlighter-rouge">get</code> takes in a key as an argument and either returns the value in <code class="highlighter-rouge">dictionary</code> associated with that <code class="highlighter-rouge">key</code> or, if that key is not in <code class="highlighter-rouge">dictionary</code>, then <code class="highlighter-rouge">get</code> returns <code class="highlighter-rouge">d</code>. <code class="highlighter-rouge">d</code> is an optional argument of <code class="highlighter-rouge">get</code> and defaults to <code class="highlighter-rouge">None</code>.</p>
</div>

<p>Now we can have a look at our example. The following is the required function definition.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">freq_count</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return the frequency count of characters occuring in a file.

    Parameters:
        filename (str): Name, including path, of the file to be opened.

    Return:
        dict: Frequency of each character occuring in the file.

    Preconditions:
        'filename' is the name of a file that can be opened for reading.
    """</span>
    <span class="n">freq</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">file</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">line</span> <span class="p">:</span>
            <span class="n">freq</span><span class="p">[</span><span class="n">char</span><span class="p">]</span> <span class="o">=</span> <span class="n">freq</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">freq</span>
</code></pre>
    </div>
  </div>
</div>

<p>The function starts with creating an empty dictionary, <code class="highlighter-rouge">freq</code>. Then the function opens the file and iterates through the lines of the file with a for loop. Inside the for loop is another (nested) for loop to iterate through the line to get each character. Inside that for loop we start with the square bracket notation for adding a key, value pair to <code class="highlighter-rouge">freq</code> using the <code class="highlighter-rouge">char</code> as the key. We then use the <code class="highlighter-rouge">get</code> method to look up the same key but if <code class="highlighter-rouge">char</code> is not in <code class="highlighter-rouge">freq</code> then 0 is returned. The value returned by <code class="highlighter-rouge">get</code> is incremented by 1, thus incrementing the number of occurrences of <code class="highlighter-rouge">char</code>. <code class="highlighter-rouge">get</code> is used as it provides the perfect base for this problem. If the <code class="highlighter-rouge">char</code> is in <code class="highlighter-rouge">freq</code> then the value (the count) is returned and then has 1 added to it and then that new value is assigned to the key. If <code class="highlighter-rouge">char</code> is not in <code class="highlighter-rouge">freq</code> then <code class="highlighter-rouge">get</code> returns 0 which allows us to add 1 to it as this will be the first occurrence of <code class="highlighter-rouge">char</code> in the file.</p>

<p>After saving <code class="highlighter-rouge">freq.py</code>, it can be applied to a few files that we have used in previous sections.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">freq_count</span><span class="p">(</span><span class="s">"sgame.txt"</span><span class="p">)</span>
<span class="p">{</span><span class="s">' '</span><span class="p">:</span> <span class="mi">125</span><span class="p">,</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s">'1'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">'3'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'2'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'5'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'4'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'7'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'6'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> 
<span class="s">'9'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">'8'</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">freq_count</span><span class="p">(</span><span class="s">"text.txt"</span><span class="p">)</span>
<span class="p">{</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">'!'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">' '</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="s">','</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'.'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'I'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'P'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'a'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">'c'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="s">'e'</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s">'d'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'g'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'f'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">'i'</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s">'h'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">'k'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'m'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'l'</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s">'o'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> 
<span class="s">'n'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">'p'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'s'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">'r'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'u'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'t'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s">'w'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">freq_count</span><span class="p">(</span><span class="s">"words.txt"</span><span class="p">)</span>
<span class="p">{</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">:</span> <span class="mi">252</span><span class="p">,</span> <span class="s">'!'</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="s">' '</span><span class="p">:</span> <span class="mi">943</span><span class="p">,</span> <span class="s">"'"</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s">')'</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s">'('</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="s">'-'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s">','</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span> 
<span class="s">'.'</span><span class="p">:</span> <span class="mi">211</span><span class="p">,</span> <span class="s">'2'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'4'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'?'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">'A'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">'C'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s">'B'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">'E'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'D'</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> 
<span class="s">'G'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s">'F'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s">'I'</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s">'H'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">'K'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'J'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'M'</span><span class="p">:</span> <span class="mi">31</span><span class="p">,</span> <span class="s">'L'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">'O'</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> 
<span class="s">'N'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">'P'</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="s">'S'</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="s">'R'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">'U'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'T'</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s">'W'</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s">'V'</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s">'Y'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> 
<span class="s">'a'</span><span class="p">:</span> <span class="mi">203</span><span class="p">,</span> <span class="s">'`'</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">'c'</span><span class="p">:</span> <span class="mi">51</span><span class="p">,</span> <span class="s">'b'</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s">'e'</span><span class="p">:</span> <span class="mi">324</span><span class="p">,</span> <span class="s">'d'</span><span class="p">:</span> <span class="mi">114</span><span class="p">,</span> <span class="s">'g'</span><span class="p">:</span> <span class="mi">78</span><span class="p">,</span> <span class="s">'f'</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span> 
<span class="s">'i'</span><span class="p">:</span> <span class="mi">134</span><span class="p">,</span> <span class="s">'h'</span><span class="p">:</span> <span class="mi">203</span><span class="p">,</span> <span class="s">'k'</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="s">'j'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">'m'</span><span class="p">:</span> <span class="mi">38</span><span class="p">,</span> <span class="s">'l'</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="s">'o'</span><span class="p">:</span> <span class="mi">298</span><span class="p">,</span> <span class="s">'n'</span><span class="p">:</span> <span class="mi">179</span><span class="p">,</span> <span class="s">'q'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s">'p'</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span> <span class="s">'s'</span><span class="p">:</span> <span class="mi">155</span><span class="p">,</span> <span class="s">'r'</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span> <span class="s">'u'</span><span class="p">:</span> <span class="mi">98</span><span class="p">,</span> <span class="s">'t'</span><span class="p">:</span> <span class="mi">294</span><span class="p">,</span> <span class="s">'w'</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s">'v'</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="s">'y'</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span> <span class="s">'x'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">'z'</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</code></pre>
    </div>
  </div>
</div>

<p>Note that, instead of reading the file line-by-line, we could have read the entire file into a single string, using <code class="highlighter-rouge">read</code> and processed that character-by-character. However, for a very large file this approach would generate a very large (especially in memory) string.</p>

<h3 id="formatting-strings">Formatting Strings</h3>

<p>The dictionaries, especially when large, do not print out very nicely. Let’s write a function that takes a dictionary and displays it in an easy to read format (also called ‘pretty printing’). To be able to ‘pretty print’ we need to be able to print in a formatted way. We have seen simple examples of this already by simply printing one value after another separated by commas. Python has another approach using the <code class="highlighter-rouge">format</code> method of strings. <code class="highlighter-rouge">format</code> operates on a format string which has segments where substitutions are made. The items substituted into this format string are the arguments of the <code class="highlighter-rouge">format</code> method.
Following are a few examples using the <code class="highlighter-rouge">format</code> method.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="nb">format</span><span class="p">)</span>
<span class="n">Help</span> <span class="n">on</span> <span class="n">method_descriptor</span><span class="p">:</span>

<span class="nb">format</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">S</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">string</span>

    <span class="n">Return</span> <span class="n">a</span> <span class="n">formatted</span> <span class="n">version</span> <span class="n">of</span> <span class="n">S</span><span class="p">,</span> <span class="n">using</span> <span class="n">substitutions</span> <span class="k">from</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span>
    <span class="n">The</span> <span class="n">substitutions</span> <span class="n">are</span> <span class="n">identified</span> <span class="n">by</span> <span class="n">braces</span> <span class="p">(</span><span class="s">'{'</span> <span class="ow">and</span> <span class="s">'}'</span><span class="p">)</span><span class="o">.</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">22</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">42</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'a = {0}, b = {1}, c = {2}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="s">'a = 10, b = 22, c = 42'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'a = {0}, b = {1}, c = {2}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="s">'a = 22, b = 42, c = 10'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'a = {0}, b = {1}, c = b + 2 * a = {1} + 2 * {0} = {2}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
<span class="s">'a = 10, b = 22, c = b + 2 * a = 22 + 2 * 10 = 42'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="s">'hello'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'{0} world, {1}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="s">'hello world, 42'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'a = {0}, b = {1}, c = {2}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;pyshell#8&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="s">'a = {0}, b = {1}, c = {2}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="nb">IndexError</span><span class="p">:</span> <span class="nb">tuple</span> <span class="n">index</span> <span class="n">out</span> <span class="n">of</span> <span class="nb">range</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">'a = {0}, b = {1}, c = {2}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="s">'a = 10, b = 22, c = 42'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">our_format</span> <span class="o">=</span> <span class="s">'print {0} everywhere, {1}'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">our_format</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="s">'print 10 everywhere, hello'</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first example is of the <code class="highlighter-rouge">help</code> description of the <code class="highlighter-rouge">format</code> method. The next two examples use the <code class="highlighter-rouge">format</code> method to print three numbers out with descriptors as to what they are. Notice how the order of the arguments of <code class="highlighter-rouge">format</code> is associated with the numbers in the substitutions. The next example shows that substitutions can be made more than once into the format string. The next example shows that multiple types can be printed. The next example shows that if there are more substitutions to be made than there are arguments in <code class="highlighter-rouge">format</code> then an error is raised. However, the next example shows that if there are more arguments in <code class="highlighter-rouge">format</code> than substitution areas then there is no error, the extra values are ignored as the example shows that the format string can be assigned to a variable and used later to format print.</p>

<div class="important">

  <h4 id="format-syntax"><code class="highlighter-rouge">format</code> Syntax</h4>
  <p><code class="highlighter-rouge">string.format(sequence)</code></p>

  <h4 id="semantics-1">Semantics</h4>
  <p>Values from sequence are substituted into substitution place holders in string. These place holders are denoted by numbers starting from 0 inside braces (curly brackets). The index of the value in sequence is the corresponding number that the value is substituted. The string resulting from the substitutions is returned.</p>
</div>

<div class="aside">

  <h4 id="aside-more-formatting-options">Aside: More Formatting options</h4>
  <p>The <code class="highlighter-rouge">format</code> method, along with the format string, has many options to enable different forms of formatted printing. Following are examples of some of the possible formatting options.</p>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;60.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt; &lt;span class="mf"&gt;2.727272727272727&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s"&gt;"2 decimal places - {0:.2f}"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;60.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s"&gt;'2 decimal places - 2.73'&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s"&gt;"5 decimal places - {0:.5f}"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;60.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s"&gt;'5 decimal places - 2.72727'&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>It is possible to print to a certain number of decimal places by using a <code class="highlighter-rouge">:.nf</code> after the index number. <code class="highlighter-rouge">n</code> here is the number of decimal places that are to be used. The examples above show printing to 2 and 5 decimal places.</p>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s"&gt;"use indexing - {0[3]}, {0[1]}"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"hello"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s"&gt;'use indexing - l, e'&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>Indexing can be used on sequences inside the format string by indexing the substitution placeholder. The above example uses indexing twice during formatting.</p>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s"&gt;"give spacing - {0:10}, {1:7}"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"hi"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;"bye"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s"&gt;'give spacing - hi        , bye    '&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="s"&gt;"give spacing - {0:10}, {1:7}"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"longer"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;"bye"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="s"&gt;'give spacing - longer    , bye    '&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>Spacing can be made around the items that are to be printed by adding a <code class="highlighter-rouge">:n</code> after the substitution place holder. n here represents the number of places that are required. The item fills up the spacing to its length then blank spaces are added to fill the rest. Above is two examples of printing with spacing around a couple of strings.
These are just a few of the possible options available for format printing. More options and examples are available at the <a href="https://docs.python.org/3/library/string.html#formatstrings">Python docs page</a> for format strings.</p>
</div>

<p>Let’s return to our example. Below is the function definition for ‘pretty printing our dictionary.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">display_dictionary</span><span class="p">(</span><span class="n">dictionary</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Pretty print 'dictionary' in key sorted order.

    Parameters:
        dictionary dict: Dictionary to be pretty printed.
    """</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="n">dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'{0}  :  {1}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">k</span><span class="p">]))</span>
</code></pre>
    </div>
  </div>
</div>

<p>The function first gets the keys of the dictionary and sorts them. The <code class="highlighter-rouge">sorted</code> function returns a sorted list of the given sequence. Now, when the dictionary is printed, there is a nice order to the characters. Then it iterates through the keys list and prints them using <code class="highlighter-rouge">format</code>. The keys are printed using the <code class="highlighter-rouge">repr</code> function. This makes the strings print with the ‘ ‘ around them, if we had printed the strings directly we would have lost the quotes. <code class="highlighter-rouge">repr</code> returns the <strong>representation</strong> of the argument. This can be seen when the <code class="highlighter-rouge">disp_dict.py</code> file is saved and tested as below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">freq</span> <span class="o">=</span> <span class="n">freq_count</span><span class="p">(</span><span class="s">'sgame.txt'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">display_dictionary</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>
<span class="s">'</span><span class="se">\n</span><span class="s">'</span>  <span class="p">:</span>  <span class="mi">9</span>
<span class="s">' '</span>  <span class="p">:</span>  <span class="mi">125</span>
<span class="s">'1'</span>  <span class="p">:</span>  <span class="mi">5</span>
<span class="s">'2'</span>  <span class="p">:</span>  <span class="mi">3</span>
<span class="s">'3'</span>  <span class="p">:</span>  <span class="mi">3</span>
<span class="s">'4'</span>  <span class="p">:</span>  <span class="mi">3</span>
<span class="s">'5'</span>  <span class="p">:</span>  <span class="mi">3</span>
<span class="s">'6'</span>  <span class="p">:</span>  <span class="mi">3</span>
<span class="s">'7'</span>  <span class="p">:</span>  <span class="mi">2</span>
<span class="s">'8'</span>  <span class="p">:</span>  <span class="mi">2</span>
<span class="s">'9'</span>  <span class="p">:</span>  <span class="mi">4</span>
</code></pre>
    </div>
  </div>
</div>

<blockquote class="blockquote">
  <p> Now go away or I will taunt you a second time</p>
</blockquote>

<h1 id="histogram-example">Histogram Example</h1>

<p>Let’s look at an example that combines the use of dictionaries and exception handling. This example is about statistical analysis of data. Specifically, we want to read data from a file (one floating point number per line) and produce a histogram of the data. To do this we want to subdivide numbers into ‘buckets’ and count how many times data values fall in each bucket. For the program, we will ask the user for the name of the file containing the data to be processed, and the width of each bucket. For this example we will use the file <code class="highlighter-rouge">data1.txt</code>.</p>

<div class="aside">

  <h4 id="aside-constructing-randomised-data-sets">Aside: Constructing randomised data sets</h4>
  <p>This file was constructed as follows.</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;random&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'data1.txt'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'w'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;normalvariate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
</code></pre></div>    </div>

    <p><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;</p>
  </div>

  <p>The <code class="highlighter-rouge">random</code> module contains functions for producing pseudo-random numbers from different distributions. In this case, we use a normal distribution with mean 0 and standard deviation 10. We write 1000 generated random numbers into the file. Note we need to add a newline character otherwise all the numbers will be on a single line.</p>
</div>

<p>For this problem, we will produce a stand-alone program. The program consists of three parts: getting input from the user, computing the histogram, and writing out the results. Later we will write a GUI version of the same program.</p>

<p>We start with the main part — a function that takes a file name and a bucket size and returns a dictionary of bucket counts. The key for the dictionary will be the ‘bucket position’ — i.e. how many buckets away from 0 this bucket is. So, for example, if bucket size = 10, a value between 0 and 10 will be in bucket 0 and a value between -10 and 0 will be in bucket -1.</p>

<p>Here is the function definition.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">make_histogram</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bucketsize</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Compute the histogram of the data in 'filename' with given bucket size.

    An error message will be produced if either the file cannot be opened
    for reading or an invalid data value is found.

    Parameters:
        filename (str): Name of the file from which data is read.
        bucketsize (int): Size of the data bucket.
        
    Return:
        dict&lt;int, float&gt;: Histogram of occurrences of data in file.

    Preconditions:
        bucketsize &gt; 0
    """</span>
    <span class="k">try</span> <span class="p">:</span>
        <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">IOError</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Error: cannot open '</span> <span class="o">+</span> <span class="n">filename</span> <span class="o">+</span> <span class="s">' for reading'</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="n">hist</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">data_element</span> <span class="ow">in</span> <span class="nb">file</span> <span class="p">:</span>
        <span class="k">try</span> <span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data_element</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">ValueError</span> <span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'Error: cannot convert "'</span> <span class="o">+</span> <span class="n">data_element</span> <span class="o">+</span> <span class="s">'" to a float'</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="n">bucket</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">val</span><span class="o">-</span><span class="n">bucketsize</span><span class="p">)</span> <span class="o">/</span> <span class="n">bucketsize</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="n">bucket</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span> <span class="o">/</span> <span class="n">bucketsize</span><span class="p">)</span>
        <span class="n">hist</span><span class="p">[</span><span class="n">bucket</span><span class="p">]</span> <span class="o">=</span> <span class="n">hist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">bucket</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">hist</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first thing this function does is attempt to open the file. Unlike previous examples, we have surrounded this with a <code class="highlighter-rouge">try</code> statement. This allows us to catch the error raised if the file cannot be opened for reading. If an <code class="highlighter-rouge">IOError</code> is raised then we print a simple error message and return an empty dictionary. We then create an empty dictionary, <code class="highlighter-rouge">hist</code> to store our data in. We then go through every line in the file directly with a for loop. The first part of the body of the for loop is to attempt to convert the line to a float. This is also surrounded in a <code class="highlighter-rouge">try</code> statement to test if the line can be converted. If it cannot then the <code class="highlighter-rouge">ValueError</code> is caught and again a simple error message is printed and an empty dictionary is returned. We then check the sign of the number <code class="highlighter-rouge">val</code>. If it is negative, we use one formula for which bucket it would belong in; otherwise, we use a different formula. This is because we use rounding when we convert from a float to an integer, as Python always rounds down we need to treat the different signed numbers differently. The last part of the for loop is to increase the count of how many items are in that particular bucket. This is the same as used in the character frequency example above. Finally, we return <code class="highlighter-rouge">hist</code>.</p>

<p>Note the power of dictionaries here — we could have used lists to store the bucket counts BUT we need to know the range of data values first. This would have meant reading the file twice or loading all the data into another list. The processing would also have been more complicated as well.
Now we can save our program so far, <code class="highlighter-rouge">histogram1.py</code>, and test the function. We also create a file <code class="highlighter-rouge">data2.txt</code> and test the function using this file (it is a good idea to test small first).</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">make_histogram</span><span class="p">(</span><span class="s">'data2.txt'</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">make_histogram</span><span class="p">(</span><span class="s">'data1.txt'</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
<span class="mi">10</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">21</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">22</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">23</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">24</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">26</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">27</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">34</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> 
<span class="mi">35</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="mi">36</span><span class="p">,</span> <span class="o">-</span><span class="mi">32</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">28</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">26</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">25</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">24</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">23</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">22</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> 
<span class="o">-</span><span class="mi">21</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">19</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">18</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">17</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">14</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="o">-</span><span class="mi">13</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> 
<span class="o">-</span><span class="mi">12</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="o">-</span><span class="mi">11</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">:</span> <span class="mi">39</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">:</span> <span class="mi">32</span><span class="p">}</span>
</code></pre>
    </div>
  </div>
</div>

<p>The next step is to get user input. Given we want a positive number for the bucket size we write the following function that checks user input.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">get_bucketsize</span><span class="p">()</span> <span class="p">:</span>
    <span class="s">"""Return the bucket size asked from the user.

    Ensures that a valid bucket size is entered.

    Return:
        float: Number entered for the bucket size.
    """</span>
    <span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
        <span class="n">user_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Bucket size: "</span><span class="p">)</span>
        <span class="k">try</span> <span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">ValueError</span> <span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'Not a number'</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">break</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Number must be positive'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">size</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function starts with an infinite <code class="highlighter-rouge">while True</code> loop; this enables us to keep asking the user until correct input is given. Then the user is prompted for the bucket size. The function then attempts to convert the bucket size given by the user into a float. This is surrounded by a try statement to catch a <code class="highlighter-rouge">ValueError</code> in case the user does not input a number. If the user input is not a number then a message is printed and then on the next line is a <code class="highlighter-rouge">continue</code> statement. <code class="highlighter-rouge">continue</code> starts at the begining of the loop body. This effectively skips all the code after the <code class="highlighter-rouge">continue</code>, then since we are at the top of the loop again the function asks the user again for a bucket size. If the input is a number, then it is tested to see if it is positive. If it is positive we <code class="highlighter-rouge">break</code> out of the while loop and return the bucket size. If it is not then we print out a message and the loop starts again.
Saving this code into <code class="highlighter-rouge">histogram2.py</code> we can do a few tests.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">get_bucketsize</span><span class="p">()</span>
<span class="n">Bucket</span> <span class="n">size</span><span class="p">:</span> <span class="n">a</span>
<span class="n">Not</span> <span class="n">a</span> <span class="n">number</span>
<span class="n">Bucket</span> <span class="n">size</span><span class="p">:</span> <span class="o">-</span><span class="mi">10</span>
<span class="n">Number</span> <span class="n">must</span> <span class="n">be</span> <span class="n">positive</span>
<span class="n">Bucket</span> <span class="n">size</span><span class="p">:</span> <span class="mi">3</span>
<span class="mf">3.0</span>
</code></pre>
    </div>
  </div>
</div>

<div class="important">

  <h4 id="loop-with-continue">Loop with <code class="highlighter-rouge">continue</code></h4>

  <p>If <code class="highlighter-rouge">continue</code> is used inside the body of a loop, when the <code class="highlighter-rouge">continue</code> line is executed the loop moves on to the next iteration of the loop immediately. For <code class="highlighter-rouge">while</code> loops, this simply means starting the loop from the beginning, effectively ignoring the code after the <code class="highlighter-rouge">continue</code>. For a <code class="highlighter-rouge">for</code> loop it works like the <code class="highlighter-rouge">while</code> loop except that it moves onto the next item in the object being iterated through.</p>
</div>

<p>The last part is to pretty print the resulting histogram. The next function (similar to the frequency count one) does the job.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">pp_histogram</span><span class="p">(</span><span class="n">histogram</span><span class="p">,</span> <span class="n">bucketsize</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">""" Pretty prints the histogram using the size of the buckets."""</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="n">histogram</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'({0:7.2f}, {1:7.2f}) : {2:3}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span>
            <span class="n">key</span><span class="o">*</span><span class="n">bucketsize</span><span class="p">,</span> <span class="p">(</span><span class="n">key</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">bucketsize</span><span class="p">,</span> <span class="n">histogram</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function first gets the list of the keys from the dictionary, <code class="highlighter-rouge">histogram</code>, using the <code class="highlighter-rouge">keys</code> method of dictionaries. This enables us to perform the next line, which is to sort this keys dictionary so that it is in order from smallest to largest. We then iterate over this list and print out the histogram information. The first two substitutions of the format string use two methods of the extra format string options discussed in the notes about the dictionary data structure. These segments of the format string look like <code class="highlighter-rouge">:7.2f</code>. The 7 means to have spacing of 7 characters. The .2f means to print as floats to 2 decimal places. The last substitution area contains the index number with a spacing of 3 characters. As the item to be printed here is just an integer it needs no float formatting.</p>

<p>Here is the result of saving our <code class="highlighter-rouge">histogram3.py</code> code and applying this function to the histogram for <code class="highlighter-rouge">data1.txt</code>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">pp_histogram</span><span class="p">(</span><span class="n">make_histogram</span><span class="p">(</span><span class="s">'data1.txt'</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span> <span class="mf">5.0</span><span class="p">)</span>
<span class="p">(</span> <span class="o">-</span><span class="mf">35.00</span><span class="p">,</span>  <span class="o">-</span><span class="mf">30.00</span><span class="p">)</span> <span class="p">:</span>   <span class="mi">1</span>
<span class="p">(</span> <span class="o">-</span><span class="mf">30.00</span><span class="p">,</span>  <span class="o">-</span><span class="mf">25.00</span><span class="p">)</span> <span class="p">:</span>   <span class="mi">4</span>
<span class="p">(</span> <span class="o">-</span><span class="mf">25.00</span><span class="p">,</span>  <span class="o">-</span><span class="mf">20.00</span><span class="p">)</span> <span class="p">:</span>  <span class="mi">23</span>
<span class="p">(</span> <span class="o">-</span><span class="mf">20.00</span><span class="p">,</span>  <span class="o">-</span><span class="mf">15.00</span><span class="p">)</span> <span class="p">:</span>  <span class="mi">42</span>
<span class="p">(</span> <span class="o">-</span><span class="mf">15.00</span><span class="p">,</span>  <span class="o">-</span><span class="mf">10.00</span><span class="p">)</span> <span class="p">:</span> <span class="mi">102</span>
<span class="p">(</span> <span class="o">-</span><span class="mf">10.00</span><span class="p">,</span>   <span class="o">-</span><span class="mf">5.00</span><span class="p">)</span> <span class="p">:</span> <span class="mi">155</span>
<span class="p">(</span>  <span class="o">-</span><span class="mf">5.00</span><span class="p">,</span>    <span class="mf">0.00</span><span class="p">)</span> <span class="p">:</span> <span class="mi">186</span>
<span class="p">(</span>   <span class="mf">0.00</span><span class="p">,</span>    <span class="mf">5.00</span><span class="p">)</span> <span class="p">:</span> <span class="mi">183</span>
<span class="p">(</span>   <span class="mf">5.00</span><span class="p">,</span>   <span class="mf">10.00</span><span class="p">)</span> <span class="p">:</span> <span class="mi">161</span>
<span class="p">(</span>  <span class="mf">10.00</span><span class="p">,</span>   <span class="mf">15.00</span><span class="p">)</span> <span class="p">:</span>  <span class="mi">77</span>
<span class="p">(</span>  <span class="mf">15.00</span><span class="p">,</span>   <span class="mf">20.00</span><span class="p">)</span> <span class="p">:</span>  <span class="mi">33</span>
<span class="p">(</span>  <span class="mf">20.00</span><span class="p">,</span>   <span class="mf">25.00</span><span class="p">)</span> <span class="p">:</span>  <span class="mi">22</span>
<span class="p">(</span>  <span class="mf">25.00</span><span class="p">,</span>   <span class="mf">30.00</span><span class="p">)</span> <span class="p">:</span>   <span class="mi">8</span>
<span class="p">(</span>  <span class="mf">30.00</span><span class="p">,</span>   <span class="mf">35.00</span><span class="p">)</span> <span class="p">:</span>   <span class="mi">2</span>
<span class="p">(</span>  <span class="mf">35.00</span><span class="p">,</span>   <span class="mf">40.00</span><span class="p">)</span> <span class="p">:</span>   <span class="mi">1</span>
</code></pre>
    </div>
  </div>
</div>

<p>To complete the stand-alone program we just need to add the following code to the end of the code that we have written so far.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">'Print a histogram</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
<span class="n">filename</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">'File name: '</span><span class="p">)</span>
<span class="n">bucketsize</span> <span class="o">=</span> <span class="n">get_bucketsize</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="se">\n\n</span><span class="s">--------------------------------------------</span><span class="se">\n\n</span><span class="s">'</span><span class="p">)</span>
<span class="n">pp_histogram</span><span class="p">(</span><span class="n">make_histogram</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bucketsize</span><span class="p">),</span> <span class="n">bucketsize</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The complete code for this example is in <code class="highlighter-rouge">histogram.py</code>. If we run the module from IDLE we get the following output in the interpreter window.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>Print a histogram

File name: data1.txt
Bucket size: 5.0


--------------------------------------------


( -35.00,  -30.00) :   1
( -30.00,  -25.00) :   4
( -25.00,  -20.00) :  23
( -20.00,  -15.00) :  42
( -15.00,  -10.00) : 102
( -10.00,   -5.00) : 155
(  -5.00,    0.00) : 186
(   0.00,    5.00) : 183
(   5.00,   10.00) : 161
(  10.00,   15.00) :  77
(  15.00,   20.00) :  33
(  20.00,   25.00) :  22
(  25.00,   30.00) :   8
(  30.00,   35.00) :   2
(  35.00,   40.00) :   1
</code></pre>
    </div>
  </div>
</div>

<p>What is going on? Well, all the expressions in the file are evaluated in the interpreter. The definitions are evaluated and as a consequence are added to the interpreter. The other expressions are then evaluated — this is really the program being executed.</p>

<blockquote class="blockquote">
  <p> Brave Sir Robin ran away, bravely ran away away. </p>
  <p> When danger reared his ugly head, he bravely turned his tail and fled. </p>
  <p> Yes, brave Sir Robin turned about, he turned his tail, he chickened out.</p>
  <p> Bravely taking to his feet, he beat a very brave retreat. </p>
  <p> A brave retreat by Sir Robin.</p>
</blockquote>

<h1 id="io">I/O</h1>
<h2 id="files">Files</h2>

<p>It is very common in programming that input is received from a file instead of, or as well as, user input. It is therefore necessary to be able to open, read and save to files. Python has a <strong>file object</strong> that enables us to perform these tasks.</p>

<h3 id="reading-a-file">Reading a File</h3>

<p>To show how to use the file object in Python here are a few examples using the <code class="highlighter-rouge">text.txt</code> file.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; f = open('text.txt', 'r')
&gt;&gt;&gt; type(f)
&lt;class '_io.TextIOWrapper'&gt;
&gt;&gt;&gt; f.read()
'Python is fun,\nit lets me play with files.\nI like playing with files,\nI can 
do some really fun stuff.\n\nI like Python!\n'
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; f.read()
Traceback (most recent call last):
  File "&lt;pyshell#5&gt;", line 1, in &lt;module&gt;
    f.read()
ValueError: I/O operation on closed file
&gt;&gt;&gt;
</code></pre>
    </div>
  </div>
</div>

<p>The first line shows opening a file using the <code class="highlighter-rouge">open</code> function and assigns it to the variable <code class="highlighter-rouge">f</code>. The open statement takes two string parameters; one is the name of the file to be opened. (The file name may include the path to the file if it is in a different directory to the Python program.) The other is the open mode, we will discuss this soon. The second example shows that <code class="highlighter-rouge">f</code> is a file object. The third example shows one of the multiple methods for getting the data from the file. The fourth example shows closing the file, <strong>it is important to close a file after the program is finished with it</strong>. The last example shows that it is not possible to perform operations on a closed file.</p>

<div class="important">

  <h4 id="open-syntax"><code class="highlighter-rouge">open</code> Syntax</h4>
  <p><code class="highlighter-rouge">open(filename, mode)</code>
Where <code class="highlighter-rouge">filename</code> is a string which is the name of the file and <code class="highlighter-rouge">mode</code> is a string indicating the opening mode.</p>

  <h4 id="semantics">Semantics</h4>
  <p><code class="highlighter-rouge">mode</code> is usually ‘r’ or ‘w’ for read or write respectively. <code class="highlighter-rouge">filename</code> can either be relative to the current working directory (i.e the directory or folder from which the program is executed) or can contain the full path to the file.</p>
</div>

<h3 id="more-reading">More Reading</h3>

<p>As before, <code class="highlighter-rouge">dir(f)</code>, will list all the methods available for use with files. The more useful ones for us are the ones that allow us to read from and write to the file. Below are some examples of the read methods we have not seen yet.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; f = open('text.txt', 'r')
&gt;&gt;&gt; dir(f)
['_CHUNK_SIZE', '__class__', '__del__', '__delattr__', '__dict__', '__dir__', '__doc__', '__enter__', '__eq__', '__exit__', '__format__', '__ge__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__iter__', '__le__', '__lt__', '__ne__', '__new__', '__next__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '_checkClosed', '_checkReadable', '_checkSeekable', '_checkWritable', '_finalizing', 'buffer', 'close', 'closed', 'detach', 'encoding', 'errors', 'fileno', 'flush', 'isatty', 'line_buffering', 'mode', 'name', 'newlines', 'read', 'readable', 'readline', 'readlines', 'seek', 'seekable', 'tell', 'truncate', 'writable', 'write', 'writelines']
&gt;&gt;&gt; f.readline()
'Python is fun,\n'
&gt;&gt;&gt; f.readline()
'it lets me play with files.\n'
&gt;&gt;&gt; f.readline()
'I like playing with files,\n'
&gt;&gt;&gt; f.readline()
'I can do some really fun stuff.\n'
&gt;&gt;&gt; f.readline()
'\n'
&gt;&gt;&gt; f.readline()
'I like Python!\n'
&gt;&gt;&gt; f.readline()
''
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; f = open('text.txt', 'r')
&gt;&gt;&gt; f.readlines()
['Python is fun,\n', 'it lets me play with files.\n', 'I like playing with files,\n', 'I can do some really fun stuff.\n', '\n', 'I like Python!\n']
&gt;&gt;&gt; f.close()
&gt;&gt;&gt; f = open('text.txt', 'r')
&gt;&gt;&gt; for line in f :
	print(line)

Python is fun,

it lets me play with files.

I like playing with files,

I can do some really fun stuff.



I like Python!

&gt;&gt;&gt; f.close()
&gt;&gt;&gt;
</code></pre>
    </div>
  </div>
</div>

<p>The first few examples are the use of <code class="highlighter-rouge">readline</code>, it returns one line of the file each time it is called. When there are no lines left <code class="highlighter-rouge">readline</code> returns an empty string. The next example is of <code class="highlighter-rouge">readlines</code> (notice the extra s). <code class="highlighter-rouge">readlines</code> returns a list with each element in the list being a string of each line in the file. Notice how each line of the file ends in a <code class="highlighter-rouge">\n</code>. This is the new line character; it is the character that is, invisibly, inserted when we hit the Enter (return) key. The last example is the use of a <code class="highlighter-rouge">for</code> loop to directly iterate over the file one line at a time. Notice how there is an extra line in between each line that we print. This is caused by the new line character, <code class="highlighter-rouge">\n</code>. <code class="highlighter-rouge">print</code> interprets the new line and inserts it, but <code class="highlighter-rouge">print</code> also inserts its own new line, therefore we end up with two new lines printed.</p>

<h3 id="writing">Writing</h3>
<p>Now let’s have a look at a method for writing to a file:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">"lets_write.txt"</span><span class="p">,</span> <span class="s">"w"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"I'm writing in the file</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
<span class="mi">25</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="s">'look'</span><span class="p">,</span> <span class="s">'more'</span><span class="p">,</span> <span class="s">'words'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">text</span> <span class="p">:</span>
	<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre>
    </div>
  </div>
</div>

<p>Now if we look at the file it should look like <code class="highlighter-rouge">lets_write1.txt</code>. Notice how we need to put in newlines manually when required, they are not automatically inserted. The write method returns the number of bytes or characters that it wrote to the file, in our example the string <code class="highlighter-rouge">"I'm writing in the file\n"</code> is 25 characters long. Also, notice how we did not have to first create the destination file. Opening the file for writing creates the file if it does not already exist.</p>

<p>Let’s look at another method of writing to a file:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">"lets_write.txt"</span><span class="p">,</span> <span class="s">"w"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="s">'many, many </span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">'lines</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">'are</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">'easily</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">'inserted</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span>
        <span class="s">'this way!'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>Now if we look at the file again it should look like <code class="highlighter-rouge">lets_write2.txt</code>. First, notice that the data we wrote before to the file is no longer there, this is because ‘w’ writes from the start of the file and <strong>writes over anything that is already there</strong>. Notice again that the newlines had to be inserted manually.</p>

<h3 id="read-and-write">Read and Write</h3>
<p>Let’s look at an example that uses both reading and writing, with some functionality to process the data. We are going to write a function that will take two filenames as arguments and turn all the characters in one file into uppercase and write them into the other file. Here is the code:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">make_all_caps</span><span class="p">(</span><span class="n">in_filename</span><span class="p">,</span> <span class="n">out_filename</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Convert all characters in 'in_filename' to caps and save to 'out_filename'.

    Parameters:
        in_filename (string): Name of the file from which to read the data.
        out_filename (string): Name of the file to which the data is to be saved.

    Preconditions:
        The files can be opened for reading and writing.
    """</span>
    <span class="n">fin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="n">fout</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_filename</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fin</span> <span class="p">:</span>
        <span class="n">fout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
    <span class="n">fin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">fout</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first thing we do is open the <code class="highlighter-rouge">in_filename</code> in Universal read mode for portability. We then open the <code class="highlighter-rouge">out_filename</code> in write mode. Next, we use a <code class="highlighter-rouge">for</code> loop to iterate over the lines in <code class="highlighter-rouge">fin</code>. The body of the <code class="highlighter-rouge">for</code> loop writes the uppercase version (using strings <code class="highlighter-rouge">upper</code> method) of each line of the input file (<code class="highlighter-rouge">fin</code>) to the output file (<code class="highlighter-rouge">fout</code>). Both files are then closed so that the file pointers are not left open. 
Saving as <code class="highlighter-rouge">make_all_caps.py</code> we can run an example using our <code class="highlighter-rouge">text.txt</code> file from earlier.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">make_all_caps</span><span class="p">(</span><span class="s">'text.txt'</span><span class="p">,</span> <span class="s">'text_caps.txt'</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>If we now have a look at <code class="highlighter-rouge">text_caps.txt</code>. it should have the contents of <code class="highlighter-rouge">text.txt</code> all in upper-case.</p>

<p>Files often have blank lines in them in one form or another. When dealing with files it is generally easier to ignore blank lines than to attempt to process them. However, blank lines are not really blank, they contain the new line character ‘\n’.</p>

<p>Let’s modify our code above to remove blank lines from the file as well as make it all upper case.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">all_caps_no_blanks</span><span class="p">(</span><span class="n">in_filename</span><span class="p">,</span> <span class="n">out_filename</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Changes every character in 'in_filename' to all caps, 
       removes blank lines and saves to 'out_filename'.

    Parameters:
        in_filename (string): Name of the file from which to read the data.
        out_filename (string): Name of the file to which the data is to be saved.

    Preconditions:
        The files can be opened for reading and writing.
    """</span>
    <span class="n">fin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="n">fout</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_filename</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fin</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">!=</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span> <span class="p">:</span>
            <span class="n">fout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
    <span class="n">fin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">fout</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>Notice the change to the function is the addition of the <code class="highlighter-rouge">if</code> statement to check if the current <code class="highlighter-rouge">line</code> is equal to a new line character. If it is not then we write the upper case version of the line to the <code class="highlighter-rouge">fout</code> file. 
Now if we run <code class="highlighter-rouge">all_caps_no_blanks1.py</code> on our <code class="highlighter-rouge">text.txt</code> file like below:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">all_caps_no_blanks</span><span class="p">(</span><span class="s">'text.txt'</span><span class="p">,</span> <span class="s">'text_caps_nb.txt'</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>We should now have a file that looks like <code class="highlighter-rouge">text_caps_nb.txt</code>.</p>

<p>Blank lines might not just include new line characters, they may also include other forms of whitespace, such as spaces and tabs. If we run the previous function on <code class="highlighter-rouge">words.txt</code> we will notice that there are still blank lines as some of them have spaces.</p>

<p>We can modify the example again to work in these cases using the string method <code class="highlighter-rouge">strip</code>. <code class="highlighter-rouge">strip</code> returns a copy of the string with all whitespace removed from the beginning and end of the string. If the string incorporates only whitespace then an empty string is returned.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">all_caps_no_blanks</span><span class="p">(</span><span class="n">in_filename</span><span class="p">,</span> <span class="n">out_filename</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Changes every character in 'in_filename' to all caps, 
       removes blank lines and saves to 'out_filename'.

    Parameters:
        in_filename (string): Name of the file from which to read the data.
        out_filename (string): Name of the file to which the data is to be saved.

    Preconditions:
        The files can be opened for reading and writing.
    """</span>
    <span class="n">fin</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="n">fout</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_filename</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fin</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="p">:</span>
            <span class="n">fout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
    <span class="n">fin</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">fout</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>Now if we run <code class="highlighter-rouge">all_caps_no_blanks2.py</code> on our <code class="highlighter-rouge">words.txt</code> file and <code class="highlighter-rouge">words_allcaps_nb.txt</code> then it should be capitalised with no blank lines.</p>

<p>Notice how the <code class="highlighter-rouge">if</code> statement is simply <code class="highlighter-rouge">if line.strip()</code>. This is because the boolean representation of an empty string is <code class="highlighter-rouge">False</code> while a string with anything in it is <code class="highlighter-rouge">True</code>. The same can be said for objects such as lists, tuples and more.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">(</span><span class="s">''</span><span class="p">)</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">(</span><span class="s">' '</span><span class="p">)</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">(</span><span class="s">'sfg'</span><span class="p">)</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">([])</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">(())</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<blockquote class="blockquote">
  <p> We interrupt this film to apologise for this unwarranted attack by the supporting feature. </p>
  <p> Luckily, we have been prepared for this eventuality, and are now taking steps to remedy it. </p>
</blockquote>

<h1 id="sudoku-example">Sudoku Example</h1>

<p>We are now going to have a look at an example that will incorporate list and file processing. This example will be of a Sudoku game stored in the file <code class="highlighter-rouge">sgame.txt</code>. The pretty-printed form of this game is <code class="highlighter-rouge">sgame.pdf</code>.</p>

<p>The first step is to write a function that takes the name of a file that contains a Sudoku game and returns a representation of the game. The data structure we use to store the game is a list of lists — the entries are rows and each entry in a row represents a column entry of the row. To do this we also write a function to turn a string representing a row into a row.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">row2list</span><span class="p">(</span><span class="n">row_string</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Convert a string representing a row in a Sudoku game into a list.

    Parameters:
        row_string (string): Represents a single row in a Sudoku game.

    Return:
        list&lt;string&gt;: Containing the numbers in a row of a Sudoku game.

    Preconditions:
        Numbers in 'row_string' are single digits
        and there is a single space separating the numbers.
    """</span>
    <span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_string</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">row</span>
</code></pre>
    </div>
  </div>
</div>
<p>This function initialises an empty list for collecting the row entries. Then uses a <code class="highlighter-rouge">for</code> loop with <code class="highlighter-rouge">range</code> that goes through every second number, up to but not including 18. As each entry is a space apart in the string we only want every second character in that string. The character at each entry position is then appended into the <code class="highlighter-rouge">row</code> list.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">read_game</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Read the data for a Sudoku game from 'filename'.

    Parameters:
        filename (string): Name of the file from which to read the game data.

    Return:
        list&lt;list&lt;string&gt;&gt;: Representation of a Sudoku game as a matrix
                            (list of lists) of strings.

    Preconditions:
        The files can be opened for reading and writing.
        File contains 9 lines and each line represents one row of the game.
    """</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="n">game</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">file</span> <span class="p">:</span>
        <span class="n">game</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row2list</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">game</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function opens the file in universal read mode and then initialises an empty list representing the game data structure. Then for every line in the file the <code class="highlighter-rouge">row2list</code> function is called on the line to get the row list. That row list is then appended to the <code class="highlighter-rouge">game</code> list to create the full game.</p>

<p>Our code currently looks like <code class="highlighter-rouge">sudoku1.py</code>. A couple of tests of the functions are below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">row2list</span><span class="p">(</span><span class="s">'1 2 3 4 5 6 7 8 9'</span><span class="p">)</span>
<span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">'7'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">,</span> <span class="s">'9'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">row2list</span><span class="p">(</span><span class="s">'1 2   4 5 6 7 8  '</span><span class="p">)</span>
<span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">'7'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">read_game</span><span class="p">(</span><span class="s">'sgame.txt'</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
		
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'1'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'9'</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="p">[</span><span class="s">'7'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'1'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'9'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">,</span> <span class="s">'1'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'6'</span><span class="p">]</span>
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">'9'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">'8'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">'1'</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="p">[</span><span class="s">'6'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'9'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">'7'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'1'</span><span class="p">]</span>
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre>
    </div>
  </div>
</div>
<p>Now we need functions to extract a given row, column or 3x3 block. Adding the following functions to our code will give us this functionality. Keep in mind that the game data structure can be thought of as a 2-dimensional matrix.</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">get_row</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return the indicated 'row' from 'game'.

    Parameters:
        row (int): Index of the row to extract from 'game'.
        game (list&lt;list&lt;string&gt;&gt;): Matrix representation of the Sudoku game grid.
		
    Return:
        list&lt;string&gt;: The numbers in a row of a Sudoku game.

    Preconditions:
        0 &lt;= 'row' &lt;= 8
        'game' is a list representation of a Sudoku game.
    """</span>
    <span class="k">return</span> <span class="n">game</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function simply needs to return the row<sup>th</sup> index of game as game is a list of rows.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">get_column</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return the column indicated by 'col' from 'game'.

    Parameters:
        col (int): Index of the column to extract from 'game'.
        game (list&lt;list&lt;string&gt;&gt;): Matrix representation of the Sudoku game grid.
		
    Return:
        list&lt;string&gt;: The numbers in a column of a Sudoku game.

    Preconditions:
        0 &lt;= 'col' &lt;= 8
        'game' is a list representation of a Sudoku game.
   """</span>
    <span class="n">column</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">game</span> <span class="p">:</span>
        <span class="n">column</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">column</span>
</code></pre>
    </div>
  </div>
</div>

<p>This is a bit more tricky than <code class="highlighter-rouge">get_row</code> as we do not have a list of columns. Therefore, the function needs to go through every row and collect the values at the column index of the row.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">get_block</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return the 3x3 block starting at index [row, col] from 'game'.

    Parameters:
        row (int): Row index of the start of the block to extract from 'game'.
        col (int): Column index of the start of the block to extract from 'game'.
        game (list&lt;list&lt;string&gt;&gt;): Matrix representation of the Sudoku game grid.
		
    Return:
        list&lt;string&gt;: The numbers in a 3x3 block of a Sudoku game.

    Preconditions:
        0 &lt;= r &lt; 3 and 0 &lt;= c &lt; 3
        'game' is a list representation of a Sudoku game.
    """</span>
    <span class="n">block</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">block_row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="n">row</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">block</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">game</span><span class="p">[</span><span class="n">block_row</span><span class="p">][</span><span class="mi">3</span><span class="o">*</span><span class="n">col</span><span class="p">:</span><span class="mi">3</span><span class="o">*</span><span class="n">col</span><span class="o">+</span><span class="mi">3</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">block</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function is even more complicated. We need to be able to get a 3x3 block, therefore we need to get three adjacent rows and the three adjacent entries from each of those rows. The for loop gets the rows using range to generate indices that correspond to the block required. The <code class="highlighter-rouge">3*row</code> is used as the block rows are numbered 0, 1 or 2 down the game data structure. This moves the start index to the required starting row of the board that corresponds to the start of that block. The end row is simply 3 more rows down. As <code class="highlighter-rouge">game</code> is a list of lists representing rows it can be directly indexed to get the row of interest. Then slicing can be used on that row to get the 3 adjacent columns. This is done using the same system as obtaining the rows. The <code class="highlighter-rouge">extend</code> method of lists modifies the list it is called on by joining the list in its argument to the first list to form one list.</p>

<p>Our Sudoku code now looks like <code class="highlighter-rouge">sudoku2.py</code>. Here are some tests of the functions that we have just written.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">game</span> <span class="o">=</span> <span class="n">read_game</span><span class="p">(</span><span class="s">'sgame.txt'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">get_row</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span>
<span class="p">[</span><span class="s">'7'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'1'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">get_column</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span>
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">'7'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">get_block</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span>
<span class="p">[</span><span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">'1'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">' '</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre>
    </div>
  </div>
</div>

<p>To finish off this problem we look at the problem of determining what possible values can be put in an empty square. To do this, we need to determine what are the possibilities based on entries already in a given row, column or block. This can be done by finding the difference between the given entries and the valid entries. Below are the functions that will allow us to do this.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">list_diff</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span> <span class="n">list2</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return the list of entries in list1 that are not in list2 (list1 - list2).

    A general-purpose list function that works for lists of any type of elements.
    """</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">list1</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">element</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list2</span> <span class="p">:</span>
            <span class="n">diff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">diff</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function creates an empty result list, <code class="highlighter-rouge">diff</code>. The function then goes through every <code class="highlighter-rouge">element</code> in <code class="highlighter-rouge">list1</code> and checks if it is in <code class="highlighter-rouge">list2</code>. If <code class="highlighter-rouge">element</code> is not in <code class="highlighter-rouge">list2</code> then <code class="highlighter-rouge">element</code> is appended to our result list <code class="highlighter-rouge">diff</code>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="c1"># all the valid choices
</span><span class="n">ALL_CHOICES</span> <span class="o">=</span> <span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">'7'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">,</span> <span class="s">'9'</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">choices</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Return choices that are possible at position indicated by [row, column].

    Identify and return all the choices that are possible at position 
    [row, column] in 'game' - i.e. each choice should not occur in the 
    indicated 'row', 'column' or in the block containing this position.

    Parameters:
        row (int): Row index of the position to check.
        column (int): Column index of the position to check.
        game (list&lt;list&lt;string&gt;&gt;): Matrix representation of the Sudoku game grid.
		
    Return:
        list&lt;string&gt;: The valid choices at this position.

    Preconditions:
        0 &lt;= row &lt;= 8 and 0 &lt;= column &lt;= 8  game[row][column] == ' '
    """</span>
    <span class="n">block_row</span> <span class="o">=</span> <span class="n">row</span> <span class="o">/</span> <span class="mi">3</span>
    <span class="n">block_col</span> <span class="o">=</span> <span class="n">column</span> <span class="o">/</span> <span class="mi">3</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">ALL_CHOICES</span><span class="p">,</span> <span class="n">get_row</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">game</span><span class="p">))</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">choices</span><span class="p">,</span> <span class="n">get_column</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">game</span><span class="p">))</span>
    <span class="n">choices</span> <span class="o">=</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">choices</span><span class="p">,</span> <span class="n">get_block</span><span class="p">(</span><span class="n">block_row</span><span class="p">,</span> <span class="n">block_col</span><span class="p">,</span> <span class="n">game</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">choices</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function starts by finding the block that the coordinate [row, column] is in and setting this to <code class="highlighter-rouge">block_row</code> and <code class="highlighter-rouge">block_col</code>. Then it finds all the choices for the row by calling <code class="highlighter-rouge">list_diff</code> with the list <code class="highlighter-rouge">ALL_CHOICES</code> and the list obtained from <code class="highlighter-rouge">get_row</code> as arguments. Then choices is updated by passing it into <code class="highlighter-rouge">list_diff</code> along with the result from <code class="highlighter-rouge">get_column</code> and assigning the result back into <code class="highlighter-rouge">choices</code>, this removes all the non-possible choices from the column from the <code class="highlighter-rouge">choices</code> list. This is again done with the block. This then leaves all the choices available for that square so <code class="highlighter-rouge">choices</code> is returned.</p>

<p>Finally, our sudoku code looks like <code class="highlighter-rouge">sudoku.py</code>. Here results of some tests of the last few function we wrote.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">ALL_CHOICES</span><span class="p">,</span> <span class="n">get_row</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">game</span><span class="p">))</span>
<span class="p">[</span><span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">'7'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">ALL_CHOICES</span><span class="p">,</span> <span class="n">get_column</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">game</span><span class="p">))</span>
<span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">,</span> <span class="s">'9'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_diff</span><span class="p">(</span><span class="n">ALL_CHOICES</span><span class="p">,</span> <span class="n">get_block</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">game</span><span class="p">))</span>
<span class="p">[</span><span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">,</span> <span class="s">'9'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_intersection</span><span class="p">([</span><span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'6'</span><span class="p">,</span> <span class="s">'7'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">],</span>
                      <span class="p">[</span><span class="s">'1'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">,</span> <span class="s">'9'</span><span class="p">])</span>
<span class="p">[</span><span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">choices</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">game</span><span class="p">)</span>
<span class="p">[</span><span class="s">'2'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'5'</span><span class="p">,</span> <span class="s">'8'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre>
    </div>
  </div>
</div>

<blockquote class="blockquote">
  <p> My hovercraft is full of eels</p>
</blockquote>

<h1 id="error-handling">Error Handling</h1>

<p>We have seen many errors that the interpreter has produced when we have done something wrong. In this case, we say that the interpreter has raised an error. A typical example is when we wish to use user input. We cannot guarantee that the user will input values correctly. If we are not careful, user input might cause an error. When this happens, we want to be able to catch the error (Exception) and deal with it ourselves (users do not like to see red).</p>

<p>To be able to do this we surround the code that is likely to raise an error in a <code class="highlighter-rouge">try</code>, <code class="highlighter-rouge">except</code> statement. The following gives a couple of examples of <strong>error handling</strong> on the <code class="highlighter-rouge">int</code> function that attempts to convert user input into an integer. To do this we shall write a small function definition as follows.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">int_exception</span><span class="p">()</span> <span class="p">:</span>
    <span class="s">"""Asks for user input and attempts to convert it into an integer.

    Returns:
        int: Integer value entered by user;
             or -1 if they did not enter an integer.
    """</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter a number: "</span><span class="p">)</span>
    <span class="k">try</span> <span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"{0} is not a number"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function simply asks the user for a number. It then attempts to convert the input into an int and return it. See how the <code class="highlighter-rouge">return int(num)</code> is inside a <code class="highlighter-rouge">try</code> statement and followed by an <code class="highlighter-rouge">except Exception</code> statement. This is how the exception is caught. If the block of code between the try and except lines raises an exception then the rest of the block is not executed and the code after the except line is executed instead. In this case, we print a short message and return -1. 
Saving the file as <code class="highlighter-rouge">int_exception.py</code> we can perform a couple of test as below.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; int('10')
10
&gt;&gt;&gt; int_exception()
Enter a number: 10
10
&gt;&gt;&gt; int('ten')

Traceback (most recent call last):
  File "&lt;pyshell#4&gt;", line 1, in &lt;module&gt;
    int('ten')
ValueError: invalid literal for int() with base 10: 'ten'
&gt;&gt;&gt; int_exception()
Enter a number: ten
'ten is not a number'
-1
</code></pre>
    </div>
  </div>
</div>

<p>The first example simply shows that the string <code class="highlighter-rouge">'10'</code> can be turned into an integer. The next example shows our function and we give 10 as user input and see that it returns 10. The next example shows then the string <code class="highlighter-rouge">'ten'</code> raises an error as it cannot be converted into a string. We then run our function again and see that we do not get the error but instead get the message <code class="highlighter-rouge">'ten is not a number'</code> and -1 is returned.
Note how we used <code class="highlighter-rouge">except Exception</code>, this catches <strong><em>any</em></strong> error that happens. It is OK to do this in this case as there are not many other ways this code can raise an error. It is <strong>not always good practice to do this</strong>, especially in complex code. Sometimes we end up catching errors raised by mistakes in our code, not the user input. It would therefore, be better to state the exception we want to catch rather than the “catch all” <code class="highlighter-rouge">Exception</code>.</p>

<div class="important">

  <h4 id="exception-handling-syntax">Exception Handling Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body1&lt;/span&gt; &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;ExceptionName&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body2&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics">Semantics</h4>
  <p>Exception handling starts with a <code class="highlighter-rouge">try</code> statement followed by a colon. Then on a new line, and indented, is <code class="highlighter-rouge">body1</code>, this is the body of code that is to be tested for exceptions. This is followed, on a new, de-dented line, by an <code class="highlighter-rouge">except</code> statement followed by the <code class="highlighter-rouge">ExceptionName</code> that is to be caught, which is followed by a colon. On a new line, and indented, is <code class="highlighter-rouge">body2</code>, this is the body of code to be run when the exception is caught. If all errors are to be caught then the <code class="highlighter-rouge">ExceptionName</code> to use is <code class="highlighter-rouge">Exception</code>.</p>
</div>

<h3 id="using-the-exception">Using the Exception</h3>
<p>It is possible to store the exception caught so that information is able to be extracted for use. This is done using <code class="highlighter-rouge">as</code>. To demonstrate this we are going to modify our code from above to look like the function definition below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">int_exception</span><span class="p">(</span><span class="n">in_num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Asks user for a number and divides 'in_num' by the input.

    Parameters:
        in_num (int): Number to be divided by user input.

    Returns:
        float: 'in_num' divided by the number entered by the user;
               or -1 if input is not an integer or if input is 0.
    """</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter a number: "</span><span class="p">)</span>
    <span class="k">try</span> <span class="p">:</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">in_num</span> <span class="o">/</span> <span class="n">num</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Error: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre>
    </div>
  </div>
</div>

<p>The function now takes a number argument. It still asks the user for a number. The number from the argument is then divided by the number given by the user and returned. If an error is raised then it is caught and assigned to <code class="highlighter-rouge">e</code>. An error message is then returned including the string representation of the error.
Saving the file as <code class="highlighter-rouge">int_exception2.py</code> we can perform a couple of test as below.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; int_exception(15)
Enter a number: 10
1.5
&gt;&gt;&gt; int_exception(15)
Enter a number: ten
Error: Invalid literal for int() with base 10: 'ten'
-1
&gt;&gt;&gt; int_exception(15)
Enter a number: 0
Error: division by zero
-1
</code></pre>
    </div>
  </div>
</div>

<p>The first example works as expected, the function returns <code class="highlighter-rouge">1.5</code>. The next two examples show the function outputting an error message; the first being <code class="highlighter-rouge">'Error: could not convert string to float: ten'</code> from a <code class="highlighter-rouge">ValueError</code>, which is from attempting to float a non numerical string from the input and the other is <code class="highlighter-rouge">'Error: float division by zero'</code> from a <code class="highlighter-rouge">ZeroDivisionError</code>, which happens if 0 is input (we can not divide by zero).</p>

<div class="important">

  <h4 id="exception-handling-syntax-1">Exception Handling Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body1&lt;/span&gt; &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;ExceptionName&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;var&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body2&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics-1">Semantics</h4>
  <p>This works the same as using just try and except. The difference is that the exception, <code class="highlighter-rouge">ExceptionName</code>, is assigned to the variable <code class="highlighter-rouge">var</code>.</p>
</div>

<h3 id="catching-different-exceptions">Catching Different Exceptions</h3>
<p>We have seen that it is possible to catch every error raised and that we can get information about the error. So how do we catch a specific error that we know is possible from incorrect input? It is possible to specify what errors we want to catch and deal with. This way we only catch the errors that are caused by incorrect input, rather than everything and miss the errors raised by any incorrect code.</p>

<p>To demonstrate this let’s look at the function definition below:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">get_numbers</span><span class="p">(</span><span class="n">dividend</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Asks the user repeatedly for numbers and calculates 'dividend' 
    divided by each number.

    Results of division are stored in a list.
    The list is returned if nothing is entered.

    Parameters:
        dividend (int): Number to be divided by the numbers entered by user.

    Return:
        list&lt;float&gt;: List of dividend divided by each input number.
    """</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Enter Number: "</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">num</span> <span class="p">:</span>
            <span class="k">break</span>
        <span class="k">try</span> <span class="p">:</span>
            <span class="n">num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dividend</span> <span class="o">/</span> <span class="n">num</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">ValueError</span> <span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"That is not a number"</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">ZeroDivisionError</span> <span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Can't divide by zero"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function takes a number as an argument. It then repeatedly asks for user input with <code class="highlighter-rouge">input</code>. If there is nothing typed then the while loop breaks. If something is typed then it attempts to convert the input to a <code class="highlighter-rouge">float</code> and then attempts to divide the argument number by the input number, appending it to the list. It checks for two different errors, <code class="highlighter-rouge">ValueError</code> and <code class="highlighter-rouge">ZeroDivisionError</code> In both cases a simple message is printed to tell the user that they have given wrong input.</p>

<p>After saving the file as <code class="highlighter-rouge">get_numbers.py</code> we can run a few tests.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; get_numbers(10)
Enter Number: 2
Enter Number: a
That is not a number
Enter Number: 4
Enter Number: 0
Can't divide by zero
Enter Number: 3.5
Enter Number: 
[5.0, 2.5, 2.857142857142857]
</code></pre>
    </div>
  </div>
</div>

<p>It can be seen in this example that if non numerical inputs are given then we get <code class="highlighter-rouge">That is not a number</code>. If 0 is input then the message is <code class="highlighter-rouge">Can’t divide by zero</code>. Any numerical based inputs in this test work.</p>

<div class="important">

  <h4 id="exception-handling-syntax-2">Exception Handling Syntax</h4>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body1&lt;/span&gt; &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;ExceptionName1&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;body2&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;ExceptionNameN&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;bodyn&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics-2">Semantics</h4>
  <p>This starts the same as exception handling only there are repeated except statements for every error that is to be caught.</p>

  <p>Multiple <code class="highlighter-rouge">except</code> statements can have a combination of assigning the exception to a variable or not.</p>
</div>

<h3 id="dealing-with-unknown-exceptions">Dealing with Unknown Exceptions</h3>
<p>Sometimes we need to be prepared for any exception that may happen. We have seen a way of dealing with this in the first couple of exception handling examples with <code class="highlighter-rouge">except Exception</code>. However, sometimes there are errors that we wish to deal with specially and just have a single case for any other exception that may occur. We can modify the function definition above to be able to demonstrate this.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">get_numbers</span><span class="p">(</span><span class="n">dividend</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">""</span><span class="n">Asks</span> <span class="n">the</span> <span class="n">user</span> <span class="n">repeatedly</span> <span class="k">for</span> <span class="n">numbers</span> <span class="ow">and</span> <span class="n">calculates</span> <span class="s">'dividend'</span> 
    <span class="n">divided</span> <span class="n">by</span> <span class="n">each</span> <span class="n">number</span><span class="o">.</span>

    <span class="n">Results</span> <span class="n">of</span> <span class="n">division</span> <span class="n">are</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">a</span> <span class="nb">list</span><span class="o">.</span>
    <span class="n">The</span> <span class="nb">list</span> <span class="ow">is</span> <span class="n">returned</span> <span class="k">if</span> <span class="n">nothing</span> <span class="ow">is</span> <span class="n">entered</span><span class="o">.</span>

    <span class="n">Parameters</span><span class="p">:</span>
        <span class="n">dividend</span> <span class="p">(</span><span class="nb">int</span><span class="p">):</span> <span class="n">Number</span> <span class="n">to</span> <span class="n">be</span> <span class="n">divided</span> <span class="n">by</span> <span class="n">the</span> <span class="n">numbers</span> <span class="n">entered</span> <span class="n">by</span> <span class="n">user</span><span class="o">.</span>

    <span class="n">Return</span><span class="p">:</span>
        <span class="nb">list</span><span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span><span class="p">:</span> <span class="n">List</span> <span class="n">of</span> <span class="n">dividend</span> <span class="n">divided</span> <span class="n">by</span> <span class="n">each</span> <span class="nb">input</span> <span class="n">number</span><span class="o">.</span>
    <span class="s">"""
    results = []
    while True :
        num = input("Enter Number: ")
        if not num :
            break
        try :
            num = float(num)
            results.append(dividend / num)
        except ValueError :
            print("That is not a number")
        except ZeroDivisionError :
            print("Can't divide by zero")
        except Exception as e :
            print("Unknown Error {0}".format(str(e)))
            return []
    return results
</span></code></pre>
    </div>
  </div>
</div>

<p>This function definition is the same except that we have added an extra except statement. This except statement is another <code class="highlighter-rouge">except Exception</code> like we have seen before. The way this function now works is, if a <code class="highlighter-rouge">ValueError</code> or <code class="highlighter-rouge">ZeroDivisionError</code> error occurs then it will behave the same as the previous example. If any other exception occurs then the last except statement will catch it and print out an error message and return an empty list.</p>

<p>Saving now as <code class="highlighter-rouge">get_numbers2.py</code> we can test the function.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; get_numbers(10)
Enter Number: 2
Enter Number: f
That is not a number
Enter Number: 0
Can't divide by zero
Enter Number: 
[5.0]
&gt;&gt;&gt; get_numbers("g")
Enter Number: 2
Unknown Error: unsupported operand type(s) for /: 'str' and 'float'
[]
</code></pre>
    </div>
  </div>
</div>
<p>The first few examples are as before. The last example is an example of the new functionality. The function itself was given a string argument when it was meant to be given numbers only. This created a different exception when we attempted to divide a string by a number. Therefore, our function prints an error message and returns an empty list.</p>

<h2 id="raising-exceptions">Raising Exceptions</h2>
<p>There are many situations where we might want an error to occur. If a function receives incorrect input, or some other invalid action occurs, it is better to let the function raise an exception, which forces another part of the code deal with the problem (by using <code class="highlighter-rouge">try-except</code> statements).
As an example, we will revisit the <a href="reading/2B0_functional_decomposition">prime numbers</a> example from earlier. To test if a number is prime, we wrote this function:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns True iff 'num' is prime.

    Parameters:
        num (int): Integer value to be tested to see if it is prime.

    Return:
        bool: True if 'num' is prime. False otherwise.

    Preconditions:
        num &gt; 1
    """</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<p>We discussed that the precondition <code class="highlighter-rouge">n &gt; 1</code> means that inputs which don’t fit this criteria could have unknown consequences. This function would return <code class="highlighter-rouge">True</code> if the input was invalid, and it would be the user’s responsibility to check that the input was valid. If the user doesn’t do this, there could be more disastrous consequences later in the program. We will modify the function to <strong>raise</strong> an error when the input is invalid; this will make sure any mistakes don’t quietly pass by.</p>

<p>Different types of exception in Python serve different purposes. For example, we use <code class="highlighter-rouge">ValueError</code> to represent an inappropriate value (for example, if <code class="highlighter-rouge">n &lt;= 1</code>), and <code class="highlighter-rouge">TypeError</code> to represent an input of the wrong type (for example, a <code class="highlighter-rouge">float</code>).</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Returns True iff 'num' is prime.

    Parameters:
        num (int): Integer value to be tested to see if it is prime.

    Return:
        bool: True if 'num' is prime. False otherwise.

    Preconditions:
        num &gt; 1
    """</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="p">:</span>
        <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"Input must be &gt; 1"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">raise</span> <span class="nb">TypeError</span><span class="p">(</span><span class="s">"Input must be an integer"</span><span class="p">)</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<p>When we test the function on incorrect inputs, we see the function raises the appropriate errors:</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; is_prime(-2)
Traceback (most recent call last):
  File "&lt;pyshell#0&gt;", line 1, in &lt;module&gt;
    is_prime(-2)
  File "is_prime.py", line 9, in is_prime
    raise ValueError("Input must be &gt; 1")
ValueError: Input must be &gt; 1
&gt;&gt;&gt; is_prime(3.14)
Traceback (most recent call last):
  File "&lt;pyshell#1&gt;", line 1, in &lt;module&gt;
    is_prime(3.14)
  File "is_prime.py", line 11, in is_prime
    raise TypeError("Input must be an integer")
TypeError: Input must be an integer
</code></pre>
    </div>
  </div>
</div>

<div class="important">

  <h4 id="raise-syntax"><code class="highlighter-rouge">raise</code> Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;ExceptionName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics-3">Semantics</h4>
  <p>The <code class="highlighter-rouge">raise</code> statement will cause an exception to be raised. If the <code class="highlighter-rouge">raise</code> statement is inside a <code class="highlighter-rouge">try</code> block, the interpreter will look for the appropriate <code class="highlighter-rouge">except</code> block to execute. Otherwise, the function will exit immediately, and the exception will <strong>propagate</strong>, exiting functions until it finds a <code class="highlighter-rouge">try-except</code> block. If there is no appropriate <code class="highlighter-rouge">try-except</code> block to handle the exception, the program will exit, and the Python interpreter will display an error message (<code class="highlighter-rouge">Traceback (most recent call last):...</code>)</p>

  <p>The <code class="highlighter-rouge">ExceptionName</code> should be a type of exception which is appropriate to the situation. The <code class="highlighter-rouge">args</code> can be any number of arguments, but is often a message to describe what caused the exception.</p>

  <p><code class="highlighter-rouge">raise</code> statements are useful in the body of an if statement which checks if a value is invalid.</p>
</div>

<blockquote class="blockquote">
  <p> Listen. Strange women lying in ponds distributing swords is no basis for a system of government. </p>
  <p> Supreme executive power derives from a mandate from the masses, </p>
  <p> not from some farcical aquatic ceremony. </p>
</blockquote>

<h1 id="variable-scope">Variable Scope</h1>
<p>Now that we have written some programs we should describe how Python keeps track of all the variables in our programs — what values they have, and which variable are being talked about at a specific point in our programs. This is an issue in every programming language and is typically managed by using <strong>environments</strong> (a data structure) to maintain information about the variables and values that can be accessed in a particular part of a program (<strong>program scope</strong>) such as a function body. The <strong>scope of a variable</strong> describes where in a program a particular variable can be used.</p>

<p>Python uses dictionaries for its environments — each dictionary maintains the mapping from variable names to values. Python uses the term <strong>namespace</strong> to refer to these dictionaries. There is one <strong>global namespace</strong> that keeps information about everything at the ‘global’ level. When each function is called a new <strong>local namespace</strong> is constructed to keep track of variables inside the function. Python comes with two functions that extract the global and (current) local namespaces: <code class="highlighter-rouge">globals()</code> and <code class="highlighter-rouge">locals()</code>. Below is some code and some results of running the code that gives an insight into how Python keeps track of variables.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; a = 10
&gt;&gt;&gt; b = 11
&gt;&gt;&gt; def foo(b) :
    print('Global namespace = ', globals())
    print('Local namespace = ', locals())
    return a + b

&gt;&gt;&gt; foo(3)
Global namespace =  {'__loader__': &lt;class '_frozen_importlib.BuiltinImporter'&gt;, 'foo': &lt;function foo at 0x7f2cb35f58c8&gt;, '__builtins__': &lt;module 'builtins' (built-in)&gt;, 
'__spec__': None, '__package__': None, '__doc__': None,
'__name__': '__main__', 'b': 11, 'a': 10}
Local namespace =  {'b': 3}
13
&gt;&gt;&gt; 
</code></pre>
    </div>
  </div>
</div>

<p>We can see that variables <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code> are defined in the global namespace and <code class="highlighter-rouge">b</code> is also defined in the local namespace of <code class="highlighter-rouge">foo</code>. So, why is the value of <code class="highlighter-rouge">foo(3)</code> equal to 13? Python first looks in the local namespace to see if a given variable is defined there. If so, it uses the corresponding value. If not it looks in the global namespace for a value. If the variable is not in the global namespace we get a familiar error message. In the case above, <code class="highlighter-rouge">b</code> is defined in the local namespace and its value (3) is used. The variable <code class="highlighter-rouge">a</code> is not defined in the local namespace so Python looks in the global namespace, getting the value 10.</p>

<p>Compare the above example with the following.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">11</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">3</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;pyshell#58&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">foo</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
  <span class="n">File</span> <span class="s">"&lt;pyshell#57&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">2</span><span class="p">,</span> <span class="ow">in</span> <span class="n">foo</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">3</span>
<span class="nb">UnboundLocalError</span><span class="p">:</span> <span class="n">local</span> <span class="n">variable</span> <span class="s">'a'</span> <span class="n">referenced</span> <span class="n">before</span> <span class="n">assignment</span>
<span class="o">&gt;&gt;&gt;</span> 
</code></pre>
    </div>
  </div>
</div>

<p>In this case we are trying to modify a global variable (i.e. one not in the local scope). Python sees this assignment as follows — on the left hand side is <code class="highlighter-rouge">a</code> and so Python treats this as a local variable. On the right hand side is an occurrence of <code class="highlighter-rouge">a</code>, but it has not been given a value in the local scope and so our favorite error is produced.</p>

<p>It is possible to modify global variables as the following example shows.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">11</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">a</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">3</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="mi">16</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">foo</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="mi">19</span>
<span class="o">&gt;&gt;&gt;</span> 
</code></pre>
    </div>
  </div>
</div>

<div class="important">

  <h4 id="global-and-why-not"><code class="highlighter-rouge">global</code> and why not</h4>
  <p>The <code class="highlighter-rouge">global</code> declaration tells Python to treat <code class="highlighter-rouge">a</code> as a global variable. This is a <strong>very dangerous</strong> thing to do and should be avoided where possible. Using global variables makes it difficult to understand the logic of programs — in the previous example, we call <code class="highlighter-rouge">foo</code> twice with the same argument but get different results.</p>
</div>

<blockquote class="blockquote">
  <p> The architects themselves came in to explain the advantages of both designs. </p>
</blockquote>

<h1 id="class-design">Class Design</h1>
<p>In the previous sections, we have used existing classes (e.g. str and list) that enable us to be able to write functions and programs that do what we wish. In this section, we will begin to design our own classes. Being able to write our own classes is a useful tool as not everything is in a format that we like or will find easy to use for a particular program that we may wish to write. We will start with the design of a simple ADT for a 2D point (an x and y coordinate).</p>

<h2 id="2d-point-class">2D Point Class</h2>
<p>For our first example will we write the class definition for a 2D point. This class will require a <em>constructor</em> (to be able to create instances of the class), a couple of accessors that get the x, y coordinate of the point and a mutator to move the point by a certain distance. The class definition is as follows. Below, we will discuss this definition in detail.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A 2D point ADT using Cartesian coordinates."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Construct a point object based on (x, y) coordinates.
        
        Parameters:
            x (float): x coordinate in a 2D cartesian grid.
            y (float): y coordinate in a 2D cartesian grid.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the x coordinate of the point."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>

    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the y coordinate of the point."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>

    <span class="k">def</span> <span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Move the point by (dx, dy).

        Parameters:
            dx (float): Amount to move in the x direction.
            dy (float): Amount to move in the y direction.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">+=</span> <span class="n">dy</span>
</code></pre>
    </div>
  </div>
</div>

<p>Class definitions start with the keyword <code class="highlighter-rouge">class</code>, followed by the class name, and <code class="highlighter-rouge">(object):</code>. Following this, and indented, is what looks like function definitions. These are the <strong>method definitions</strong> for the class. Notice the first argument of each method is <code class="highlighter-rouge">self: self</code> is a reference to the object itself. This argument is needed so that the method can access and modify components of the object. Class names, like function names, follow a naming convention. This convention is that the first letter of each word in the class name is a capital letter. Methods follow the same naming convention as functions.</p>

<div class="important">

  <h5 id="class-definition-syntax">Class Definition Syntax</h5>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ClassName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="s"&gt;"""Comment"""&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;method_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;method_1_body&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;method_2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;method_2_body&lt;/span&gt;

&lt;span class="o"&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics">Semantics</h4>
  <p>Creates a class called <code class="highlighter-rouge">ClassName</code> to represent the ADT specified. The methods of the class are <code class="highlighter-rouge">method_1</code>, <code class="highlighter-rouge">method_2</code>, and so on. Each method must have a parameter <code class="highlighter-rouge">self</code> to represent the instance that is performing the method, optionally followed by any other arguments the method requires.
Method calls of the form <code class="highlighter-rouge">instance.method(arg1, arg2, ...)</code> will execute the body of the definition of <code class="highlighter-rouge">method</code> with the arguments <code class="highlighter-rouge">instance, arg1, arg2, ....</code> Note that the value of the <code class="highlighter-rouge">self</code> parameter is <code class="highlighter-rouge">instance</code>.</p>
</div>

<h3 id="setting-up-a-point">Setting up a Point</h3>
<p>Earlier in the course, we have used the <code class="highlighter-rouge">dir</code> function to list the methods of an object, and saw that many of the methods had double underscores at the start and end of their names. These methods each have a special meaning in Python, which allow the object to work with existing Python syntax, such as arithmetic, slicing, and built-in functions.</p>

<p>The first method that the Point class has is the <code class="highlighter-rouge">__init__</code> method. This is the <strong>constructor</strong> method of the class, which is executed when the object is created. <code class="highlighter-rouge">__init__</code> takes as arguments any data that is to be required to make the instance of the class and creates the <strong>instance variables</strong> and any data structures required for the instance to function. In this case <code class="highlighter-rouge">__init__</code> takes in the x, y coordinate of the point and creates two instance variables, <code class="highlighter-rouge">self._x</code> and <code class="highlighter-rouge">self._y</code>. Note the <code class="highlighter-rouge">self.</code> at the start of the variable names. <code class="highlighter-rouge">self</code> is required to access any variables and methods of the instance, as it is the reference to the object instance. <code class="highlighter-rouge">self._x</code> and <code class="highlighter-rouge">self._y</code> are given the values of <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> respectively from the inputs into the constructor (<code class="highlighter-rouge">__init__</code> method) of the Point class.</p>

<p>The underscores on the instance variables also have an informal meaning. In object-oriented programming it is often useful to have <strong>private</strong> variables and methods. This is data and methods that are not meant to be accessed from outside the class except perhaps via a non-private method. Python does not have a way of setting variables and methods private. Python instead uses underscores to ‘hide’ variables and methods. <strong><em>Note</em></strong>: This is simply a naming convention used by programmers to signify to readers of the code that this variable or method is meant to be private. It is possible to access these variables and methods directly if the number of underscores is know, though it is not recommended in case the class definition changes.</p>

<p>The next two methods (the <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> methods) are our <strong>accessors</strong> — they provide us with an interface to access the class instance variables from outside the class definition. These methods simply return the corresponding coordinate (either x or y). The method <code class="highlighter-rouge">move</code> is a <strong>mutator</strong> — it modifies the data stored in the object. Other than <code class="highlighter-rouge">self</code>, <code class="highlighter-rouge">move</code> also has the arguments <code class="highlighter-rouge">dx</code> and <code class="highlighter-rouge">dy</code>. These are added to the current <code class="highlighter-rouge">self._x</code> and <code class="highlighter-rouge">self._y</code>, respectively, to ‘move’ our point along a certain vector to a new location.</p>

<p>Now we can save our code as <code class="highlighter-rouge">point1.py</code> and run a few tests to see it in action.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; p = Point(2, -5)
&gt;&gt;&gt; p
&lt;__main__.Point object at 0x011D4710&gt;
&gt;&gt;&gt; str(p)
'&lt;__main__.Point object at 0x011D4710&gt;'
&gt;&gt;&gt; type(p)
&lt;class '__main__.Point'&gt;
&gt;&gt;&gt; p.x()
2
&gt;&gt;&gt; p.y()
-5
&gt;&gt;&gt; p.move(-3, 9)
&gt;&gt;&gt; p.x()
-1
&gt;&gt;&gt; p.y()
4
</code></pre>
    </div>
  </div>
</div>

<p>The first line creates an instance, <code class="highlighter-rouge">p</code>, of our new <code class="highlighter-rouge">Point</code> class. When we create a Point instance, we are <strong>instantiating</strong> the class. The example shows a print out of how Python represents our Point class, while the one after it shows Pythons string version of our Point class. The following example shows the <code class="highlighter-rouge">type</code> of our Point class. We then go and call the <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> methods to view the current state of the class instance. We then move our Point, <code class="highlighter-rouge">p</code>, and then have a look at the new state of the class instance.</p>

<h3 id="string-representations">String Representations</h3>
<p>The second and third examples above showed how Python represents our Point class. The Python interpreter is using the default methods for <code class="highlighter-rouge">str</code> and <code class="highlighter-rouge">repr</code> for the string representations of our class. These are not particularly nice or useful representations of this class as it does not tell us much about the instance state. We can make our class have a better representation by writing our own <code class="highlighter-rouge">__str__</code> and <code class="highlighter-rouge">__repr__</code> methods into our class definition. These two method names are used to define the behaviour of the built-in <code class="highlighter-rouge">str</code> and <code class="highlighter-rouge">repr</code> functions respectively. The following method definitions will provide good <code class="highlighter-rouge">__str__</code> and <code class="highlighter-rouge">__repr__</code> representations of our Point.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""The 'informal' string representation of the point."""</span>
        <span class="k">return</span> <span class="s">'({0}, {1})'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""The 'official' string representation of the point."""</span>
        <span class="k">return</span> <span class="s">'Point({0}, {1})'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">__str__</code> and <code class="highlighter-rouge">__repr__</code> methods both use a similar formatted string to produce a string that is a nice representation of our Point class. These methods are used when the functions <code class="highlighter-rouge">str</code> and <code class="highlighter-rouge">repr</code>, respectively, are used on our Point class. <code class="highlighter-rouge">__repr__</code>, ideally, should represent all the data important to the object’s state and to be able to recreate the object with that same state. If possible we should also make it so that if the interpreter read the <code class="highlighter-rouge">repr</code> string back in and evaluated it, it would construct a copy of the object.</p>

<p>After adding the above code to the class definition our class we can now save our <code class="highlighter-rouge">point2.py</code> code and test our two new methods.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span>
<span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="s">'(-1, 4)'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">repr</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="s">'Point(-1, 4)'</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first example shows what Python now returns if we simply ask for <code class="highlighter-rouge">p</code>. When something is evaluated the interpreter uses the <code class="highlighter-rouge">__repr__</code> method of the class as is shown in the third example. The second example shows the string representation of our Point class. Notice that the repr string looks just like the line created to make the Point instance originally.</p>

<h3 id="arithmetic-on-points">Arithmetic on Points</h3>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">==</span> <span class="n">p2</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">==</span> <span class="n">p3</span>
<span class="bp">False</span>
</code></pre>
    </div>
  </div>
</div>

<p>The above examples show that if we create Points with the same parameters they are not equal, even though the share the same state. This is clearly shown in the first and last example. These examples return <code class="highlighter-rouge">False</code> as, even though both objects have the same state, they are different instances of the class. The second example returns <code class="highlighter-rouge">True</code> as there are two variables with the same instance of Point as their value. The reason the interpreter behaves this way is because the interpreter is using the default test for equality, that objects are equal if they are the same instance.</p>

<p>We would like to define how equality should work on points. The method <code class="highlighter-rouge">__eq__</code> is used to define the behaviour of the <code class="highlighter-rouge">==</code> test. It would also be useful if we were able to add two Points together. The <code class="highlighter-rouge">__add__</code> method is used to define addition of objects using the <code class="highlighter-rouge">+</code> operator. The following code contains the two method definitions for <code class="highlighter-rouge">__add__</code> and <code class="highlighter-rouge">__eq__</code> which will give us the functionality we want when the <code class="highlighter-rouge">+</code> or <code class="highlighter-rouge">==</code> operators are used.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Return a new Point after adding this point to 'other'.

        Perform vector addition of the points considered as vectors.
        point1 + point2 -&gt; Point

        Parameters:
            other (Point): Other point to be added to this point.

        Return:
            Point: New point object at position of 'self' + 'other'.
        """</span>
        <span class="k">return</span> <span class="n">Point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Return True iff 'self' and 'other' have the same x and y coords.

        point1 == point2 -&gt; bool
        
        Parameters:
            other (Point): Other point to be compared to this point.

        Return:
            bool: True if 'self' and 'other' have the same x and y coords.
                  False otherwise.
        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">__add__</code> method adds the two Points together using vector addition. Then creates a new Point and returns it. The <code class="highlighter-rouge">__eq__</code> method returns <code class="highlighter-rouge">True</code> if the points have the same x, y coordinates, and <code class="highlighter-rouge">False</code> otherwise.</p>

<p>Here are some examples of these last two methods after adding them to the class definition and saving the <code class="highlighter-rouge">point3.py</code> file.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p3</span>
<span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p4</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p3</span> <span class="o">==</span> <span class="n">p4</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">==</span> <span class="n">p2</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">+=</span> <span class="n">p2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p1</span> <span class="o">==</span> <span class="n">p4</span>
<span class="bp">True</span>
</code></pre>
    </div>
  </div>
</div>

<p>First we create 2 instances of the Point class. Then we create a third by adding the first 2 together. After creating a fourth instance of our Point class we do a couple of tests for equality. In the last two examples we perform a <code class="highlighter-rouge">+=</code> and then another test to demonstrate that <code class="highlighter-rouge">p1</code> now equals <code class="highlighter-rouge">p4</code>.</p>

<div class="important">

  <h4 id="special-methods">Special Methods</h4>
  <p>The Python interpreter recognises many special method names to allow classes to use built-in Python syntax. Each of these names begins and ends with two underscores. The names Python recognises include:
<code class="highlighter-rouge">__init__(self, [arg1, arg2, ...])</code>
	Constructor, executed when an instance of the class is created.
<code class="highlighter-rouge">__str__(self)</code>
	Must return a string giving an “informal” description of the object. Executed when <code class="highlighter-rouge">str(x)</code> or <code class="highlighter-rouge">print(x)</code> are called.
<code class="highlighter-rouge">__repr__(self)</code>
	Must return a string giving a “formal”, unambiguous description of the object. Executed when <code class="highlighter-rouge">repr(x)</code> is called, or when <code class="highlighter-rouge">&gt;&gt;&gt; x</code> is executed at the prompt. This string representation is often useful in debugging.
<code class="highlighter-rouge">__add__(self, other)</code>
<code class="highlighter-rouge">__sub__(self, other)</code>
<code class="highlighter-rouge">__mul__(self, other)</code>
<code class="highlighter-rouge">__div__(self, other)</code>
	Definition of addition, subtraction, multiplication and division. Equivalent to <code class="highlighter-rouge">self + other</code>, <code class="highlighter-rouge">self - other</code>, <code class="highlighter-rouge">self * other</code>, and <code class="highlighter-rouge">self / other</code> respectively.
<code class="highlighter-rouge">__lt__(self, other)</code>
<code class="highlighter-rouge">__le__(self, other)</code>
<code class="highlighter-rouge">__eq__(self, other)</code>
<code class="highlighter-rouge">__ne__(self, other)</code>
<code class="highlighter-rouge">__gt__(self, other)</code>
<code class="highlighter-rouge">__ge__(self, other)</code>
	Definitions of comparison operators <code class="highlighter-rouge">&lt;</code>, <code class="highlighter-rouge">&lt;=</code>, <code class="highlighter-rouge">==</code>, <code class="highlighter-rouge">!=</code>, <code class="highlighter-rouge">&gt;</code>, <code class="highlighter-rouge">&gt;= </code>respectively. For example, <code class="highlighter-rouge">x &lt;= y</code> executes the method call <code class="highlighter-rouge">__le__(x, y)</code>.</p>
</div>
<p>We now consider extending this ADT by providing accessor methods for getting the polar coordinates of the point. The polar coordinates specify a point by angle and distance rather than x and y coordinates. The new methods are given below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">r</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the distance of the point from the centre of the
        coordinate system (0, 0).
        """</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">theta</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the angle, in radians, from the x-axis of the point."""</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">r</code> method uses mathematics we know to calculate the radial position of the Point from the centre of our coordinates. The <code class="highlighter-rouge">theta</code> method uses the math libraries <code class="highlighter-rouge">atan2</code> method to find the angle from the x-axis. <code class="highlighter-rouge">atan2</code> is more accurate than <code class="highlighter-rouge">atan</code> as <code class="highlighter-rouge">atan2</code> returns a correct angle no matter what quadrant the point is in, whereas <code class="highlighter-rouge">atan</code> returns between pi/2 and -pi/2 radians.</p>

<p>After adding these methods into the class definition and saving, the file should now look like <code class="highlighter-rouge">point.py</code>. We can now look at a few examples of our last couple of methods.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">r</span><span class="p">()</span>
<span class="mf">5.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">theta</span><span class="p">()</span>
<span class="mf">0.9272952180016122</span>
</code></pre>
    </div>
  </div>
</div>

<h3 id="the-abstraction-barrier">The Abstraction Barrier</h3>
<p>Imagine we now write some graphics program that uses this ADT. Later we come back and reconsider the implementation of the ADT and decide to use polar coordinates rather than x, y coordinates for the internal representation of the data, like the <code class="highlighter-rouge">point_rt.py</code> file here. We make sure that the constructor and the method interfaces behave in the same way as before (have the same semantics). Now we go back to our graphics program we wrote. <strong>Do we need to change anything? No!</strong> Because we did not change the interface, we do not need to change anything in our graphics program. This is the key point about ADTs — we have completely separated the implementation from the use of the ADT via a well-defined interface. <strong>We respect the abstraction barrier!</strong></p>

<p><strong><em>Note</em></strong>: if our graphics program directly accessed the x and y coordinates instead of using the interface then we would be in trouble if we changed over to polar coordinates — we would have to rethink all our uses of Point objects! This is why we use the “private variable” naming convention to signal that the <code class="highlighter-rouge">_x</code> and <code class="highlighter-rouge">_y</code> values should not be accessed.</p>

<h2 id="a-ball-class">A Ball Class</h2>
<p>We now design another class that is similar to the one above in some ways, but we would probably not think of it as an ADT because it has more ‘behaviour’. What we want to do here is to model a ball and its motion on something like a billiard table without pockets.</p>

<p>To begin with, we look at what assumptions we will make. Firstly, to simplify the physics, we assume no friction and no loss of energy when the ball bounces off the table edge. Secondly, we assume a given radius of the ball and table dimensions. Lastly, we assume a given positive time step and that the time step is small enough to reasonably approximate the ball movement. For a first pass at this problem, we will also use the following <strong>global constants</strong>: <code class="highlighter-rouge">TOP</code>, <code class="highlighter-rouge">LEFT</code>, <code class="highlighter-rouge">BOTTOM</code>, <code class="highlighter-rouge">RIGHT</code> and <code class="highlighter-rouge">TIMESTEP</code> to describe the edges of the table and the time step. These, to Python, are variables but as we are not changing them in our code, they are called constants. It is naming convention to use all uppercase to indicate constants. We also assume all the balls have the same radius.</p>

<p>Next, we need to determine what is necessary to describe the <strong>state</strong> of the ball. We need to know its position, speed and direction. Finally, we need to know what methods we will need — in other words, what the ball interface will look like. We will need accessors to get the position, speed and direction and a mutator that modifies the balls state based on the given time step. We also add a test to determine if this ball is touching another ball. To do this we require some simple trigonometry and physics and so we will import the math module.</p>

<p>We will start with the class constructor and accessors and repr along with some of the base code as follows.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">math</span>

<span class="n">TOP</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">LEFT</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">BOTTOM</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="n">RIGHT</span> <span class="o">=</span> <span class="mf">4.0</span>
<span class="n">TIMESTEP</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="k">class</span> <span class="nc">Ball</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A class for simulating the movement of a ball on a billiard table.

    Class Invariant:
        0 &lt;= _direction &lt;= 2*pi
        and
        LEFT + radius &lt;= _x &lt;= RIGHT - radius
        and
        TOP + radius &lt;= _y &lt;= BOTTOM - radius
        and
        0 &lt;= _speed
    """</span>

    <span class="n">radius</span> <span class="o">=</span> <span class="mf">0.1</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Initialise a ball object with position, speed and direction.

        Parameters:
            x (float): x coordinate starting position of Ball.
            y (float): y coordinate starting position of Ball.
            speed (float): Speed at which Ball is moving.
            direction (float): Direction in which Ball is moving.

        Preconditions:
            The supplied values satisfy the class invariant.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span> <span class="o">=</span> <span class="n">speed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="n">direction</span>

    <span class="k">def</span> <span class="nf">get_centre_x</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the x coordinate of the Ball's centre."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>

    <span class="k">def</span> <span class="nf">get_centre_y</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the y coordinate of the Ball's centre."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>

    <span class="k">def</span> <span class="nf">get_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the speed of the Ball."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span>

    <span class="k">def</span> <span class="nf">get_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(float) Return the direction in which the ball is travelling."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Ball's string representation."""</span>
        <span class="k">return</span> <span class="s">'Ball({0:.2f}, {1:.2f}, {2:.2f}, {3:.2f})'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>Firstly, in the comments for the class itself we have included a <strong>class invariant</strong>. This is similar to the <code class="highlighter-rouge">loop invariant</code> we briefly discussed in week 5. The idea is that the class invariant is a property that should be true over the lifetime of each object of the class. In other words, it should be true when the object is first created and after each method is called. This is typically a formula that interrelates the instance variables. (To shorten the formula we have omitted the <code class="highlighter-rouge">self.</code> from the instance variables.) Even in a simple class like this, the class invariant can be a big help when it comes to writing methods. In particular, for the step method we can assume the class invariant is true when the method is called, and given that, we need to guarantee the class invariant is true at the end of the method.</p>

<p>The next part of the class is the assignment to the <code class="highlighter-rouge">radius</code>. This is a <strong>class variable</strong>. Class variables are variables that are common to all instances of the class — all instances of the class share this variable and if any instance changes this variable all instances ‘will see the change’. As an example if we execute <code class="highlighter-rouge">self.radius = 0.2</code> than all ball instances will now have that radius. Since all the balls have the same radius, we make it a class variable.</p>

<p>The constructor (the <code class="highlighter-rouge">__init__</code> method) initialises the instance variables. There are then the four accessor methods which return the values of the instance variables. This is followed by the <code class="highlighter-rouge">__rer__</code> method so that we can print our Ball instances out nicely.</p>

<p>After we save the code in <code class="highlighter-rouge">ball1.py</code> we can test with a few examples.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Ball</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">0.00</span><span class="p">,</span> <span class="mf">2.00</span><span class="p">,</span> <span class="mf">3.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">get_centre_x</span><span class="p">()</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">get_centre_y</span><span class="p">()</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">get_dir</span><span class="p">()</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">get_speed</span><span class="p">()</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">radius</span>
<span class="mf">0.1</span>
</code></pre>
    </div>
  </div>
</div>

<p>This is not particularly useful so let’s look at writing the step method that calculates position of the ball in the next <code class="highlighter-rouge">TIMESTEP</code> and moves the ball to that location. This method is going to require two other methods to enable the ball to bounce off the walls if it reaches one. The following is the code of the methods.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">_reflect_vertically</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Change the direction as the ball bounces off a vertical edge."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>

    <span class="k">def</span> <span class="nf">_reflect_horizontally</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Change the direction as the ball bounces off a horizontal edge."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span>


    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Advance time by TIMESTEP - moving the ball."""</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+=</span> <span class="n">TIMESTEP</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_direction</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">+=</span> <span class="n">TIMESTEP</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_speed</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_direction</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">&lt;</span> <span class="n">LEFT</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">LEFT</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reflectVertically</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">&gt;</span> <span class="n">RIGHT</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">RIGHT</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reflectVertically</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>  <span class="o">&lt;</span> <span class="n">TOP</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">TOP</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reflectHorizontally</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">&gt;</span> <span class="n">BOTTOM</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">BOTTOM</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reflectHorizontally</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>Notice the methods <code class="highlighter-rouge">_reflect_vertically</code> and <code class="highlighter-rouge">_reflect_horizontally</code> begin with underscores. As we do not want these two functions to be accessed outside the class, we flag them as private.</p>

<p>These two methods do exactly what they are named. <code class="highlighter-rouge">_reflect_horizontally</code> reflects the ball off any horizontal edge. This method simply takes the direction of the ball away from 2 pi, perfectly bouncing the ball off the wall at the same angle it hit the wall. <code class="highlighter-rouge">_reflect_vertically</code> is a little trickier as we need to make sure our class invariant is not false. To bounce off a vertical wall we simply take our direction away from pi. This is mathematically correct but it could make our class invariant false. For example, if the ball is travelling at pi + 0.1 radians and we do this bounce then our direction is now -0.1 radians. As this is a negative number we add 2 pi to it so that we get the positive angle (2 pi - 0.1 radians). This is the same angle as -0.1 radians and makes our class invariant true again.</p>

<p>The <code class="highlighter-rouge">step</code> method starts off updating the x, y coordinates of the ball by increasing the relevant coordinate by the <code class="highlighter-rouge">TIMESTEP</code> times the speed times the relevant component of the direction. Next, it needs to check if the ball has met a boundary of the table so that the ball does not break the class invariant by leaving the table. This is done, first by checking if it has left a vertical edge by seeing if the ball’s x position is within radius distance of a vertical wall. If it is then the x position is shifted so that it is outside a radius distance of the wall and reflected using the <code class="highlighter-rouge">_reflect_vertically</code> method. A similar method is used for if the ball is on a horizontal edge.</p>

<div class="aside">

  <h4 id="aside-proving-the-class-invariant">Aside: Proving the Class Invariant</h4>
  <p><strong>Warning: This is not an easy proof!</strong>
We need to show that each method preserves the class invariant. The following is a proof of each method and how they preserve the class invariant.
We start with the easier one — <code class="highlighter-rouge">_reflect_horizontally</code>. Let <code class="highlighter-rouge">d0</code> and <code class="highlighter-rouge">d1</code> be the initial and final values of <code class="highlighter-rouge">self._direction</code>.</p>

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>We want to show that if
0 &lt;= d0 &lt;= 2*pi
then
0 &lt;= d1 &lt;= 2*pi
where
d1 == 2*pi - d0
(We use ==&gt; for 'implies' below)

0 &lt;= d0 &lt;= 2*pi
==&gt;
0 &gt;= -d0 &gt;= -2*pi           (multiplying by -1)
==&gt;
2*pi &gt;= 2*pi - d0 &gt;= 0      (adding 2*pi)

QED
</code></pre>
    </div>
  </div>
  <p>We now prove the property is true for <code class="highlighter-rouge">_reflect_vertically</code>. Here we let <code class="highlighter-rouge">d0</code> be the initial value of <code class="highlighter-rouge">self._direction</code>, <code class="highlighter-rouge">d1</code> be the value after the first assignment and <code class="highlighter-rouge">d2</code> be the final value. In this case there is an if statement involved and so we have to consider two cases: <code class="highlighter-rouge">d1 &gt;= 0</code> and <code class="highlighter-rouge">d1 &lt; 0</code>.
The first case.</p>
  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>We want to show that if
0 &lt;= d0 &lt;= 2*pi and d1 &gt;= 0
then
0 &lt;= d2 &lt;= 2*pi
In this case the body of the if statement is not executed and so
d2 == d1 == pi - d0

0 &lt;= d0 &lt;= 2*pi
==&gt;
0 &gt;= -d0 &gt;= -2*pi         (multiplying by -1)
==&gt;
pi &gt;= pi - d0 &gt;= -pi      (adding pi)
==&gt;
pi &gt;= pi - d0 &gt;= 0        (d1 &gt;= 0 i.e. pi - d0 &gt;= 0)

QED


The second case.

We want to show that if
0 &lt;= d0 &lt;= 2*pi and d1 &lt; 0
then
0 &lt;= d2 &lt;= 2*pi
In this case the body of the if statement is executed and so
d2 == 2*pi + d1  and d1 == pi - d0 and so d2 == 3*pi - d0

d1 &lt; 0
==&gt;
pi - d0 &lt; 0
==&gt;
3*pi -d0 &lt; 2*pi            (adding 2*pi)
and
d0 &lt;= 2*pi
==&gt;
-d0 &gt;= -2*pi               (multiplying by -1)
==&gt;
3*pi - d0 &gt;= pi            (adding 3*pi)
and so
pi &lt;= 3*pi - d0 &lt;= 2*pi

QED
</code></pre>
    </div>
  </div>
  <p>Now we look at the hardest part of the proof — that the ball stays on the table. The method has four if statements and below we will only consider the case when the first test is satisfied — the other cases follow in a similar manner. We let <code class="highlighter-rouge">x0</code> be the initial value of <code class="highlighter-rouge">self._x</code>, <code class="highlighter-rouge">x1 be the value</code> after the first assignment and <code class="highlighter-rouge">x2</code> be the final value. We also let <code class="highlighter-rouge">s</code> be <code class="highlighter-rouge">self._speed</code>, <code class="highlighter-rouge">d</code> be <code class="highlighter-rouge">self._direction</code> and <code class="highlighter-rouge">r</code> be <code class="highlighter-rouge">Ball.r</code>.</p>

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>So we can assume
left+r &lt;= x0 &lt;= right-r
and
0 &lt;= s*timestep &lt; r
and
x1 &lt; left + r    (the test in the first if statement is true)
and we want to show
left+r &lt;= x2 &lt;= right-r

We have
x1 == x0 + s*timestep*cos(d) and x2 == 2*(left+r) - x1

Now
x1 &lt; left + r
==&gt;
-x1 &gt;= -left - r                     (multiplying by -1)
==&gt;
2*(left+r) - x1 &gt;= left+r            (adding 2*(left+r))
==&gt;
x2 &gt;= left+r
(one half of the required inequality)

We now need to show
2*(left+r) - x0 - s*timestep*cos(d) &lt;= right-r

left+r &lt;= x0
==&gt;
left+r - x0 &lt;= 0
==&gt;
2*(left+r) - x0 + r &lt;= left + 2*r                     (adding left + 2*r)
==&gt;
2*(left+r) - x0 + s*timestamp &lt;= left + 2*r           (r &gt;= s*timestamp)
==&gt;
2*(left+r) - x0 - s*timestamp*cos(d) &lt;= left + 2*r    (1 &gt;= -cos(d) and s*timestamp &gt;= 0)
==&gt;
x2 &lt;= left + 2*r

So provided left+2*r &lt;= right - r  (i.e. right - left &gt;= 3*r)
then the required property is true.
</code></pre>
    </div>
  </div>
  <p>This means that, if we insist that the table is at least one and a half balls long and wide then the step method will maintain the class invariant.</p>

  <p>The point of this exercise is to show that it is possible to prove useful properties about the class and therefore of any object of the class. Here we showed that, provided the global variables satisfy some reasonable constraints, any ball from the Ball class (that initially satisfies the class invariant) will stay on the table.</p>
</div>

<p>After adding the methods and saving the code <code class="highlighter-rouge">ball2.py</code> we can run a simple test.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Ball</span><span class="p">(</span><span class="mf">0.51</span><span class="p">,</span> <span class="mf">0.51</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">b</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

<span class="n">Ball</span><span class="p">(</span><span class="mf">0.58</span><span class="p">,</span> <span class="mf">0.58</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">0.72</span><span class="p">,</span> <span class="mf">0.72</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">0.79</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">0.86</span><span class="p">,</span> <span class="mf">0.86</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">0.93</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.08</span><span class="p">,</span> <span class="mf">1.08</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.15</span><span class="p">,</span> <span class="mf">1.15</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.22</span><span class="p">,</span> <span class="mf">1.22</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.29</span><span class="p">,</span> <span class="mf">1.29</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.36</span><span class="p">,</span> <span class="mf">1.36</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.43</span><span class="p">,</span> <span class="mf">1.43</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.50</span><span class="p">,</span> <span class="mf">1.50</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.57</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.64</span><span class="p">,</span> <span class="mf">1.64</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.71</span><span class="p">,</span> <span class="mf">1.71</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.78</span><span class="p">,</span> <span class="mf">1.78</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.85</span><span class="p">,</span> <span class="mf">1.85</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.79</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.92</span><span class="p">,</span> <span class="mf">1.88</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">5.50</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">1.99</span><span class="p">,</span> <span class="mf">1.81</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">5.50</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">2.07</span><span class="p">,</span> <span class="mf">1.73</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">5.50</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">2.14</span><span class="p">,</span> <span class="mf">1.66</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">5.50</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">2.21</span><span class="p">,</span> <span class="mf">1.59</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">5.50</span><span class="p">)</span>
<span class="n">Ball</span><span class="p">(</span><span class="mf">2.28</span><span class="p">,</span> <span class="mf">1.52</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">5.50</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The last method we will define is a method to see if 2 balls are touching. This method will be useful when we have multiple Balls. Here is the method definition.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">touching</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""(bool) Return True iff this Ball is touching other."""</span>
        <span class="k">return</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">get_centre_</span><span class="p">())</span> <span class="o">**</span> <span class="mi">2</span>
                 <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">get_centre_y</span><span class="p">())</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
               <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>This method gets the straight-line distance between the two balls and returns true if and only if (iff) the distance is less than or equal to the distance of two ball radii.</p>

<p>After adding this method to our class we can save our <code class="highlighter-rouge">ball.py</code> code.</p>

<h3 id="using-the-ball-class">Using the Ball Class</h3>
<p>Where things get really interesting is when we create several instances of the class. Below is an example to show the power of object-oriented programming — once we have defined the class we can create as many instances as we want!</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">balls</span> <span class="o">=</span> <span class="p">[</span><span class="n">Ball</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
             <span class="n">Ball</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
             <span class="n">Ball</span><span class="p">(</span><span class="mf">1.4</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">balls</span>
<span class="p">[</span><span class="n">Ball</span><span class="p">(</span><span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">),</span> <span class="n">Ball</span><span class="p">(</span><span class="mf">1.20</span><span class="p">,</span> <span class="mf">1.20</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">),</span> <span class="n">Ball</span><span class="p">(</span><span class="mf">1.40</span><span class="p">,</span> <span class="mf">1.40</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">2.00</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">balls</span> <span class="p">:</span> 
        <span class="n">b</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">balls</span>
<span class="p">[</span><span class="n">Ball</span><span class="p">(</span><span class="mf">1.10</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">),</span> <span class="n">Ball</span><span class="p">(</span><span class="mf">1.25</span><span class="p">,</span> <span class="mf">1.28</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">),</span> <span class="n">Ball</span><span class="p">(</span><span class="mf">1.36</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">2.00</span><span class="p">)]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">some_touch</span><span class="p">(</span><span class="n">balls</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">b1</span> <span class="ow">in</span> <span class="n">balls</span> <span class="p">:</span>
                <span class="k">for</span> <span class="n">b2</span> <span class="ow">in</span> <span class="n">balls</span> <span class="p">:</span>
                        <span class="k">if</span> <span class="n">b1</span> <span class="o">!=</span> <span class="n">b2</span> <span class="ow">and</span> <span class="n">b1</span><span class="o">.</span><span class="n">touching</span><span class="p">(</span><span class="n">b2</span><span class="p">)</span> <span class="p">:</span>
                                <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">while</span> <span class="ow">not</span> <span class="n">some_touch</span><span class="p">(</span><span class="n">balls</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">balls</span> <span class="p">:</span> 
                <span class="n">b</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">balls</span>
<span class="p">[</span><span class="n">Ball</span><span class="p">(</span><span class="mf">1.20</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">),</span> <span class="n">Ball</span><span class="p">(</span><span class="mf">3.57</span><span class="p">,</span> <span class="mf">1.49</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">4.14</span><span class="p">),</span> <span class="n">Ball</span><span class="p">(</span><span class="mf">1.13</span><span class="p">,</span> <span class="mf">0.91</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">5.14</span><span class="p">)]</span>
</code></pre>
    </div>
  </div>
</div>

<p>The next step would, of course, be to program the interaction between the balls. We could do this either by writing a collection of functions to manage the interaction of the balls and the motion or we could define a Table class (for example) which would contain a collection of balls and a step method for the table which would involve stepping each ball and defining how the balls bounce off each other.</p>

<p>Is defining a Table class worthwhile? It could be argued either way. If there was only ever going to be one table then it could be argued that creating a class would be overkill. On the other hand, collecting all the information and behaviour of the table into one place (a class) could be a good idea.</p>

<h2 id="summary">Summary</h2>
<p>In this section we have introduced the idea of class design. Once we have defined a class we can take any number of instances of the class. This is a simple, but powerful form of <strong>reuse</strong>. 
Things to consider when designing classes:</p>
<ul>
  <li>What assumptions am I making?</li>
  <li>What data do I need to store?
    <ul>
      <li>Create instance variables to capture properties associated with individual objects.</li>
      <li>Create class variables to capture shared properties</li>
    </ul>
  </li>
  <li>Are the values of variables interrelated or constrained? — Add a class invariant to the class comments.</li>
  <li>What should the interface look like? — What are the ‘public’ methods?</li>
  <li>Name the class after the type of objects it produces.</li>
  <li>Name variables after their roles and make instance variables private.</li>
  <li>What information does the constructor need to create an object? Add parameters to the <code class="highlighter-rouge">__init__</code> method and give them meaningful names.</li>
  <li>Name each method to suggest its role.</li>
  <li>Comment each method before writing any code!</li>
  <li>Don’t ‘over complicate’ methods — methods should, where possible, perform just <strong>one</strong> task.</li>
  <li>What helper methods do I need? — make them private.</li>
  <li>For testing purposes write the <code class="highlighter-rouge">__repr__</code> method.</li>
</ul>

<blockquote class="blockquote">
  <p> The Greek shall inherit the Earth </p>
</blockquote>

<h1 id="inheritance">Inheritance</h1>
<h2 id="introduction">Introduction</h2>
<p>We are going to look at a class that represents a simple television. This class will have a channel and a power state. We will have methods to turn the TV on and off and change the channel up and down. The following is the class definition.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">TV</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Representation of a simple television."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">turn_on</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Turns the TV on."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">turn_off</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Turns the TV off."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">channel_up</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Changes the channel up by 1.
           If the channel goes above 100 then loops back to 1.
        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">channel_down</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Changes the channel down by 1.
           If the channel goes below 1 then loops back to 100.
        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="k">return</span> <span class="s">"I'm a TV on channel {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">return</span> <span class="s">"I'm a TV that is turned off"</span>

</code></pre>
    </div>
  </div>
</div>

<p>Now if we save our file as <code class="highlighter-rouge">tv.py</code> we can have a look at the functionality of an object of this class.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; tv = TV()
&gt;&gt;&gt; str(tv)
"I'm a TV that is turned off"
&gt;&gt;&gt; tv.turn_on()
&gt;&gt;&gt; str(tv)
"I'm a TV on channel 1"
&gt;&gt;&gt; tv.channel_down()
&gt;&gt;&gt; str(tv)
"I'm a TV on channel 100"
&gt;&gt;&gt; for i in range(20) :
    tv.channel_up()


&gt;&gt;&gt; str(tv)
"I'm a TV on channel 20"
</code></pre>
    </div>
  </div>
</div>

<p>It is clear that this TV does not have much functionality. As a TV it is also a little annoying to have to keep hitting the change channel to get to the channel of interest. What if we wanted another “Deluxe TV” class that could ‘jump’ straight to a channel? One way to do this is to copy and modify our code. A better way to do this is to write a class that includes the same functionality as our existing TV class but with a little extra. Object-oriented programming does this easily through the use of <strong>inheritance</strong>. Inheritance is the concept where one class, the <strong>subclass</strong>, ‘inherits’ properties and methods of another existing class, the <strong>superclass</strong>. This is another example of where we can reuse existing code without having to duplicate it.</p>

<p>Let’s now write a new class that represents a simple Deluxe TV where it is possible to ‘jump’ to a selected channel. Here is the class definition.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">DeluxeTV</span><span class="p">(</span><span class="n">TV</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Representation of a Deluxe TV where the channel can be set
       without using up and down.
    """</span>

    <span class="k">def</span> <span class="nf">set_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Sets the TV channel to the indicated 'channel' if the TV is on.
           If 'channel' is invalid an error message is output.
        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">channel</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">=</span> <span class="n">channel</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"{0} is not a valid channel"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
</code></pre>
    </div>
  </div>
</div>

<p>First notice in the line <code class="highlighter-rouge">class DeluxeTV(TV)</code> we have TV instead of <code class="highlighter-rouge">object</code> in the brackets. This says that <code class="highlighter-rouge">DeluxeTV</code> inherits from TV. In fact every other class that we have written so far has inherited from the <code class="highlighter-rouge">object</code> class. The <code class="highlighter-rouge">object</code> class is the type which all other classes should inherit from, either directly or indirectly (as in this case). The next thing to notice is that <code class="highlighter-rouge">DeluxeTV</code> does not have an <code class="highlighter-rouge">__init__</code> method. As we are not adding or changing any data structures of our TV class we do not need an <code class="highlighter-rouge">__init__</code> method as it uses the inherited method from TV. Our new class simply has the one method definition that allows us to set the channel.</p>

<p>We can now add this class definition after our <code class="highlighter-rouge">TV</code> class definition and save a <code class="highlighter-rouge">deluxe_tv.py</code> file and have a look at the functionality of our new TV.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; tv = DeluxeTV()
&gt;&gt;&gt; str(tv)
"I'm a TV that is turned off"
&gt;&gt;&gt; tv.turn_on()
&gt;&gt;&gt; str(tv)
"I'm a TV on channel 1"
&gt;&gt;&gt; tv.channel_up()
&gt;&gt;&gt; str(tv)
"I'm a TV on channel 2"
&gt;&gt;&gt; tv.set_channel(42)
&gt;&gt;&gt; str(tv)
"I'm a TV on channel 42"
&gt;&gt;&gt; tv.set_channel(200)
"200 is not a valid channel"
&gt;&gt;&gt; str(tv)
"I'm a TV on channel 42"
</code></pre>
    </div>
  </div>
</div>

<p>The first few examples show that we have not changed the other functionality of the TV. This is because our <code class="highlighter-rouge">DeluxeTV</code> has all the methods of our <code class="highlighter-rouge">TV</code>. The last two examples shows our new functionality and that we can now ‘jump’ to any valid channel.</p>

<h2 id="overriding-methods">Overriding Methods</h2>
<p>Let’s continue with our TV classes and write a new, Super Deluxe TV that extends the functionality of a <code class="highlighter-rouge">DeluxeTV</code>, and can store favourite channels. We will also make the channel up and down methods move through the favourite channels only. In this case, not only will we need to add new methods to store and remove favourite channels, but we will need to make different <code class="highlighter-rouge">channel_up</code> and <code class="highlighter-rouge">channel_down</code> methods.</p>

<p>We can do this by redefining <code class="highlighter-rouge">channel_up</code> and <code class="highlighter-rouge">channel_down</code>. Redefining an existing method of a superclass is known as <strong>overriding</strong> the method. This is useful as not all classes want to have the same functionality for each method of its superclass. When we call <code class="highlighter-rouge">tv.channel_up()</code> and <code class="highlighter-rouge">tv.channel_down()</code> on a <code class="highlighter-rouge">SuperDeluxeTV</code>, the new definitions will be executed, and the old definitions will be ignored.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">SuperDeluxeTV</span><span class="p">(</span><span class="n">DeluxeTV</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Representation of a Super Delux TV where channels can be saved
       to favourites. Channel up and down goes through the favourites.
    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span> <span class="o">=</span> <span class="p">[]</span>          <span class="c1"># All favourite TV channels.
</span>
    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Stores the current channel as one of the favourites."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Removes the current channel so that it is no longer a favourite."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"{0} is not in favourites"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">channel_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Moves to the next higher favourite channel.

           It does not matter if the current channel is a favourite or not.
           Channel will wrap around to 1 if it passes MAX_CHANNEL while 
           searching for the next higher favourite channel.
        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span> <span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"No favourites stored"</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span> <span class="p">:</span>
                        <span class="k">break</span>

    <span class="k">def</span> <span class="nf">channel_down</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Moves to the previous (lower) favourite channel.

           It does not matter if the current channel is a favourite or not.
           Channel will wrap around to MAX_CHANNEL if it passes 1 while 
           searching for the previous favourite channel.
        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span> <span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">"No favourites stored"</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="o">=</span> <span class="mi">100</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_favourites</span> <span class="p">:</span>
                        <span class="k">break</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_power</span> <span class="p">:</span>
            <span class="k">return</span> <span class="s">"I'm a Super Deluxe TV on channel {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">return</span> <span class="s">"I'm a Super Deluxe TV that is turned off"</span>
</code></pre>
    </div>
  </div>
</div>

<p>In the class above, we also need to override the <code class="highlighter-rouge">__init__</code> method so that the favourites list will be created. However, unlike the <code class="highlighter-rouge">channel_up</code> and <code class="highlighter-rouge">channel_down</code> methods, we still want to keep the existing <code class="highlighter-rouge">__init__</code> functionality from the <code class="highlighter-rouge">DeluxeTV</code> and <code class="highlighter-rouge">TV</code> classes. To do this, we need to explicitly call the <code class="highlighter-rouge">__init__</code> method of the superclass <code class="highlighter-rouge">(DeluxeTV): super().__init__()</code>. The <code class="highlighter-rouge">super</code> function works out what superclass has the method attempting to be called and returns that class, allowing the method to operate on the superclass type. It is simply required from then to input the inputs required to create that subclass. Once that is done, we can add in the additional code to create the favourites list.</p>

<p>We have also overridden the <code class="highlighter-rouge">__str__</code> method to give a slightly different text representation.</p>

<p>After saving our code as <code class="highlighter-rouge">super_deluxe_tv.py</code> we can have a look at a few examples of our new class.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; tv = SuperDeluxeTV()
&gt;&gt;&gt; tv.turn_on()
&gt;&gt;&gt; str(tv)
"I'm a Super Deluxe TV on channel 1"
&gt;&gt;&gt; tv.channel_up()
No favourites stored
&gt;&gt;&gt; tv.set_channel(42)
&gt;&gt;&gt; str(tv)
"I'm a Super Deluxe TV on channel 42"
&gt;&gt;&gt; tv.store()
&gt;&gt;&gt; tv.set_channel(87)
&gt;&gt;&gt; tv.store()
&gt;&gt;&gt; tv.channel_up()
&gt;&gt;&gt; str(tv)
"I'm a Super Deluxe TV on channel 42"
&gt;&gt;&gt; tv.channel_up()
&gt;&gt;&gt; str(tv)
"I'm a Super Deluxe TV on channel 87"
&gt;&gt;&gt; tv.set_channel(50)
&gt;&gt;&gt; tv.channel_down()
&gt;&gt;&gt; str(tv)
"I'm a Super Deluxe TV on channel 42"
</code></pre>
    </div>
  </div>
</div>

<p>In fact we have already been overriding methods in the classes that we have previously written. The <code class="highlighter-rouge">__init__</code>, <code class="highlighter-rouge">__str__</code>, <code class="highlighter-rouge">__eq__</code>, etc. methods that we have written all override the existing, corresponding, method in the <code class="highlighter-rouge">object</code> class.</p>

<div class="important">

  <h4 id="inheritance-syntax">Inheritance Syntax</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Class&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SuperClass&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;...&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics">Semantics</h4>
  <p>A new class, <code class="highlighter-rouge">Class</code>, will be created, <strong>inheriting</strong> from <code class="highlighter-rouge">SuperClass</code>. Instances will be able to use all the methods and class variables defined in the superclass, as well as any methods defined in <code class="highlighter-rouge">Class</code>. Instances will also be able to access methods and class variables of the superclass of <code class="highlighter-rouge">SuperClass</code>, and so on through the superclasses (these are all <strong>indirect superclasses</strong> of <code class="highlighter-rouge">Class</code>, and <code class="highlighter-rouge">SuperClass</code> is a <strong>direct superclass</strong>). The collection of superclass-subclass relationships is known as the <strong>inheritance hierarchy</strong>.</p>

  <p>If <code class="highlighter-rouge">Class</code> defines a method with the same name as one in a superclass (direct or indirect), then that method has been <strong>overridden</strong>. When the method <code class="highlighter-rouge">instance.method(arg1, ...)</code> is called, the method defined in <code class="highlighter-rouge">Class</code> is used. However, the overridden method can still be accessed directly by calling <code class="highlighter-rouge">super().method(arg1, ...) </code></p>
</div>

<h2 id="method-resolution-order">Method Resolution Order</h2>
<p>When we override a method, we are creating a new method with the same name. This raises an issue — how does Python determine which method to call? Python has a set of rules that determine which class the method will come from, known as the <strong>Method Resolution Order</strong>, or <strong>MRO</strong>. As an example, consider the four classes below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>

    <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>

    <span class="k">def</span> <span class="nf">fg</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">**</span> <span class="mi">2</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">B</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">fg</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">fg</span><span class="p">()</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>

<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>After saving this code as <code class="highlighter-rouge">mro.py</code>, we can look at the functionality of our classes. To start with, let’s just look at what an object of class A does.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">_x</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span><span class="p">()</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">g</span><span class="p">()</span>
<span class="mi">6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">fg</span><span class="p">()</span>
<span class="o">-</span><span class="mi">3</span>
</code></pre>
    </div>
  </div>
</div>

<p>This class is straightforward. The constructor <code class="highlighter-rouge">A(3)</code> calls the <code class="highlighter-rouge">__init__</code> method, which creates an attribute <code class="highlighter-rouge">_x</code> with the value <code class="highlighter-rouge">3</code>. Method <code class="highlighter-rouge">f</code> returns the value of <code class="highlighter-rouge">_x</code>, method <code class="highlighter-rouge">g</code> returns twice <code class="highlighter-rouge">_x</code> and method <code class="highlighter-rouge">fg</code> returns the difference between the results of these two methods.</p>

<p>Now, let’s have a look at using an object of the <code class="highlighter-rouge">B</code> class.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">_x</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">f</span><span class="p">()</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">g</span><span class="p">()</span>
<span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">fg</span><span class="p">()</span>
<span class="o">-</span><span class="mi">6</span>
</code></pre>
    </div>
  </div>
</div>

<p>Let’s consider what happens when we construct the object <code class="highlighter-rouge">B(3)</code>. The Python interpreter will create a new object and attempt to call the <code class="highlighter-rouge">__init__</code> method. However, the <code class="highlighter-rouge">B</code> class does not have a definition of the <code class="highlighter-rouge">__init__</code> method. Python then looks to the superclass for an <code class="highlighter-rouge">__init__</code> method. The superclass is <code class="highlighter-rouge">A</code>, which has an <code class="highlighter-rouge">__init__</code> method. This <code class="highlighter-rouge">__init__</code> method is called, which creates an attribute <code class="highlighter-rouge">_x</code> with the value <code class="highlighter-rouge">3</code>.</p>

<p>What happens when we call <code class="highlighter-rouge">b.f()</code>? The <code class="highlighter-rouge">B</code> class does not have a definition of the <code class="highlighter-rouge">f</code> method. Therefore the interpreter looks in the superclass A for an <code class="highlighter-rouge">f</code> method, which it finds. This method is used, which returns the value of <code class="highlighter-rouge">b.x</code> (which is 3).</p>

<p>Next the <code class="highlighter-rouge">g</code> method is called. The <code class="highlighter-rouge">B</code> class has a <code class="highlighter-rouge">g</code> method so the interpreter uses that <code class="highlighter-rouge">g</code> method, returning the square of <code class="highlighter-rouge">x</code>, in this case 9.</p>

<p>When the <code class="highlighter-rouge">fg</code> method is called, <code class="highlighter-rouge">B</code> again does not have this method so the interpreter looks back to the superclass and uses the fg method from <code class="highlighter-rouge">A</code>, which returns <code class="highlighter-rouge">self.f() - self.g()</code>. Because the <code class="highlighter-rouge">fg</code> method was called with a <code class="highlighter-rouge">B</code> object, the interpreter will look for <code class="highlighter-rouge">f</code> and <code class="highlighter-rouge">g</code> methods in the <code class="highlighter-rouge">B</code> class. As before, <code class="highlighter-rouge">B</code> does not have a definition of <code class="highlighter-rouge">f</code>, so the interpreter uses the definition from <code class="highlighter-rouge">A</code>, which returns 3. The process is repeated for the <code class="highlighter-rouge">g</code> method call, but as the <code class="highlighter-rouge">B</code> class has a definition of <code class="highlighter-rouge">g</code>, that method is called, which returns 9. So the return value of <code class="highlighter-rouge">b.fg()</code> is <code class="highlighter-rouge">3 - 9</code>, which is -6.</p>

<p>Now, let’s look at using an object of the <code class="highlighter-rouge">C</code> class.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">_x</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">_y</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">f</span><span class="p">()</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">g</span><span class="p">()</span>
<span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">fg</span><span class="p">()</span>
<span class="o">-</span><span class="mi">30</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">C</code> class inherits from the B class, which in turn inherits from <code class="highlighter-rouge">A</code>. When <code class="highlighter-rouge">C(3, 5)</code> is constructed, Python will look for an <code class="highlighter-rouge">__init__</code> method in <code class="highlighter-rouge">C</code>, which it finds and uses. This calls <code class="highlighter-rouge">super().__init__(3)</code> method. The <code class="highlighter-rouge">super()</code> function will first look in <code class="highlighter-rouge">B</code> for an <code class="highlighter-rouge">__init__</code> method. As <code class="highlighter-rouge">B</code> does not have an <code class="highlighter-rouge">__init__</code> method, super will look at <code class="highlighter-rouge">B</code>’s super class, which is <code class="highlighter-rouge">A</code> for an <code class="highlighter-rouge">__init__</code> method. As <code class="highlighter-rouge">A</code> does have a <code class="highlighter-rouge">__init__</code> method, super evaluates to <code class="highlighter-rouge">A</code>. Therefore, the <code class="highlighter-rouge">super().__init__(3)</code> line in <code class="highlighter-rouge">C</code>’s <code class="highlighter-rouge">__init__</code> method results in calling <code class="highlighter-rouge">A.__init__(3)</code>. <code class="highlighter-rouge">A</code>’s <code class="highlighter-rouge">__init__</code> will, therefore, set the value of the attribute <code class="highlighter-rouge">x</code> to 3. The next line in <code class="highlighter-rouge">C.__init__</code> will now run, setting the value of the attribute <code class="highlighter-rouge">y</code> to 5.</p>

<p>When <code class="highlighter-rouge">c.f()</code> is called, <code class="highlighter-rouge">C</code> does not have an <code class="highlighter-rouge">f</code> method, so the interpreter looks in the superclass, <code class="highlighter-rouge">B</code>. <code class="highlighter-rouge">B</code> also does not have an <code class="highlighter-rouge">f</code> method so the interpreter looks in <code class="highlighter-rouge">B</code>’s superclass, which is <code class="highlighter-rouge">A</code>. The <code class="highlighter-rouge">f</code> method of <code class="highlighter-rouge">A</code> is finally used, which returns the value of the attribute <code class="highlighter-rouge">_x</code>.</p>

<p>The process is the same again for the <code class="highlighter-rouge">g</code> method call. As <code class="highlighter-rouge">C</code> does not have a <code class="highlighter-rouge">g</code> method, the interpreter looks in the <code class="highlighter-rouge">B</code> class. <code class="highlighter-rouge">B</code> does have a <code class="highlighter-rouge">g</code> method, so that is used, and returns <code class="highlighter-rouge">3 ** 2</code>.</p>

<p>Next is the <code class="highlighter-rouge">fg</code> method call on <code class="highlighter-rouge">C</code>. This method first calls <code class="highlighter-rouge">super().fg()</code> which will look for an <code class="highlighter-rouge">fg</code> method first in the <code class="highlighter-rouge">B</code> class. As <code class="highlighter-rouge">B</code> doesn’t have an <code class="highlighter-rouge">fg</code> method, the super function will look in <code class="highlighter-rouge">B</code>’s superclass, which is <code class="highlighter-rouge">A</code>, and, therefore, <code class="highlighter-rouge">A.fg()</code> is called. This method follows the process just described to call both the <code class="highlighter-rouge">f</code> method from <code class="highlighter-rouge">A</code> and the <code class="highlighter-rouge">g</code> method from <code class="highlighter-rouge">B</code> and subtract the results together, performing the operation <code class="highlighter-rouge">3 - 9</code>. The result of the <code class="highlighter-rouge">super().fg()</code> call is <code class="highlighter-rouge">-6</code>, which is multiplied by the attribute <code class="highlighter-rouge">y</code> (5) to give -30 as the final result.</p>

<p>Finally, let’s have a look at using an object of the <code class="highlighter-rouge">D</code> class.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="n">D</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o">.</span><span class="n">_x</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o">.</span><span class="n">f</span><span class="p">()</span>
<span class="o">-</span><span class="mi">12</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o">.</span><span class="n">g</span><span class="p">()</span>
<span class="mi">6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="o">.</span><span class="n">fg</span><span class="p">()</span>
<span class="o">-</span><span class="mi">18</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">D</code> class is similar to the <code class="highlighter-rouge">B</code> class. The <code class="highlighter-rouge">f</code> method call on <code class="highlighter-rouge">D</code> uses the <code class="highlighter-rouge">f</code> method defined in <code class="highlighter-rouge">D</code>. This method calls <code class="highlighter-rouge">self.g()</code>. <code class="highlighter-rouge">D</code> does not have a <code class="highlighter-rouge">g</code> method, so the interpreter calls the <code class="highlighter-rouge">g</code> method from the superclass (<code class="highlighter-rouge">A</code>) class performing the operation <code class="highlighter-rouge">-2 * 2 * 3</code>. The <code class="highlighter-rouge">g</code> method call on <code class="highlighter-rouge">D</code> works exactly the same way.</p>

<p>When the <code class="highlighter-rouge">fg</code> method of <code class="highlighter-rouge">D</code> is called the interpreter uses the <code class="highlighter-rouge">fg</code> method of <code class="highlighter-rouge">A</code>, as <code class="highlighter-rouge">D</code> does not have an <code class="highlighter-rouge">fg</code> method defined. This calls the <code class="highlighter-rouge">f</code> method using the <code class="highlighter-rouge">f</code> method of <code class="highlighter-rouge">D</code>, which in turn uses the <code class="highlighter-rouge">g</code> method of <code class="highlighter-rouge">A</code>, and then calls the <code class="highlighter-rouge">g</code> method of <code class="highlighter-rouge">A</code> again. The results are then subtracted performing the operation <code class="highlighter-rouge">-12 - 6</code>.</p>

<p>In summary, the MRO can be easily determined by simply following the chain of inheritance of the classes involved, remembering to always start at the class the method call is performed on.</p>

<div class="aside">

  <h4 id="aside-multiple-inheritance">Aside: Multiple Inheritance</h4>
  <p>Python supports the ability for classes to inherit from more than one superclass, known as <strong>multiple inheritance</strong>. As an example, consider these four classes:</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_x&lt;/span&gt;
</code></pre></div>    </div>

    <p><span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">**</span> <span class="mi">2</span></p>

    <p><span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf"><strong>init</strong></span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n"><strong>init</strong></span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;g&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_y&lt;/span&gt;
</code></pre></div>    </div>

    <p><span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">“x = {0}, y = {1}”</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">self_</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s">“f() -&gt; {0}”</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">()))</span>
        <span class="k">print</span><span class="p">(</span><span class="s">“g() -&gt; {0}”</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">()))</span>
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;</p>
  </div>

  <p>The class <code class="highlighter-rouge">D</code> inherits from both <code class="highlighter-rouge">B</code> and <code class="highlighter-rouge">C</code>, which each inherit from <code class="highlighter-rouge">A</code>. Here is an interaction with the <code class="highlighter-rouge">D</code> class:</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;45&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>When the <code class="highlighter-rouge">f</code> method is called, Python will use the <code class="highlighter-rouge">f</code> method defined in <code class="highlighter-rouge">B</code>. When the <code class="highlighter-rouge">g</code> method is called, Python uses the <code class="highlighter-rouge">g</code> method defined in <code class="highlighter-rouge">C</code>. This method calls <code class="highlighter-rouge">self.f()</code>, which will again be the method defined in <code class="highlighter-rouge">B</code>. We see that without needing to modify anything in the <code class="highlighter-rouge">D</code> class, we have manipulated the <code class="highlighter-rouge">g</code> method defined in the <code class="highlighter-rouge">C</code> class to use the <code class="highlighter-rouge">f</code> method of <code class="highlighter-rouge">B</code> instead of <code class="highlighter-rouge">A</code>. This technique can be useful in certain situations.</p>

  <p>However, we must be very careful when using multiple inheritance, as it makes the MRO much harder to interpret. If <code class="highlighter-rouge">B</code> and <code class="highlighter-rouge">C</code> were to both define the same method, which one is used? If <code class="highlighter-rouge">D</code> overrides this method and needs to access the superclass method, should <code class="highlighter-rouge">super</code> evaluate to <code class="highlighter-rouge">B</code> or <code class="highlighter-rouge">C</code>? Is it possible for unwanted side-effects to occur? Does the order of inheritance matter (<code class="highlighter-rouge">class D(B, C):</code> or <code class="highlighter-rouge">class D(C, B):</code>)?</p>

  <p>Using multiple inheritance is <strong>often</strong> inadvisable where other techniques can be used to achieve the same desired outcome. Some programming languages, such as Java and Ruby, do not support multiple inheritance, as it can be unnecessarily complex.</p>
</div>

<h2 id="writing-exceptions">Writing Exceptions</h2>
<p>We previously discussed various types of <code class="highlighter-rouge">exceptions</code>, and how to use them. Python has a range of built-in exceptions for various generic purposes. For example, <code class="highlighter-rouge">NameError</code> is raised when a variable name is not found, and <code class="highlighter-rouge">ValueError</code> when an input is of an inappropriate value.</p>

<p>Often it is useful to create different types of exception for specific purposes. In the following example, we will write a class to represent a savings bank account, which will have methods for withdrawing and depositing funds, and accumulating interest. When the user tries to withdraw or deposit a negative amount, we will raise a <code class="highlighter-rouge">ValueError</code>. When the user tries to withdraw too much money, then we would like to raise a different type of error that represents a failed withdrawal.</p>

<p>Python comes with a class to represent exceptions, called <code class="highlighter-rouge">Exception</code>. By creating a class which inherits from <code class="highlighter-rouge">Exception</code>, we can create our own custom exceptions. Here is an exception for a failed withdrawal:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">WithdrawalError</span><span class="p">(</span><span class="nb">Exception</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""An exception to be raised when a withdrawal fails."""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">balance</span><span class="p">):</span>
        <span class="s">"""
        Parameters
            message (str): The reason for the error
            balance (float): The balance of the account 
        """</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">balance</span>

    <span class="k">def</span> <span class="nf">get_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span>
</code></pre>
    </div>
  </div>
</div>

<p>The exception stores a message detailing why the transaction failed, and the balance of the savings account. Using this, we can write a class to represent the savings account:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">SavingsAccount</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A simple savings account."""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">initial_deposit</span><span class="p">,</span> <span class="n">monthly_interest</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">initial_deposit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span> <span class="o">=</span> <span class="n">monthly_interest</span>

    <span class="k">def</span> <span class="nf">get_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span>

    <span class="k">def</span> <span class="nf">get_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span>

    <span class="k">def</span> <span class="nf">add_interest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Add the monthly interest to the balance."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="n">interest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span> <span class="o">/</span> <span class="mf">100.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">+=</span> <span class="n">interest</span>

    <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Add a positive amount to the balance."""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"Can't deposit a negative amount"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">+=</span> <span class="n">amount</span>

    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Subtract a positive amount from the balance."""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"Can't withdraw a negative amount"</span><span class="p">)</span>
        <span class="n">new_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">-</span> <span class="n">amount</span>
        <span class="k">if</span> <span class="n">new_balance</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="n">WithdrawalError</span><span class="p">(</span><span class="s">"Not enough funds in account"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">new_balance</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">repr_string</span> <span class="o">=</span> <span class="s">"SavingsAccount({0}, {1}, {2})"</span>
        <span class="k">return</span> <span class="n">repr_string</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>We can then write functions <code class="highlighter-rouge">withdraw</code> and <code class="highlighter-rouge">deposit</code> that the user can interact with:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">try</span> <span class="p">:</span>
        <span class="n">account</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">ValueError</span> <span class="k">as</span> <span class="n">e</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Invalid:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">WithdrawalError</span> <span class="k">as</span> <span class="n">e</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Cannot withdraw:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Your account balance is ${0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">get_balance</span><span class="p">()))</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Withdrawal successful."</span><span class="p">)</span>
        
<span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">try</span> <span class="p">:</span>
        <span class="n">account</span><span class="o">.</span><span class="n">deposit</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">ValueError</span> <span class="k">as</span> <span class="n">e</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Invalid:"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Deposit successful."</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>These functions both use a <code class="highlighter-rouge">try</code>-<code class="highlighter-rouge">except</code>-<code class="highlighter-rouge">else</code> construct. In these constructs, the <code class="highlighter-rouge">else</code> body is executed if there were no exceptions raised in the try body.</p>

<p>The code above is available in the file <code class="highlighter-rouge">banking.py</code>. Below is an example interaction with this savings account:</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; savings = SavingsAccount("John Cleese", 100, 0.3)
&gt;&gt;&gt; savings
SavingsAccount(John Cleese, 100, 0.3)
&gt;&gt;&gt; withdraw(savings, 60)
Withdrawal successful.
&gt;&gt;&gt; savings.get_balance()
40
&gt;&gt;&gt; savings.add_interest()
&gt;&gt;&gt; savings.get_balance()
40.12
&gt;&gt;&gt; deposit(savings, -20)
Invalid: Can't deposit a negative amount
&gt;&gt;&gt; withdraw(savings, 45)
Cannot withdraw: Not enough funds in account
Your account balance is $40.12
</code></pre>
    </div>
  </div>
</div>

<h2 id="inheritance-as-abstraction">Inheritance as Abstraction</h2>
<p>Following from the previous example, we write a class that represents a credit account.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">CreditAccount</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A simple credit account."""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">initial_deposit</span><span class="p">,</span> <span class="n">monthly_interest</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">initial_deposit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span> <span class="o">=</span> <span class="n">monthly_interest</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_limit</span> <span class="o">=</span> <span class="n">limit</span>

    <span class="k">def</span> <span class="nf">get_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span>

    <span class="k">def</span> <span class="nf">get_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span>

    <span class="k">def</span> <span class="nf">add_interest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Subtract the monthly interest from the balance."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="n">interest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span> <span class="o">/</span> <span class="mf">100.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">+=</span> <span class="n">interest</span>

    <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Add a positive amount to the balance."""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"Can't deposit a negative amount"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">+=</span> <span class="n">amount</span>

    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Subtract a positive amount from the balance."""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"Can't withdraw a negative amount"</span><span class="p">)</span>
        <span class="n">new_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">-</span> <span class="n">amount</span>
        <span class="k">if</span> <span class="n">new_balance</span> <span class="o">&lt;</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_limit</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="n">WithdrawalError</span><span class="p">(</span><span class="s">"Credit limit reached"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">new_balance</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">repr_string</span> <span class="o">=</span> <span class="s">"CreditAccount({0}, {1}, {2}, {3})"</span>
        <span class="k">return</span> <span class="n">repr_string</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_limit</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>Notice that the class definitions of <code class="highlighter-rouge">SavingsAccount</code> and <code class="highlighter-rouge">CreditAccount</code> are very similar; in fact, some of the methods are identical. This is to be expected as the credit and savings accounts are both types of bank account. We would like to abstract out the duplicated methods, and create an “account” class which represents the common functionality of the two types of account. Once this is done, the <code class="highlighter-rouge">SavingsAccount</code> and <code class="highlighter-rouge">CreditAccount</code> classes can inherit from <code class="highlighter-rouge">Account</code>.</p>

<p>Between the two classes, we see that the <code class="highlighter-rouge">get_owner</code>, <code class="highlighter-rouge">get_balance</code> and deposit methods are identical, so these methods can be moved to the Account class. The <code class="highlighter-rouge">__init__</code> method also contains similar behaviour, so it can easily be moved to Account. The other three methods (<code class="highlighter-rouge">add_interest</code>, <code class="highlighter-rouge">withdraw</code> and <code class="highlighter-rouge">__repr__</code>) look similar, but not in a way that can be easily abstracted, so we will leave them as they are. The file <code class="highlighter-rouge">banking2.py</code> contains the code below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">Account</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""An abstraction of different bank accounts."""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">initial_deposit</span><span class="p">,</span> <span class="n">monthly_interest</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">initial_deposit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span> <span class="o">=</span> <span class="n">monthly_interest</span>

    <span class="k">def</span> <span class="nf">get_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_owner</span>

    <span class="k">def</span> <span class="nf">get_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span>

    <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Add a positive amount to the balance."""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"Can't deposit a negative amount"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">+=</span> <span class="n">amount</span>

        
<span class="k">class</span> <span class="nc">SavingsAccount</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A simple savings account."""</span>
    <span class="k">def</span> <span class="nf">add_interest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Add the monthly interest to the balance."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="n">interest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span> <span class="o">/</span> <span class="mf">100.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">+=</span> <span class="n">interest</span>

    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Subtract a positive amount from the balance."""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"Can't withdraw a negative amount"</span><span class="p">)</span>

        <span class="n">new_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">-</span> <span class="n">amount</span>
        <span class="k">if</span> <span class="n">new_balance</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="n">WithdrawalError</span><span class="p">(</span><span class="s">"Not enough funds in account"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">new_balance</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">repr_string</span> <span class="o">=</span> <span class="s">"SavingsAccount({0}, {1}, {2})"</span>
        <span class="k">return</span> <span class="n">repr_string</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">CreditAccount</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A simple credit account."""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">initial_deposit</span><span class="p">,</span> <span class="n">monthly_interest</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span> <span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">owner</span><span class="p">,</span> <span class="n">initial_deposit</span><span class="p">,</span> <span class="n">monthly_interest</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_limit</span> <span class="o">=</span> <span class="n">limit</span>

    <span class="k">def</span> <span class="nf">add_interest</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Subtract the monthly interest from the balance."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="n">interest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span> <span class="o">/</span> <span class="mf">100.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">+=</span> <span class="n">interest</span>

    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Subtract a positive amount from the balance."""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"Can't withdraw a negative amount"</span><span class="p">)</span>

        <span class="n">new_balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">-</span> <span class="n">amount</span>
        <span class="k">if</span> <span class="n">new_balance</span> <span class="o">&lt;</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_limit</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="n">WithdrawalError</span><span class="p">(</span><span class="s">"Credit limit reached"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span> <span class="o">=</span> <span class="n">new_balance</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">repr_string</span> <span class="o">=</span> <span class="s">"CreditAccount({0}, {1}, {2}, {3})"</span>
        <span class="k">return</span> <span class="n">repr_string</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_owner</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_balance</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_interest</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_limit</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>In the television example above, we used inheritance to add more functionality to an existing type of television. Here, we have used inheritance to abstract functionality from two similar classes. A result of this is that the <code class="highlighter-rouge">Account</code> class is not a fully functional bank account; it does not have the ability to withdraw funds or accumulate interest. Because of this, we call the <code class="highlighter-rouge">Account</code> an <strong>abstract class</strong>.</p>

<p>Abstract classes should not be instantiated directly (that is, we should not create instances of the abstract class itself), instead we create subclasses that fill in the missing functionality. We have already seen an example of an abstract class, <code class="highlighter-rouge">Exception</code>. We never raise an <code class="highlighter-rouge">Exception</code> itself, but we use various subclasses of <code class="highlighter-rouge">Exception</code> to represent different things. An advantage of using the concept of an abstract <code class="highlighter-rouge">Account</code> class is that we can write functions that work with any type of account. For example, the <code class="highlighter-rouge">withdraw</code> and <code class="highlighter-rouge">deposit</code> functions we wrote above can also work with <code class="highlighter-rouge">CreditAccount</code> instances:</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; credit = CreditAccount("Michael Palin", 0, 1.5, 200)
&gt;&gt;&gt; credit
CreditAccount(Michael Palin, 0, 1.5, 200)
&gt;&gt;&gt; withdraw(credit, 150)
Withdrawal successful.
&gt;&gt;&gt; credit.add_interest()
&gt;&gt;&gt; credit.get_balance()
-152.25
&gt;&gt;&gt; deposit(credit, 60)
Deposit successful.
&gt;&gt;&gt; credit.get_balance()
-92.25
&gt;&gt;&gt; withdraw(credit, 110)
Cannot withdraw: Credit limit reached
Your account balance is $-92.25
</code></pre>
    </div>
  </div>
</div>

<h2 id="designing-an-inheritance-hierarchy">Designing an Inheritance Hierarchy</h2>
<p>As another example we now sketch out some ideas for designing a simple inheritance hierarchy for people at a university.</p>

<p>If we look around campus we will see lots of people and we can look at them more closely, searching for similarities. Some of these people sit in lectures and do exams. These people have a lot in common and so we might define a class to describe their attributes — let’s say an <code class="highlighter-rouge">UndergraduateStudent</code> class. What do members of this class have in common? They have names, addresses, student numbers, student records, courses they are enrolled in. If we look around we will find some other kinds of students that have slightly different attributes — let’s put them in a <code class="highlighter-rouge">PostgraduateStudent</code> class. These students will share some attributes with the other students but have their own attributes — for example, thesis topic and supervisor. We might then decide that both kinds of students have a lot of overlap and decide that they both inherit from <code class="highlighter-rouge">Student</code>.</p>

<p>There are other people walking around that get paid — some of these teach classes and do research — let’s put them in an <code class="highlighter-rouge">Academic</code> class. Members of this class will have attributes like staff number, pay scale, roles, teaching assignments and research interests. Others might belong to a <code class="highlighter-rouge">TechnicalStaff</code> class and others might belong to an <code class="highlighter-rouge">Administration</code> class. Together we might group these together and form the Staff superclass and then together with students create the <code class="highlighter-rouge">Person</code> superclass.</p>

<p>Now that we have sketched out the inheritance hierarchy we then want to determine where specific attributes should live. Let’s start with name and address. Everyone has these attributes and so belong to the base <code class="highlighter-rouge">Person</code> class. On the other hand, the attribute (method) for enrolling in a course is specific to an undergraduate student and so should go in that class.</p>

<p>What we have done is a bottom-up design of the class hierarchy — we started at the bottom and worked our way up moving from subclass to superclass. We could also do top-down design — by starting with the base class (<code class="highlighter-rouge">Person</code>) and looking for differences — for example staff get paid and students do not. This gives the subclasses of <code class="highlighter-rouge">Person</code>.</p>

<blockquote class="blockquote">
  <p> Three people have just fallen past that window</p>
</blockquote>

<h1 id="graphical-user-interfaces--part-1">Graphical User Interfaces – Part 1</h1>
<h2 id="introduction">Introduction</h2>
<p><strong>A graphical user interface (GUI)</strong> allows users to interact with a computer using, for example, a mixture of icons, displays of text and graphics, and graphical elements called <strong>widgets</strong>. Most tools these days have one or more GUIs and so it is important for software engineers to be able to design and implement GUIs. In this section we introduce some GUI basics via examples. We do not go into details of what makes good GUI design – this is left to other courses.</p>

<p>Most programming languages provide a mechanism for users to be able to write GUIs. The Python community have developed several GUI libraries and most of them are portable across different platforms. The library we will use in this section is <code class="highlighter-rouge">tkInter</code> which is a Python library that provides access to the <code class="highlighter-rouge">Tk</code> widget toolkit. <code class="highlighter-rouge">tkInter</code> is part of the default Python installation, and IDLE’s GUI is written in <code class="highlighter-rouge">tkInter</code>.</p>

<div class="important">

  <h4 id="note-running-gui-applications">Note: Running GUI Applications</h4>
  <p>Do not run any GUI applications within IDLE — i.e. do not use <strong>Run Module</strong>. Instead, run the program from outside IDLE. In Windows, for example, simply double click on the program icon to run the program. The problem is that the main loop of IDLE’s Python interpreter and our GUI application’s main loop do not play well together. We can, of course, still use IDLE to edit (and save) our programs.</p>

  <h4 id="running-gui-applications-in-windows">Running GUI applications in Windows:</h4>
  <p>Double-clicking on a file with a <code class="highlighter-rouge">.py</code> extension will start <code class="highlighter-rouge">Python.exe</code> (creating a new console window). The script will then be loaded and this will result in the creation of the tkInter application window. For debugging purposes, the console window is where error messages and prints are written. To stop the console from appearing, rename the file to give it a <code class="highlighter-rouge">.pyw</code> extension. This will cause <code class="highlighter-rouge">Pythonw.exe</code> to start. This version of Python does not start up a console window.</p>

  <p>In Windows if an error is raised while creating the GUI then the program will close and so will the console window. This means that the error message will not be able to be seen. If this happens, run the program from inside <code class="highlighter-rouge">IDLE</code>, this will allow the message to be seen. Fix the problem, then continue to run from outside <code class="highlighter-rouge">IDLE</code>.</p>
</div>

<div class="extra">

  <h4 id="aside-useful-websites">Aside: Useful Websites</h4>
  <p>Online introductions to tkInter which may be useful can be found at <a href="http://thinkingtkinter.sourceforge.net">http://thinkingtkinter.sourceforge.net</a></p>
</div>

<h2 id="gui-structure">GUI Structure</h2>
<p>We mentioned that a GUI is composed of widgets, it is really made by <strong>packing</strong> widgets into other containers and widgets. The <code class="highlighter-rouge">tkinter</code> library has many widgets that can be used as well as commands to pack the widgets to make the GUI look the way we want.</p>

<p>Let’s first have a look at a very simple example for our first GUI, we will revisit the Hello World example we met earlier in the course. This example will consist simply of a window with a <strong>Label widget</strong> that has the text <code class="highlighter-rouge">"Hello World!"</code> in it. We will also give the window a similar title. The following is the code that will create this for us.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'HelloWorld Example'</span><span class="p">)</span>

<span class="n">hw</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">'Hello World!'</span><span class="p">)</span>
<span class="n">hw</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first line of code is an import that imports the <code class="highlighter-rouge">tkinter</code> library and gives it the alias <code class="highlighter-rouge">tk</code>. This form of import allows “renaming” long named modules into shorter, easier to type names. The second line creates a variable <code class="highlighter-rouge">root</code> that has the value of an <strong>instance of the Tk class</strong>. This Tk instance is the main window that our GUI is created in, it can be thought of as our first widget that all other widgets are going to be in. By convention, the variable name <code class="highlighter-rouge">root</code> is used to store the Tk instance. The next line calls the <code class="highlighter-rouge">title</code> method of the Tk class. This method takes a string argument that becomes the title of the window. The next line creates another variable, <code class="highlighter-rouge">hw</code>, and stores a <strong><code class="highlighter-rouge">Label</code></strong> class instance in it. The <code class="highlighter-rouge">Label</code> constructor takes as a first argument the parent widget that it is to be contained in, in this case we want to contain our label inside our main window. The second argument sets the <code class="highlighter-rouge">text</code> input to the string <code class="highlighter-rouge">'Hello World!'</code>. The second last line calls the <code class="highlighter-rouge">pack</code> method of the Label class. All widgets have this <code class="highlighter-rouge">pack</code> method and by calling it we are telling <code class="highlighter-rouge">Tk</code> that we want the widget to be displayed in its parent widget. The last line calls the <code class="highlighter-rouge">mainloop</code> method of the <code class="highlighter-rouge">Tk</code> class. This method starts the main loop of Tk. This is responsible for sizing and displaying widgets and handling events such as mouse events, keyboard events and timer events. This loop will continue until the window is closed.</p>

<div class="aside">

  <h4 id="aside-grid">Aside: <code class="highlighter-rouge">grid</code></h4>
  <p>The other main method that can be used, other than <code class="highlighter-rouge">pack</code>, for arranging <code class="highlighter-rouge">Tk</code> widgets is <code class="highlighter-rouge">grid</code>, which involves structuring widgets in a grid layout with a fixed number of rows and columns. We will not be using <code class="highlighter-rouge">grid</code> in this course.</p>
</div>

<p>Let’s now save our code as <code class="highlighter-rouge">hello_world_gui.py</code> and have a look at our first GUI. <strong>Remember not to run it in <code class="highlighter-rouge">IDLE</code></strong>. Also remember that the window will look different depending on the operating system it is being used on.</p>

<p><img src="images/8B0_GUI_01.png" alt="" /></p>

<p>The first thing we notice is that the window already has the minimize, maximize and close buttons. tkInter creates these automatically for us. We also notice that the window can be resized as normal so we can make it look as follows.</p>

<p><img src="images/8B0_GUI_02.png" alt="" /></p>

<p>Note that when we resize the window to make it bigger the label will centre itself horizontally but stay at the top of the window. This is the default positioning used by pack. Soon we will see how to use pack to get different positioning.</p>

<div class="important">

  <h4 id="basic-gui-code">Basic GUI Code</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tkinter&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;
</code></pre></div>    </div>

    <p><span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span></p>

    <p><span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">‘Title String’</span><span class="p">)</span></p>

    <p><span class="n">var_1</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Widget</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">,</span> <span class="p">[</span><span class="n">config_args</span><span class="p">])</span>
<span class="n">var_1</span><span class="o">.</span><span class="n">pack</span><span class="p">([</span><span class="n">pack_args</span><span class="p">])</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
<span class="n">var_n</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Widget</span><span class="p">(</span><span class="n">parent_widget</span><span class="p">,</span> <span class="p">[</span><span class="n">config_args</span><span class="p">])</span>
<span class="n">var_n</span><span class="o">.</span><span class="n">pack</span><span class="p">([</span><span class="n">pack_args</span><span class="p">])</span></p>

    <p><span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;</p>
  </div>

  <p>This is the basic GUI code layout for <code class="highlighter-rouge">tkInter</code>. Here <em><code class="highlighter-rouge">Widget</code></em> is the type of widget that is to be created, <em><code class="highlighter-rouge">parent_widget</code></em> is the widget that the current widget is to be packed into, <em><code class="highlighter-rouge">config_args</code></em> allow optional configuration of the widget upon creation, and <em><code class="highlighter-rouge">pack_args</code></em> are used to arrange the widget inside its parent widget (we will have a look at these options soon). These arguments follow the form <em><code class="highlighter-rouge">argument_name=argument_value</code></em>.</p>
</div>

<h2 id="layout">Layout</h2>
<h3 id="side">Side</h3>

<p>Having all the widgets of our GUI set to the top-centre of the screen, as in the previous example, is not particularly useful. This is especially true when we start getting many widgets and want more complex layouts. The <strong>pack</strong> method we used in the previous example has many optional arguments that allow us to place the widgets almost wherever we want them.</p>

<p>Let’s have a look at some simple packing examples that will place Label widgets at different edges of the screen.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Packing"</span><span class="p">)</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want to sit to the right"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">)</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"It's to the left for me"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"green"</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">bottom</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want to lie on the bottom"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"red"</span><span class="p">)</span>
<span class="n">bottom</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

<span class="n">bottom2</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I also want to lie on the bottom"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"pink"</span><span class="p">)</span>
<span class="n">bottom2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>This code is very similar to our Hello World example before but we have three labels instead of one. We have also added an extra argument to the Label, <code class="highlighter-rouge">bg</code>, which is short for background; it sets the background colour of the widget to the colour specified in the given string.</p>

<p>This colour string can be in words, as long as the colour is in the list of possible colours. Alternatively, we can specify the <strong>RGB value</strong> of the colour, which represents the amount of red, green and blue in the colour. This is done with a hash (<code class="highlighter-rouge">#</code>) followed by six <strong>hexadecimal</strong> digits. A hexadecimal number is a number in base 16 rather than base 10 (decimal numbers). Because hexadecimal numbers are base 16 we need hexadecimal digits for the numbers <code class="highlighter-rouge">10,11,12,13,14,15</code>. These are, respectively, <code class="highlighter-rouge">a,b,c,d,e,f</code>. So, the hexadecimal number <code class="highlighter-rouge">ff</code> is the (decimal) number 255 – i.e. <code class="highlighter-rouge">15*16+15</code>. In a hexadecimal number representing a colour, the first two digits represent the red component, the next two the green component, and the last two the blue component. So <code class="highlighter-rouge">#ffffff</code> is maximum red, green and blue – i.e. white and, conversely, <code class="highlighter-rouge">#000000</code> is black.</p>

<p>Also notice that there is now an optional argument inside the <code class="highlighter-rouge">pack</code> method calls. This is the <strong><code class="highlighter-rouge">side</code></strong> argument, which tells the widget to sit towards the edge of the given direction (<code class="highlighter-rouge">TOP</code>, <code class="highlighter-rouge">BOTTOM</code>, <code class="highlighter-rouge">LEFT</code>, <code class="highlighter-rouge">RIGHT</code>). Also notice that the side names are in all caps. This is because these are constants in the <code class="highlighter-rouge">tkInter</code> library.</p>

<div class="aside">

  <h4 id="aside-colour-options">Aside: Colour Options</h4>
  <p>The list of possible named colours for Tk can be found at <a href="http://www.science.smith.edu/dftwiki/images/3/3d/TkInterColorCharts.png"></a></p>
</div>

<p>After saving the code to <code class="highlighter-rouge">pack_side.py</code>, we can test have a look at the result.</p>

<p><img src="images/8B0_GUI_03.png" alt="" /></p>

<p>Notice how the widgets are tightly packed. Tk will keep the window to a size that just fits in all the widgets. Let’s experiment with expanding the window.</p>

<p><img src="images/8B0_GUI_04.png" alt="" /></p>

<p>Notice the positioning of the widgets. Using <code class="highlighter-rouge">side</code> places widgets into four quadrants of the window. Widgets are also arranged in the order they are packed: the red label was packed before the pink one, so the red one was placed on the bottom before the pink one. Also notice that the background colour only fills up the area of the text in the Label widget, and the remainder of the window is the unused grey background. When the window expands, <code class="highlighter-rouge">tkInter</code> allocates more space for the widgets to sit in. Because the widgets don’t change size, they sit in the centre, and the extra space is filled in with grey background. The image above has been digitally altered and reproduced below, with black boxes indicating the space which is allocated for that widget to occupy. Because the blue and green labels were packed first, the red and pink labels do not get the entire width of the window, only what was remaining when they were packed.</p>

<p><img src="images/8B0_GUI_05.png" alt="" /></p>

<h3 id="anchor">Anchor</h3>

<p>When the window expands, each of the widgets is left in the centre of its allocated space. The pack option <code class="highlighter-rouge">anchor</code> can be used to specify the direction the widget will sit when the widget is given more space. The <code class="highlighter-rouge">anchor</code> argument uses the compass system, valid arguments are <code class="highlighter-rouge">N</code>, <code class="highlighter-rouge">E</code>, <code class="highlighter-rouge">S</code>, <code class="highlighter-rouge">W</code>, <code class="highlighter-rouge">NE</code>, <code class="highlighter-rouge">SE</code>, <code class="highlighter-rouge">SW</code>, <code class="highlighter-rouge">NW</code>, <code class="highlighter-rouge">CENTER</code> (note the American spelling). Here is an example of widgets arranged using <code class="highlighter-rouge">anchor</code>:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Packing"</span><span class="p">)</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want to sit to the right"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">E</span><span class="p">)</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"It's to the left for me"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"green"</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">W</span><span class="p">)</span>

<span class="n">bottom</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want to lie on the bottom"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"red"</span><span class="p">)</span>
<span class="n">bottom</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">S</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>We save our code to <code class="highlighter-rouge">pack_anchor.py</code> and have a look at the result.</p>

<p><img src="images/8B0_GUI_06.png" alt="" /></p>

<p>We have packed all the labels with the argument <code class="highlighter-rouge">side=TOP</code>, so they appear stacked from top to bottom in the order they were packed. If the <code class="highlighter-rouge">side</code> argument is not given, it defaults to <code class="highlighter-rouge">TOP</code>, so we could have left it out of the packing arguments, but we have included it as an explicit reminder that we want the labels to be arranged top-to-bottom. Let’s expand the window and see what it looks like.</p>

<p><img src="images/8B0_GUI_07.png" alt="" /></p>

<p>Notice how the widgets have moved left and right but not changed the vertical position. <code class="highlighter-rouge">anchor</code> has “pinned” the widgets in the direction specified. For clarity, we again digitally modify this image to show the space that each widget has been given. Notice that the red label has been anchored to the south side, but because it consumes all its allocated space vertically, we cannot observe any difference.</p>

<p><img src="images/8B0_GUI_08.png" alt="" /></p>

<h3 id="expand">Expand</h3>

<p>We have already observed that <code class="highlighter-rouge">tkInter</code> allocates the minimal space needed to contain the widget, even when the window is resized. The <strong><code class="highlighter-rouge">expand</code></strong> packing option allows widgets to be allocated as much space as possible when the window is resized. The following example (<code class="highlighter-rouge">pack_expand.py</code>) makes use of this option.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Packing"</span><span class="p">)</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want to sit to the right"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">)</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"It's to the left for me"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"green"</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">bottom</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want to lie on the bottom"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"red"</span><span class="p">)</span>
<span class="n">bottom</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

<span class="n">bottom2</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I also want to lie on the bottom"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"pink"</span><span class="p">)</span>
<span class="n">bottom2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>This is equivalent to the first example, but the <code class="highlighter-rouge">left</code> label is packed with the argument <code class="highlighter-rouge">expand=True</code>. By default, <code class="highlighter-rouge">expand</code> is <code class="highlighter-rouge">False</code>, so for simplicity, we leave it out when it is not required. When we resize the window, we see this:</p>

<p><img src="images/8B0_GUI_09.png" alt="" /></p>

<p>With digital modifications to the image above, we show that the space allocated around the green label expands in both directions when the window is resized, while the red and pink labels do not gain any more space. We can also clearly see that the green label has been anchored to the centre.</p>

<p><img src="images/8B0_GUI_10.png" alt="" /></p>

<p>When multiple widgets have the <code class="highlighter-rouge">expand=True</code> option, they all expand equally. For example, if this option were turned on for the pink and red labels, resizing the window vertically would give each one the same amount of extra space (equivalent to half the distance the window is resized). This will be demonstrated in the section below.</p>

<h3 id="fill">Fill</h3>
<p>When we resize the window, the widgets themselves stay the same size, but <code class="highlighter-rouge">tkInter</code> allocates more space to surround the widgets, based on their <code class="highlighter-rouge">anchor</code> and <code class="highlighter-rouge">expand</code> values. The <strong><code class="highlighter-rouge">fill</code></strong> option specifies whether the widget should grow to fill the space allocated for it. Valid arguments are <code class="highlighter-rouge">X</code>, <code class="highlighter-rouge">Y</code>, <code class="highlighter-rouge">BOTH</code>, <code class="highlighter-rouge">NONE</code>, which represent filling in the horizontal (<code class="highlighter-rouge">X</code>) and vertical (<code class="highlighter-rouge">Y</code>) dimensions, both dimensions, or neither (which is the default option). The following example is similar to previous examples, and makes use of the <code class="highlighter-rouge">fill</code> parameter:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Packing"</span><span class="p">)</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want to sit to the right"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"It's to the left for me"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"green"</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>

<span class="n">bottom</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want to lie on the bottom"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"red"</span><span class="p">)</span>
<span class="n">bottom</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>

<span class="n">bottom2</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I also want to lie on the bottom"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"pink"</span><span class="p">)</span>
<span class="n">bottom2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>This code can be downloaded as <code class="highlighter-rouge">pack_fill.py</code>. When we run this code and resize the window, we get this result:</p>

<p><img src="images/8B0_GUI_11.png" alt="" /></p>

<p>As with the previous examples, we add black borders to show the space allocated around each widget:</p>

<p><img src="images/8B0_GUI_12.png" alt="" /></p>

<p>Note that the pink and red labels have been expanded, and together they now occupy the full height of the screen. The red label has been filled in both dimensions, taking up the entire space it can use. The pink label has been filled vertically, so it uses the full height available to it, but there is still grey background to the left and right of it. The green label has also been filled vertically, but because it does not expand horizontally, it appears to fill its entire space. The blue label has been filled in the <code class="highlighter-rouge">X</code> dimension, but because the label does not expand, this has no effect.</p>

<h3 id="padding">Padding</h3>

<p>For finer control of the size and spacing of widgets, we can use the padding options, <code class="highlighter-rouge">padx</code>, <code class="highlighter-rouge">pady</code>, <code class="highlighter-rouge">ipadx</code>, <code class="highlighter-rouge">ipady</code>, which allow us to specify an amount of space to include around the widget, on the inside and outside of the widget (specified as a number of pixels). The following example demonstrates the use of these options.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Packing"</span><span class="p">)</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want space to the side"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"I am very wide"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"green"</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">ipadx</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">bottom</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I want space above and below"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"red"</span><span class="p">)</span>
<span class="n">bottom</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">bottom2</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"I am very tall"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"pink"</span><span class="p">)</span>
<span class="n">bottom2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">ipady</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>This is available to download as <code class="highlighter-rouge">pack_pad.py</code>. When we run this code, we get the result shown in the first image below. The second image has been modified to include borders around the labels, shown in purple.</p>

<!-- <div style="text-align:center">
<img src=images/8B0_GUI_13.png width="200">
<img src=images/8B0_GUI_14.png width="200">
</div> -->

<p align="center">

<img src="images/8B0_GUI_13.png" alt="" />
<img src="images/8B0_GUI_14.png" alt="" />
</p>

<p>The <code class="highlighter-rouge">padx</code> adds space to the left and right of the label, shown by the blue label. If any widgets were to be added to the sides of this label, or if the blue label were to be resized, this space would remain the same. Similarly, the <code class="highlighter-rouge">pady</code> inserts padding above and below the red label, and the other labels are moved to accommodate the extra space. The <code class="highlighter-rouge">ipadx</code> and <code class="highlighter-rouge">ipady</code> options insert padding around the widget, but on the inside of the widget, which makes the labels appear larger, as shown with the green and pink labels.</p>

<div class="important">

  <h4 id="packing-options">Packing Options</h4>
  <p>The <code class="highlighter-rouge">pack</code> method of tkInter widgets supports the following optional arguments, which affect how the widgets are arranged and displayed on the screen:</p>

  <table>
    <thead>
      <tr>
        <th>Option</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong><code class="highlighter-rouge">side</code></strong></td>
        <td>Specify which edge to pack this widget against. Can be <code class="highlighter-rouge">TOP</code>, <code class="highlighter-rouge">BOTTOM</code>, <code class="highlighter-rouge">LEFT</code> or <code class="highlighter-rouge">RIGHT</code> (if not specified, defaults to <code class="highlighter-rouge">TOP</code>). Multiple widgets can be packed on the same side to appear next to each other.</td>
      </tr>
      <tr>
        <td><strong><code class="highlighter-rouge">anchor</code></strong></td>
        <td>Specify where to position this widget, inside the space which  is allocated for it. Can be <code class="highlighter-rouge">N</code>, <code class="highlighter-rouge">NE</code>, <code class="highlighter-rouge">E</code>, <code class="highlighter-rouge">SE</code>, <code class="highlighter-rouge">S</code>, <code class="highlighter-rouge">SW</code>, <code class="highlighter-rouge">W</code>, <code class="highlighter-rouge">NW</code> or <code class="highlighter-rouge">CENTER</code> (defaults to <code class="highlighter-rouge">CENTER</code>).</td>
      </tr>
      <tr>
        <td><strong><code class="highlighter-rouge">expand</code></strong></td>
        <td>Specify (with a boolean value) if the space allocated around the widget should grow and shrink as the window is resized. Note that without the <code class="highlighter-rouge">fill</code> option, the widget itself will not be resized, but there will be more space around it.</td>
      </tr>
      <tr>
        <td><strong><code class="highlighter-rouge">fill</code></strong></td>
        <td>Specify if the widget should fill in the space allocated around it, in one or both of the <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> dimensions. Can be <code class="highlighter-rouge">BOTH</code>, <code class="highlighter-rouge">X</code>, <code class="highlighter-rouge">Y</code> or <code class="highlighter-rouge">NONE</code> (defaults to <code class="highlighter-rouge">NONE</code>). When used with <code class="highlighter-rouge">expand=</code>True, the widget will grow when the window is resized; this is useful for widgets which should always take up as much of the screen as possible, such as the main view area of the application.</td>
      </tr>
      <tr>
        <td><strong><code class="highlighter-rouge">padx</code></strong>, <strong><code class="highlighter-rouge">pady</code></strong>, <strong><code class="highlighter-rouge">ipadx</code></strong>, <strong><code class="highlighter-rouge">ipady</code></strong></td>
        <td>Specify the amount of space to place inside or around this widget, in pixels. <code class="highlighter-rouge">padx</code> and <code class="highlighter-rouge">pady</code> will place a certain amount of background space around the widget. <code class="highlighter-rouge">ipadx</code> and <code class="highlighter-rouge">ipady</code> will add space inside the widget, making it larger.</td>
      </tr>
    </tbody>
  </table>

  <p>Experimenting with different combinations of packing order, and different combinations of <code class="highlighter-rouge">side</code>, <code class="highlighter-rouge">anchor</code>, <code class="highlighter-rouge">expand</code>, <code class="highlighter-rouge">fill</code>, and the <code class="highlighter-rouge">pad</code> options, will assist in understanding the behaviour of these settings.</p>
</div>

<h2 id="frames">Frames</h2>

<p>The <code class="highlighter-rouge">pack</code> options, <code class="highlighter-rouge">side</code> and <code class="highlighter-rouge">anchor</code>, only have limited capability for layout. To give us many more options we use a widget called <strong><code class="highlighter-rouge">Frame</code></strong>. The <code class="highlighter-rouge">Frame</code> widget is a blank widget used for simply containing widgets. This is very useful for creating simple through to complex GUI layouts as it can give us the ability to partition widgets into groups and position each group.</p>

<p>In the next section, we are going to build a simple game which involves moving a circle around the screen. We will have four buttons to represent up/down/left/right controls, and a blank “game screen” area which will show the movement of the circle. For now, we will investigate the layout of the GUI, using Labels. Shortly, we will replace these labels with other kinds of widgets.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Look what we can do with frames"</span><span class="p">)</span>

<span class="c1"># "Button" labels
</span>
<span class="n">controls</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

<span class="n">up</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"UP"</span><span class="p">)</span>
<span class="n">up</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">)</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"LEFT"</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">down</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"DOWN"</span><span class="p">)</span>
<span class="n">down</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"RIGHT"</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">controls</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="c1"># screen Label
</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"screen"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">38</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">screen</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>Similar to the <code class="highlighter-rouge">Label</code>, the arguments to the <code class="highlighter-rouge">Frame</code> constructor are the parent widget (in this case, <code class="highlighter-rouge">root</code>), and any configuration options.</p>

<p>The code for the Labels is still mostly the same as we have seen before. The biggest difference is the parent widget is no longer <code class="highlighter-rouge">root</code>. For the “buttons” we have given the parent as <code class="highlighter-rouge">controls</code>. This makes the labels get packed into the <code class="highlighter-rouge">controls Frame</code>. For the <code class="highlighter-rouge">screen</code> label, we set a width and height to make it fairly large and square. Experimenting with different values for <code class="highlighter-rouge">width</code> and <code class="highlighter-rouge">height</code> will eventually give an acceptable size. We also set the screen to expand and fill when the window changes size.</p>

<p>Let’s now save our code to <code class="highlighter-rouge">frame_game.py</code> and see what we have created. For clarity, we also show a digitally altered image indicating the borders of the labels (in green) and the frame (in red).</p>

<p align="center">

<img src="images/8B0_GUI_15.png" alt="" />
<img src="images/8B0_GUI_16.png" alt="" />
</p>

<p>The four control labels have been arranged within the frame as if they were arranged in their own window. The frame can then be placed within the window, and all four buttons will stay grouped together. If this layout was attempted using the <code class="highlighter-rouge">side</code> and <code class="highlighter-rouge">anchor</code> options alone, it would be very difficult.</p>

<h2 id="buttons">Buttons</h2>

<p>Having <code class="highlighter-rouge">Labels</code> representing buttons does not have much point. Let’s now introduce the real thing, the <strong><code class="highlighter-rouge">Button</code></strong> widget. We now rewrite our code from above using the <code class="highlighter-rouge">Button</code> widget instead of <code class="highlighter-rouge">Label</code> widgets. We also want the buttons to appear the same size, so we will set a width for each one. Because all four should have the same width, we will store the width value as a constant, <code class="highlighter-rouge">BUTTON_WIDTH</code>, to ensure we are always using the same width.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">BUTTON_WIDTH</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Buttons are good"</span><span class="p">)</span>

<span class="c1"># Buttons
</span><span class="n">controls</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

<span class="n">up</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"UP"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">BUTTON_WIDTH</span><span class="p">)</span>
<span class="n">up</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">)</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"LEFT"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">BUTTON_WIDTH</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">down</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"DOWN"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">BUTTON_WIDTH</span><span class="p">)</span>
<span class="n">down</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"RIGHT"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">BUTTON_WIDTH</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">)</span>

<span class="n">controls</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="c1"># screen Label
</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"screen"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">38</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">screen</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>Creating the <code class="highlighter-rouge">Button</code> widgets is again rather simple as they use similar arguments to other widgets we have used. Let’s now save our code as <code class="highlighter-rouge">game_screen.py</code> and have a look at our new GUI.</p>

<p><img src="images/8B0_GUI_17.png" alt="" /></p>

<h3 id="making-buttons-work">Making Buttons Work</h3>
<p>We would like to add functionality to our buttons, so that pressing the button will execute a task. We do this by writing a function that <code class="highlighter-rouge">tkInter</code> can call when the button is pressed. When we create the <code class="highlighter-rouge">Button</code>, we tell it what function to use through the <code class="highlighter-rouge">command</code> argument. For now, we will get the buttons to simply print to the console. We write four functions, one for each button:</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">BUTTON_WIDTH</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Buttons are good"</span><span class="p">)</span>

<span class="c1"># Functions for the buttons to call
</span>
<span class="k">def</span> <span class="nf">push_up</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"UP"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">push_down</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"DOWN"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">push_left</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"LEFT"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">push_right</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"RIGHT"</span><span class="p">)</span>

<span class="c1"># Buttons
</span>
<span class="n">controls</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

<span class="n">up</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"UP"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">push_up</span><span class="p">)</span>
<span class="n">up</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">)</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"LEFT"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">push_left</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">down</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"DOWN"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">push_down</span><span class="p">)</span>
<span class="n">down</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">right</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"RIGHT"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">push_right</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">controls</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="c1"># screen Label
</span>
<span class="n">screen</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"screen"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">38</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">screen</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <strong><code class="highlighter-rouge">command</code></strong> argument takes a function, which is called when the button is pressed. We do not want to execute the function, we want to take the function itself and give it to the <code class="highlighter-rouge">Button</code>. To do this, <strong>we do not place parentheses after the function name</strong>. By passing the function itself to the <code class="highlighter-rouge">Button</code>, we give the <code class="highlighter-rouge">Button</code> the ability to call the function at any time (in particular, whenever the button is pressed). In this situation, the function is known as a <strong>callback</strong> function, because we give the <code class="highlighter-rouge">Button</code> the ability to call back to a function in the application code.</p>

<p>This code is available as <code class="highlighter-rouge">game_screen1.py</code>. Each time we press a button it prints out to the console.</p>

<p><img src="images/8B0_GUI_18.png" alt="" /></p>

<h2 id="the-entry-widget">The Entry Widget</h2>
<p>We have seen how to interact with the user through buttons, but what about other methods, such as text? <code class="highlighter-rouge">tkInter</code> has a widget for this called the <strong><code class="highlighter-rouge">Entry</code></strong> widget. The <code class="highlighter-rouge">entry</code> widget is a small box that the user can enter text into.</p>

<p>We will start with a simple application that evaluates an expression and prints the result to the console. We will require a <code class="highlighter-rouge">Label</code> to label our <code class="highlighter-rouge">Entry</code> widget, the <code class="highlighter-rouge">Entry</code> widget, and a <code class="highlighter-rouge">Button</code> to evaluate the expression. The code is as follows:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Expression Evaluator'</span><span class="p">)</span>

<span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">'Enter Expression: '</span><span class="p">)</span>
<span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">entry</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">entry</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">evaluate</span><span class="p">():</span>
    <span class="n">expression</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"The Result is: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"An error occurred: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

<span class="n">calc</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"Evaluate"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">evaluate</span><span class="p">)</span>
<span class="n">calc</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>The second widget we create is the <code class="highlighter-rouge">Entry</code> widget. We have also used the optional argument <code class="highlighter-rouge">width</code> to specify that we want the text area to be 20 characters wide. We then wrote the <code class="highlighter-rouge">evaluate</code> function to take the input and print the result. In the first line we used the <code class="highlighter-rouge">get</code> method of the <code class="highlighter-rouge">Entry</code> widget. This method returns what is in the text area as a string. In this case it is our expression. The next line uses Python’s <code class="highlighter-rouge">eval</code> function. <code class="highlighter-rouge">eval</code> takes a string representing a Python expression and evaluates it, returning the result.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">eval</span><span class="p">(</span><span class="s">"2+5*4"</span><span class="p">)</span>
<span class="mi">22</span>
</code></pre>
    </div>
  </div>
</div>

<p>It is possible that the user has entered an invalid expression or an expression that will raise an exception, so we place a <code class="highlighter-rouge">try-except</code> statement around it to print out the error message. The last thing the evaluate function does is print out the result with a message. Let’s save our code as <code class="highlighter-rouge">simple_evaluator.py</code> and test it.</p>

<p><img src="images/8B0_GUI_19.png" alt="" /></p>

<p>It would be good, however, to be able to do more than just print to the console.</p>

<h2 id="changing-widgets">Changing Widgets</h2>

<p>All widgets also have a method that allows us to change the way a widget looks. This method is the <strong><code class="highlighter-rouge">config</code></strong> method. It has the same optional arguments as the constructor of the widget. Let’s extend our code so that instead of printing the result to the console, it changes the text in a <code class="highlighter-rouge">Label</code> so that the result is in the application itself. If there is an error message to show, we will also change the background colour to red. To make this work, we must also change the background colour back to grey when we are showing a result, otherwise the label would stay red after an error message is shown.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Expression Evaluator'</span><span class="p">)</span>

<span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">'Enter Expression: '</span><span class="p">)</span>
<span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">entry</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">entry</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">evaluate</span><span class="p">():</span>
    <span class="n">expression</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
        <span class="n">answer</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">"The Result is: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">bg</span><span class="o">=</span><span class="s">"grey"</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">answer</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">"An error occurred: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">bg</span><span class="o">=</span><span class="s">"red"</span><span class="p">)</span>

<span class="n">calc</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"Evaluate"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">evaluate</span><span class="p">)</span>
<span class="n">calc</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">answer</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">""</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"grey"</span><span class="p">)</span>
<span class="n">answer</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>This code is almost the same, we have just added a new <code class="highlighter-rouge">Label</code> and changed the last line in the <code class="highlighter-rouge">evaluate</code> function. The change to the last line calls <code class="highlighter-rouge">config</code> on our new <code class="highlighter-rouge">Label</code>, <code class="highlighter-rouge">answer</code> and sets the text to the result.</p>

<p>Now saving our code as <code class="highlighter-rouge">simple_evaluator_nc.py</code>, we can have a look at our new application.</p>

<p><img src="images/8B0_GUI_20.png" alt="" /></p>

<p><img src="images/8B0_GUI_21.png" alt="" /></p>

<p>When an error message is shown, the label will keep the error message visible until a new expression is entered. This may be discomforting for the user, so we consider ways to fix this issue. One option would be to add a second button that resets the label back to grey and clears the message. It is also possible to reset the label whenever the user resumes typing in the <code class="highlighter-rouge">Entry</code> box.</p>

<p>So far we have covered a lot of different GUI widgets and aspects of creating GUIs. Yet we have been writing our code in a rather linear fashion. In the remainder of this section, and in the next section, we will look at restructuring our GUI programs using classes. This is to make the source code easier to read and maintain.</p>

<h2 id="gui-design-using-classes">GUI Design Using Classes</h2>

<p>Classes can be used to simplify our GUI code, especially as the GUI and program gets more complex. We are going to rewrite our expression evaluator using a class. The code is below:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="k">class</span> <span class="nc">EvalApp</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="s">"""Simple application to allow a user to enter an expression and evaluate it.
    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="s">"""Initialise the expression evaluator's application window.

        Parameters:
            master (Tk): Main window for application.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Expression Evaluator'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="n">expressionLbl</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">'Enter Expression: '</span><span class="p">)</span>
        <span class="n">expressionLbl</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_entry</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entry</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entry</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num</span><span class="p">))</span>

        <span class="n">evalBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"Evaluate"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">)</span>
        <span class="n">evalBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_result</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">""</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"grey"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_result</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Evaluates the expression in the Entry widget and 
           displays the result in the result Label.
        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_num</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_entry</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_result</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">"The Result is: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num</span><span class="p">),</span>
                                <span class="n">bg</span><span class="o">=</span><span class="s">"grey"</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_result</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">"An error occurred: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="n">bg</span><span class="o">=</span><span class="s">"red"</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">EvalApp</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>The most noticeable change is the order of the code, the class needs to be written first so that the class is defined before we try to use it. The next thing to notice is the use of <strong><code class="highlighter-rouge">master</code></strong> as a parameter in the class’ constructor, and as the parent class for the widgets. <code class="highlighter-rouge">master</code> is used by convention to signify the “highest level” class. <code class="highlighter-rouge">master</code> is passed the value of <code class="highlighter-rouge">Tk</code> when the <code class="highlighter-rouge">EvalApp</code> object is created. We have added a <code class="highlighter-rouge">self._num</code> instance variable as well, this is the same as the result variable we used before, we also use it when creating the <code class="highlighter-rouge">Entry</code> widget to give our application a slightly more professional look. The first widget we create is a <code class="highlighter-rouge">Label</code>, but we do not assign it as an instance variable. As we just want this widget to display and not access it later, we do not need to store it in the class structure. We do the same for the <code class="highlighter-rouge">Button</code> widget.</p>

<p>When we create the <code class="highlighter-rouge">Entry</code> widget this time we also use the <strong><code class="highlighter-rouge">insert</code></strong> method. <code class="highlighter-rouge">insert</code> inserts a string into the <code class="highlighter-rouge">Entry</code> widget at a location, in this case the string of <code class="highlighter-rouge">self._num</code> at the end of any text in there. The rest of the class is mostly the same code we had before.</p>

<p>After the class definition we have the <code class="highlighter-rouge">Tk</code> code. In this case we only need three lines because our class does all the work. The first and last line we already know. The middle line creates an instance of our class passing <code class="highlighter-rouge">root</code> into the constructor. As <code class="highlighter-rouge">root</code> is an instance of <code class="highlighter-rouge">Tk</code>, we are passing in a <code class="highlighter-rouge">Tk</code> object.</p>

<p>We can now save our code as <code class="highlighter-rouge">evaluator_class.py</code> and have a look.</p>

<p><img src="images/8B0_GUI_22.png" alt="" /></p>

<p>Apart from the small changes to the GUI that we made it looks and works exactly the same as what we had before.</p>

<blockquote class="blockquote">
  <p> Three people have just fallen past that window</p>
</blockquote>

<h1 id="graphical-user-interfaces--part-2">Graphical User Interfaces – Part 2</h1>
<h2 id="structuring-gui-code">Structuring GUI Code</h2>

<p>When writing GUI code, we often want to group widgets. This typically happens when we want these widgets to appear together in our GUI and/or when these widgets, as a group, have a role in the program. We can think of this as creating our own widget. We will take our game screen example from the previous section as an example. The four directional buttons could be grouped together into a single “controls” widget that can be dealt with separately. To do this, we will write a class that inherits from <code class="highlighter-rouge">Frame</code> and contains our directional buttons.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="k">class</span> <span class="nc">Controls</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="s">"""Widget containing four directional buttons."""</span>

    <span class="n">BUTTON_WIDTH</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="s">"""Set up the four directional buttons in the frame.

        Parameters:
            parent (Tk): Window in which this widget is to be placed.
        """</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="n">upBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"UP"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span>
                          <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">push_up</span><span class="p">)</span>
        <span class="n">upBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">)</span>
        <span class="n">leftBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"LEFT"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span>
                            <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">push_left</span><span class="p">)</span>
        <span class="n">leftBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">downBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"DOWN"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span>
                            <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">push_down</span><span class="p">)</span>
        <span class="n">downBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">rightBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"RIGHT"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span>
                             <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">push_right</span><span class="p">)</span>
        <span class="n">rightBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">push_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"UP"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">push_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"DOWN"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">push_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"LEFT"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">push_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"RIGHT"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">GameApp</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="s">"""Basic game window design."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="s">"""Initialise the game window layout
           with four directional buttons widget and a screen.

        Parameters:
            master (Tk): Main window for application.
        """</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Buttons are good"</span><span class="p">)</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="n">Controls</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="n">controls</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">screen</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"screen"</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">,</span> 
                          <span class="n">width</span><span class="o">=</span><span class="mi">38</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>


<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">GameApp</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>The first class we wrote is our <code class="highlighter-rouge">Controls</code> class, to represent the directional buttons widget. This class inherits from <code class="highlighter-rouge">Frame</code>, so the <code class="highlighter-rouge">__init__</code> method calls <code class="highlighter-rouge">Super().__init__</code> with the argument <strong><code class="highlighter-rouge">parent</code></strong>. Conventionally <code class="highlighter-rouge">parent</code> is the name used for the widget that will contain this one, i.e. its parent. In this case, the <code class="highlighter-rouge">Controls</code> widget will be contained inside the root Tk object. We might consider another application where the <code class="highlighter-rouge">Controls</code> widget is packed inside a different container widget, such as another <code class="highlighter-rouge">Frame</code>.</p>

<p>The <code class="highlighter-rouge">__init__</code> method then creates our four buttons. Again, as we are not expecting to update or get information from our buttons we do not need to store them in class variables. We want to pack the buttons into the <code class="highlighter-rouge">Controls</code> instance (recall that <code class="highlighter-rouge">Controls</code> is just a specialisation of a <code class="highlighter-rouge">Frame</code>, so we can pack widgets into it). To do this, we set the parent widget of the buttons as <code class="highlighter-rouge">self</code>, the <code class="highlighter-rouge">Controls</code> object.</p>

<p>The <code class="highlighter-rouge">Controls</code> class contains four more methods, which are used as the callbacks for the buttons. By writing these methods in the <code class="highlighter-rouge">Controls</code> class, we make it clear that they will only be used by the four buttons contained in this widget. It also gives these methods access to any information in the <code class="highlighter-rouge">Controls</code> object, which might be necessary if the buttons needed to do more complex tasks.</p>

<p>In the <code class="highlighter-rouge">GameApp</code> class we now only need to create two widgets, our <code class="highlighter-rouge">Controls</code> widget and the <code class="highlighter-rouge">Label</code> widget. (Where we are using the <code class="highlighter-rouge">Label</code> to represent the game’s screen.)</p>

<p>We can now save our code as <code class="highlighter-rouge">game_screen_classes.py</code> and have a look.</p>

<p><img src="images/9B0_GUI_01.png" alt="" /></p>

<p>Writing the code this way, where we group sets of related widgets into classes, makes the code look very simple, and it is. It is easy code to read, debug and modify, which is why this method is preferred.</p>

<p>As well as <code class="highlighter-rouge">Frame</code>, tkInter includes other blank container widgets to arrange widgets inside. The <code class="highlighter-rouge">Toplevel</code> widget represents a new blank window. This can be useful for creating dialog boxes within an application, by creating a class which inherits from <code class="highlighter-rouge">Toplevel</code>.</p>

<h2 id="the-canvas">The Canvas</h2>
<p>We have already seen the <code class="highlighter-rouge">Label</code>, <code class="highlighter-rouge">Button</code> and <code class="highlighter-rouge">Entry</code> widgets and now we consider the <code class="highlighter-rouge">Canvas</code> widget. The <code class="highlighter-rouge">Canvas</code> widget represents a space for drawing objects on the screen, such as lines, ovals and polygons. The following example shows the use of some of the drawing methods available.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>

<span class="k">class</span> <span class="nc">CanvasApp</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Canvas"</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"white"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>

        <span class="n">frame</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="n">drawBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"Draw"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">)</span>
        <span class="n">drawBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">dltBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"Delete"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">)</span>
        <span class="n">dltBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Example 1
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">create_line</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)])</span>

        <span class="c1"># Example 2
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">create_polygon</span><span class="p">([(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="p">(</span><span class="mi">330</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">140</span><span class="p">),</span> <span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">80</span><span class="p">)])</span>

        <span class="c1"># Example 3
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">create_oval</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="n">outline</span><span class="o">=</span><span class="s">"red"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Example 4
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">create_rectangle</span><span class="p">(</span><span class="mi">350</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">431</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s">"blue"</span><span class="p">)</span>

        <span class="c1"># Example 5
</span>        <span class="n">centre</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="mi">50</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">create_oval</span><span class="p">(</span><span class="n">centre</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="n">centre</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">radius</span><span class="p">,</span>
                                 <span class="n">centre</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">radius</span><span class="p">,</span> <span class="n">centre</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">radius</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">create_rectangle</span><span class="p">(</span><span class="n">centre</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="n">centre</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">radius</span><span class="p">,</span>
                                      <span class="n">centre</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">radius</span><span class="p">,</span> <span class="n">centre</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">radius</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">ALL</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">CanvasApp</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>This code is available as <code class="highlighter-rouge">canvas.py</code>. When we run the script, we see a blank white screen with two buttons. When we click on the “Draw” button, we see this result:</p>

<p><img src="images/9B0_GUI_02.png" alt="" /></p>

<p>First, the <code class="highlighter-rouge">CanvasApp</code> creates and packs a <code class="highlighter-rouge">Canvas</code> with a white background, and a width and height of 500 pixels. Each of the drawing methods of the <code class="highlighter-rouge">Canvas</code> use a coordinate system in pixels, where <code class="highlighter-rouge">(0, 0)</code> is the top-left, the positive <code class="highlighter-rouge">x</code> direction is to the right, and the positive <code class="highlighter-rouge">y</code> direction is down the screen. Note that this is different from the standard Cartesian coordinate system where the positive <code class="highlighter-rouge">y</code> direction is up. The coordinates of the bottom-right corner of the canvas are the same as the width and height of the canvas.</p>

<p>Note, we did not create a separate widget for the two control buttons, <code class="highlighter-rouge">Draw</code> and <code class="highlighter-rouge">Delete</code>. As there are only two buttons, this example did not call for the creation of a new widget.</p>

<p>The first object drawn on the canvas is a line. The <code class="highlighter-rouge">create_line</code> method takes a sequence of x and y coordinates, and draws a straight line between each pair of coordinates. The example above shows a line drawn from <code class="highlighter-rouge">(0, 0)</code> in the top-left corner, through <code class="highlighter-rouge">(150, 50)</code>, ending at <code class="highlighter-rouge">(200, 200)</code>. <code class="highlighter-rouge">create_line</code> can also be used to draw a curve or freehand line, by drawing straight lines with many coordinates placed very close together. This does not make an exact curve, but it will appear very close to a curve when viewed on a monitor.</p>

<p>The second object drawn here is a polygon. Similar to drawing a line, it takes a sequence of coordinates. The polygon is then drawn with these coordinates as the vertices, and then the polygon is filled in (coloured black by default). This example shows a kite shape, drawn in the order of the coordinates specified. Note that unlike the <code class="highlighter-rouge">create_line</code> method, <code class="highlighter-rouge">create_polygon</code> will join the last pair of coordinates back to the first (which is necessary to draw a closed polygon).</p>

<p>Example 3 above draws a red oval. Here, we specify four coordinates, representing the leftmost <code class="highlighter-rouge">x</code>-coordinate, the uppermost <code class="highlighter-rouge">y</code>-coordinate, the rightmost <code class="highlighter-rouge">x</code>-coordinate, and the lowermost <code class="highlighter-rouge">y</code>-coordinate. Another way to visualise the drawing of the oval is to imagine a rectangle drawn around it, such as the square and circle arrangement in the above image. When drawing the oval, we specify the top-left and bottom-right corners of the surrounding rectangle, and the oval is drawn inside. Here, we also make use of two optional arguments, <code class="highlighter-rouge">outline</code> and <code class="highlighter-rouge">width</code>. Each of the <code class="highlighter-rouge">Canvas</code> “create” methods can accept optional arguments to specify other details, such as colour and line width. <code class="highlighter-rouge">outline</code> and <code class="highlighter-rouge">width</code> are used to specify the colour and width of the oval’s outline.</p>

<p>Example 4 draws a blue rectangle. To do this, we specify the coordinates of the top-left and bottom-right corners of the rectangle. Here we have also used another optional argument, <code class="highlighter-rouge">fill</code>, to specify the internal colour of the rectangle. By default, ovals and rectangles are transparent. Notice though that the rectangle still has a black border, but it can be hard to spot, because it is only one pixel wide. To set the entire rectangle to the same colour, we would either set the <code class="highlighter-rouge">outline</code> to the same colour, or set the outline <code class="highlighter-rouge">width</code> to 0 to remove the outline entirely.</p>

<p>In the final example, we draw a circle by specifying a centre and radius, then using simple arithmetic to create an oval at the desired coordinates. We also draw a square at the same coordinates. If we were writing an application that involved drawing a lot of circles, we might consider writing a method that takes a pair of coordinates and a radius, and draws a circle centred at those coordinates. This would make the drawing part of the application much easier to write.</p>

<p>The <code class="highlighter-rouge">Canvas</code> has a <code class="highlighter-rouge">delete</code> method, which can be used to remove drawings from the screen. Clicking on the “Delete” button will call <code class="highlighter-rouge">self._canvas.delete(tk.ALL)</code>, which deletes all the drawings. Clicking on “Draw” will bring them back. Note that clicking on “Draw” multiple times will actually draw a complete set of new objects on the canvas each time, but because they all overlap, we only see one set of drawings.</p>

<h2 id="customising-widgets">Customising Widgets</h2>
<p>We will continue with the game example and replace the screen label with a <code class="highlighter-rouge">Canvas</code>. In doing this, we will need to think about the logic of the application. What will be the initial setup of the screen area? What information about the game will need to be stored in the program? How will user interactions change the internal state, and how do we show this change in the screen?</p>

<p>In this simple example, the game involves a circle shown on the screen, initially in the centre. Pressing the four buttons will move the circle around the screen, drawing lines behind it to form a path. To do this, the application will need to keep track of where the circle is, and all the coordinates of where it has been. When updating a figure or drawing on a <code class="highlighter-rouge">Canvas</code> widget, it can often be easiest to clear the entire canvas, then redraw everything from scratch.</p>

<p>Now that we have investigated the functionality required for the canvas, we realise that each of the buttons needs to take a number of steps to complete its task. Because this all seems to be the work of the <code class="highlighter-rouge">Canvas</code>, we will customise <code class="highlighter-rouge">Canvas</code> to have extra methods and attributes to fit our situation. That is, we will write a subclass of <code class="highlighter-rouge">Canvas</code> which has this functionality.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">Screen</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Canvas</span><span class="p">):</span>
    <span class="s">"""A customised Canvas that can move a circle and draw a path."""</span>
    <span class="n">SIZE</span> <span class="o">=</span> <span class="mi">230</span>  <span class="c1"># The size of the screen.
</span>    <span class="n">RADIUS</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># The radius of the circle
</span>    <span class="n">MOVE</span> <span class="o">=</span> <span class="mi">10</span>   <span class="c1"># The amount to move on each step
</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="s">"""Create and initialise a screen.

        Parameters:
            parent (Tk): Window in which this screen is to be placed.
        """</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s">"light blue"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">SIZE</span><span class="p">,</span>
                         <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">SIZE</span><span class="p">)</span>

        <span class="c1"># Start in the centre, without any points in the path.
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SIZE</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SIZE</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_redraw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_redraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Redraw the game screen after a move."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">ALL</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">RADIUS</span><span class="p">,</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">RADIUS</span><span class="p">,</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">RADIUS</span><span class="p">,</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">RADIUS</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_oval</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s">"black"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">):</span>
        <span class="s">"""Move the circle by a given amount. 

        Parameters:
            dx (int): Amount to move in the x-coordinate.
            dy (int): Amount to move in the y-coordinate.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+=</span> <span class="n">dx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">+=</span> <span class="n">dy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_redraw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">move_up</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Move the circle up."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">MOVE</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">move_down</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Move the circle down."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_move</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOVE</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">move_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Move the circle left."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_move</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">MOVE</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">move_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""Move the circle right."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_move</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MOVE</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>This <code class="highlighter-rouge">Screen</code> will store the current coordinates of the circle, and a list of coordinates it has been to. The private method <code class="highlighter-rouge">_redraw</code> will delete and redraw the circle and path on the screen, which is done at the beginning and after every movement. The methods <code class="highlighter-rouge">move_up</code>, <code class="highlighter-rouge">move_down</code>, <code class="highlighter-rouge">move_left</code> and <code class="highlighter-rouge">move_right</code> will perform the actions required by the four buttons. Note that, as <code class="highlighter-rouge">Screen</code> inherits from <code class="highlighter-rouge">Canvas</code>, it can make method calls such as <code class="highlighter-rouge">self.delete(tk.ALL)</code> and <code class="highlighter-rouge">self.create_oval</code> to draw on the canvas. We can now modify the <code class="highlighter-rouge">Controls</code> and <code class="highlighter-rouge">GameApp</code> classes to use a <code class="highlighter-rouge">Screen</code>:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">Controls</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="s">"""Widget containing four directional buttons."""</span>

    <span class="n">BUTTON_WIDTH</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="s">"""Set up the four directional buttons in the frame.

        Parameters:
            parent (Tk): Window in which this widget is to be placed.
            screen (Screen): Screen which has the movement methods.
        """</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="n">upBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"UP"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span>
                          <span class="n">command</span><span class="o">=</span><span class="n">screen</span><span class="o">.</span><span class="n">move_up</span><span class="p">)</span>
        <span class="n">upBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">)</span>
        <span class="n">leftBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"LEFT"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span>
                            <span class="n">command</span><span class="o">=</span><span class="n">screen</span><span class="o">.</span><span class="n">move_left</span><span class="p">)</span>
        <span class="n">leftBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">downBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"DOWN"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span>
                            <span class="n">command</span><span class="o">=</span><span class="n">screen</span><span class="o">.</span><span class="n">move_down</span><span class="p">)</span>
        <span class="n">downBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">rightBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">"RIGHT"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">BUTTON_WIDTH</span><span class="p">,</span>
                             <span class="n">command</span><span class="o">=</span><span class="n">screen</span><span class="o">.</span><span class="n">move_right</span><span class="p">)</span>
        <span class="n">rightBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">GameApp</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="s">"""Basic game window design."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="s">"""Initialise the game window layout with
           four directional buttons and a screen.

        Parameters:
            master (Tk): Main window for application.
        """</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Game"</span><span class="p">)</span>
        <span class="n">screen</span> <span class="o">=</span> <span class="n">Screen</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="n">Controls</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">screen</span><span class="p">)</span>
        <span class="n">controls</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>The updated <code class="highlighter-rouge">Controls</code> class now also requires the <code class="highlighter-rouge">Screen</code> object, and it uses this to access the four methods needed as <code class="highlighter-rouge">Button</code> callbacks. The <code class="highlighter-rouge">GameApp</code> is also modified to create a <code class="highlighter-rouge">Screen</code> instead of a <code class="highlighter-rouge">Label</code>. This code is available to download as <code class="highlighter-rouge">game_canvas.py</code>. When we interact with this program, we see this result:</p>

<p><img src="images/9B0_GUI_03.png" alt="" /></p>

<div class="aside">

  <h4 id="aside-separating-the-controls-and-screen">Aside: Separating the <code class="highlighter-rouge">Controls</code> and <code class="highlighter-rouge">Screen</code></h4>
  <p>The constructor of the <code class="highlighter-rouge">Controls</code> class above requires an object called <code class="highlighter-rouge">screen</code>, and it uses this to access <code class="highlighter-rouge">move_up</code>, <code class="highlighter-rouge">move_left</code>, <code class="highlighter-rouge">move_down</code> and <code class="highlighter-rouge">move_right</code>, which should be methods that perform the relevant actions. For this program, there is no problem, but what if we wanted to modify the program? There are several potential issues to watch out for.</p>

  <p>If we modified (or replaced) the <code class="highlighter-rouge">Screen</code> and renamed the four movement methods, we would need to modify the code in <code class="highlighter-rouge">Controls</code>. Worse, if the methods were moved into separate classes, or made into top-level functions, we could no longer pass in a single object to <code class="highlighter-rouge">Controls</code> which can access all the methods. This is still not a major issue in an application this small, but in a larger application, many other classes could be dependent on the <code class="highlighter-rouge">Screen</code>, which would cause problems when we tried to change the <code class="highlighter-rouge">Screen</code>. We could also imagine a situation where multiple <code class="highlighter-rouge">Controls</code> widgets were needed, each requiring different method names.</p>

  <p>To fix these issues, we can modify the <code class="highlighter-rouge">Controls</code> class to require the four callback functions directly; then the internals of <code class="highlighter-rouge">Controls</code> would still work, even if the methods were renamed or moved. We then have this result:</p>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Controls&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Frame&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;span class="n"&gt;BUTTON_WIDTH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;down&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;left&lt;/span&gt; &lt;span class="n"&gt;right&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;super&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;upBtn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"UP"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BUTTON_WIDTH&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;up&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;upBtn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;side&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TOP&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;leftBtn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"LEFT"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BUTTON_WIDTH&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;left&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;leftBtn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;side&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LEFT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;downBtn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"DOWN"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BUTTON_WIDTH&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;down&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;downBtn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;side&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LEFT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rightBtn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"RIGHT"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BUTTON_WIDTH&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;right&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rightBtn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;side&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LEFT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
</code></pre></div>    </div>

    <p><span class="k">class</span> <span class="nc">GameApp</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf"><strong>init</strong></span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">“Game”</span><span class="p">)</span>
        <span class="n">screen</span> <span class="o">=</span> <span class="n">Screen</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="n">Controls</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">screen</span><span class="o">.</span><span class="n">move_up</span><span class="p">,</span> <span class="n">screen</span><span class="o">.</span><span class="n">move_down</span><span class="p">,</span>
                                    <span class="n">screen</span><span class="o">.</span><span class="n">move_left</span><span class="p">,</span> <span class="n">screen</span><span class="o">.</span><span class="n">move_right</span><span class="p">)</span>
        <span class="n">controls</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;</p>
  </div>

  <p>The <code class="highlighter-rouge">GameApp</code> is also modified to access the respective methods of <code class="highlighter-rouge">Screen</code>. In a sense, we have now completely separated the <code class="highlighter-rouge">Controls</code> and <code class="highlighter-rouge">Screen</code> classes, and the interaction between them is defined entirely by the <code class="highlighter-rouge">GameApp</code> class. In a larger application, moving all of this control to the one class will make it much easier to treat all the other classes as distinct from each other.</p>

  <p>The implementation for this code is provided in <code class="highlighter-rouge">game_canvas_sep_controls.py</code>.</p>
</div>

<h2 id="events">Events</h2>
<p>The program we wrote above feels difficult to use. In particular, the use of the four buttons is unintuitive. We would like the user to interact directly with the canvas using mouse gestures. <code class="highlighter-rouge">tkInter</code> provides a means of doing this using <strong>events</strong>. An event is a trigger which occurs when the user makes an action with the mouse or keyboard. For example, when the user makes a left click, <code class="highlighter-rouge">tkInter</code> will trigger a <code class="highlighter-rouge">&lt;Button-1&gt;</code> event, and when the user drags the mouse with a left click, <code class="highlighter-rouge">tkInter</code> will trigger a <code class="highlighter-rouge">&lt;B1-Motion&gt;</code> event. To use these types of event, we must <code class="highlighter-rouge">bind</code> the event to a callback function, similar to a callback function for a <code class="highlighter-rouge">Button</code>. Widgets have a method bind which takes an event name (as a string) and a callback function. The function must take one argument, typically called <code class="highlighter-rouge">event</code>, which contains information on the trigger that occurred. For example, if the mouse was clicked or moved, the <code class="highlighter-rouge">event</code> would contain the coordinates of the cursor.</p>

<p>As an example, we will modify the game screen example so that clicking and dragging will move the circle. We should again consider the application logic: what should happen when the mouse is pressed or released? What should happen when the pressed mouse is dragged slightly? If the mouse is pressed, we should look to see if we have clicked on the circle, and if so mark it as being “selected”. When the mouse is dragged, we should see if the circle has been selected, and if so move it accordingly. When the mouse is released, then we mark the circle as “deselected”.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Screen</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Canvas</span><span class="p">):</span>
    <span class="s">""</span><span class="n">Customised</span> <span class="n">Canvas</span> <span class="n">that</span> <span class="n">can</span> <span class="n">move</span> <span class="n">a</span> <span class="n">circle</span> <span class="ow">and</span> <span class="n">draw</span> <span class="n">a</span> <span class="n">path</span><span class="o">.</span><span class="s">"""
    SIZE = 230   # The size of the screen.
    RADIUS = 5   # The radius of the circle

    def __init__(self, parent):
        """</span><span class="n">Create</span> <span class="ow">and</span> <span class="n">initialise</span> <span class="n">a</span> <span class="n">screen</span><span class="o">.</span>

        <span class="n">Parameters</span><span class="p">:</span>
            <span class="n">parent</span> <span class="p">(</span><span class="n">Tk</span><span class="p">):</span> <span class="n">Window</span> <span class="ow">in</span> <span class="n">which</span> <span class="n">this</span> <span class="n">screen</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">be</span> <span class="n">placed</span><span class="o">.</span>
        <span class="s">"""
        super().__init__(parent, bg="light blue", width=self.SIZE,
                         height=self.SIZE)

        # Start in the centre, without any points in the path.
        self._x, self._y = (self.SIZE / 2, self.SIZE / 2)
        self._path = [(self._x, self._y)]

        self._circle_select = False   # Is the circle selected.
        self.bind("&lt;Button-1&gt;", self._click_event)
        self.bind("&lt;B1-Motion&gt;", self._move_event)

        self._redraw()


    def _redraw(self):
        """</span><span class="n">Redraw</span> <span class="n">the</span> <span class="n">game</span> <span class="n">screen</span> <span class="n">after</span> <span class="n">a</span> <span class="n">move</span><span class="o">.</span><span class="s">"""
        self.delete(tk.ALL)
        coords = (self._x - self.RADIUS,
                  self._y - self.RADIUS,
                  self._x + self.RADIUS,
                  self._y + self.RADIUS)
        self.create_oval(coords, fill="black", width=0)
        if len(self._path) &gt; 1:
            self.create_line(self._path)

    def _move(self, dx, dy):
        """</span><span class="n">Move</span> <span class="n">the</span> <span class="n">circle</span> <span class="n">by</span> <span class="n">a</span> <span class="n">given</span> <span class="n">amount</span><span class="o">.</span> 

        <span class="n">Parameters</span><span class="p">:</span>
            <span class="n">dx</span> <span class="p">(</span><span class="nb">int</span><span class="p">):</span> <span class="n">Amount</span> <span class="n">to</span> <span class="n">move</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">x</span><span class="o">-</span><span class="n">coordinate</span><span class="o">.</span>
            <span class="n">dy</span> <span class="p">(</span><span class="nb">int</span><span class="p">):</span> <span class="n">Amount</span> <span class="n">to</span> <span class="n">move</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">y</span><span class="o">-</span><span class="n">coordinate</span><span class="o">.</span>
        <span class="s">"""
        self._x += dx
        self._y += dy
        self._path.append((self._x, self._y))
        self._redraw()

    def _click_event(self, event):
        """</span><span class="n">Sets</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">circle</span> <span class="ow">is</span> <span class="n">selected</span><span class="o">.</span>
        
        <span class="n">Parameters</span><span class="p">:</span>
            <span class="n">event</span> <span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Event</span><span class="p">):</span> <span class="n">Selection</span> <span class="n">event</span> <span class="k">with</span> <span class="n">mouse</span> <span class="n">coordinates</span><span class="o">.</span>        
        <span class="s">"""
        dist_to_circle = math.hypot(event.x - self._x, event.y - self._y)
        self._circle_select = (dist_to_circle &lt; self.RADIUS)

    def _move_event(self, event):
        """</span><span class="n">Calculates</span> <span class="n">the</span> <span class="n">distance</span> <span class="n">to</span> <span class="n">move</span> <span class="n">the</span> <span class="n">circle</span> <span class="n">so</span> <span class="n">that</span> <span class="n">it</span> <span class="n">moves</span> 
           <span class="n">With</span> <span class="n">the</span> <span class="n">mouse</span><span class="o">.</span>
        
        <span class="n">Parameters</span><span class="p">:</span>
            <span class="n">event</span> <span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">Event</span><span class="p">):</span> <span class="n">Drag</span> <span class="n">event</span> <span class="k">with</span> <span class="n">the</span> <span class="n">new</span> <span class="n">mouse</span> <span class="n">coordinates</span><span class="o">.</span>
        <span class="s">"""
        if self._circle_select:
            dx = event.x - self._x
            dy = event.y - self._y
            self._move(dx, dy)


class GameApp(object):
    """</span><span class="n">Basic</span> <span class="n">game</span> <span class="n">to</span> <span class="n">move</span> <span class="n">a</span> <span class="n">circle</span> <span class="n">around</span> <span class="n">a</span> <span class="n">screen</span> <span class="k">with</span> <span class="n">the</span> <span class="n">mouse</span><span class="o">.</span><span class="s">"""
    def __init__(self, master):
        """</span><span class="n">Initialise</span> <span class="n">the</span> <span class="n">game</span> <span class="n">screen</span><span class="o">.</span>

        <span class="n">Parameters</span><span class="p">:</span>
            <span class="n">master</span> <span class="p">(</span><span class="n">Tk</span><span class="p">):</span> <span class="n">Main</span> <span class="n">window</span> <span class="k">for</span> <span class="n">application</span><span class="o">.</span>
        <span class="s">"""
        screen = Screen(master)
        screen.pack(side=tk.LEFT, expand=True, fill=tk.BOTH)


root = tk.Tk()
app = GameApp(root)
root.mainloop()
</span></code></pre>
    </div>
  </div>
</div>

<p>We have removed the buttons as they are no longer needed, we will now have full control over the circle with the mouse. The first big change to notice is the addition of three new lines in the <code class="highlighter-rouge">Screen.__init__</code> method. The first line is simply a boolean value to tell if the circle is selected. The next two lines are calling the <strong><code class="highlighter-rouge">bind</code></strong> method. <code class="highlighter-rouge">bind</code> takes a string as the first argument for what type of event we are interested in. The second argument is the method to call when that event occurs. The two events we are interested in is <strong><code class="highlighter-rouge">Button-1</code></strong> (If the left mouse button is clicked) and <strong><code class="highlighter-rouge">B1-Motion</code></strong> (If the mouse is moved while the left mouse button is held down).</p>

<p>Next, we have removed the four move methods of <code class="highlighter-rouge">Screen</code> and replaced them with two new methods. These methods are the methods called by our two bound events. Notice how each takes an argument <code class="highlighter-rouge">event</code>. This argument is the event. It is a class of Python and contains information about the event that occurred. We can use <code class="highlighter-rouge">event</code> to access the x, y location of the mouse when the event occurred by accessing the class variable. The <code class="highlighter-rouge">_click_event</code> method sets <code class="highlighter-rouge">self._circle_select</code> to a boolean value representing whether or not the mouse is inside the circle. The <code class="highlighter-rouge">_move_event</code> method calculates the distance between where the circle is and where the mouse is so that we can move the circle to the mouse’s location.</p>

<p>We can now save our code as <code class="highlighter-rouge">game.py</code> and have a look at our new game.</p>

<p><img src="images/9B0_GUI_04.png" alt="" /></p>

<p>We can now move the circle any way that we wish at any time just by simply moving the mouse.</p>

<div class="aside">

  <h4 id="more-about-events">More About Events</h4>
  <p>Here is a table of some of the events that can be used. (Sourced from <a href="http://www.python-course.eu/tkinter_events_binds.php">http://www.python-course.eu/tkinter_events_binds.php</a>)</p>

  <table>
    <thead>
      <tr>
        <th>Events</th>
        <th><strong>Description</strong></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code class="highlighter-rouge">&lt;Button-1&gt;</code></td>
        <td>A mouse button is pressed over the widget. Button 1 is the leftmost button, button 2 is the middle button (where available), and button 3 the rightmost button. When a mouse button is pressed down over a widget, Tkinter will automatically “grab” the mouse pointer, and mouse events will then be sent to the current widget as long as the mouse button is held down. The current position of the mouse pointer (relative to the widget) is provided in the <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> members of the event object passed to the callback.</td>
      </tr>
      <tr>
        <td><code class="highlighter-rouge">&lt;B1-Motion&gt;</code></td>
        <td>The mouse is moved, with mouse button 1 being held down (use B2 for the middle button, B3 for the right button). The current position of the mouse pointer is provided in the <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> members of the event object passed to the callback.</td>
      </tr>
      <tr>
        <td><code class="highlighter-rouge">&lt;Return&gt;</code></td>
        <td>The user pressed the Enter key. Virtually all keys on the keyboard can be bound to. For an ordinary 102-key PC-style keyboard, the special keys are <strong>Cancel</strong> (the Break key), <strong>BackSpace</strong>, <strong>Tab</strong>, <strong>Return</strong>(the Enter key), <strong>Shift_L</strong> (any Shift key), <strong>Control_L</strong> (any Control key), <strong>Alt_L</strong> (any Alt key), <strong>Pause</strong>, <strong>Caps_Lock</strong>, <strong>Escape</strong>, <strong>Prior</strong> (Page Up), <strong>Next</strong> (Page Down), <strong>End</strong>, <strong>Home</strong>, <strong>Left</strong>, <strong>Up</strong>, <strong>Right</strong>, <strong>Down</strong>, <strong>Print</strong>, <strong>Insert</strong>, <strong>Delete</strong>, <strong>F1</strong>, <strong>F2</strong>, <strong>F3</strong>, <strong>F4</strong>, <strong>F5</strong>, <strong>F6</strong>, <strong>F7</strong>, <strong>F8</strong>, <strong>F9</strong>, <strong>F10</strong>, <strong>F11</strong>, <strong>F12</strong>, <strong>Num_Lock</strong>, and <strong>Scroll_Lock</strong>.</td>
      </tr>
      <tr>
        <td><code class="highlighter-rouge">&lt;Key&gt;</code></td>
        <td>The user pressed any key. The key  is provided in the <code class="highlighter-rouge">char</code> member of the event object passed  to the callback (this is an empty string for special keys).</td>
      </tr>
      <tr>
        <td><code class="highlighter-rouge">a</code></td>
        <td>The user typed an “a”.  Most printable characters can be used as is. The exceptions are space (<code class="highlighter-rouge">&lt;space&gt;</code>) and less than (<code class="highlighter-rouge">&lt;less&gt;</code>). Note that <code class="highlighter-rouge">1</code> is a keyboard binding, while <code class="highlighter-rouge">&lt;1&gt;</code> is a button binding.</td>
      </tr>
      <tr>
        <td><code class="highlighter-rouge">&lt;Configure&gt;</code></td>
        <td>The widget changed size (or  location, on some platforms). The new size is provided in the <code class="highlighter-rouge">width</code> and <code class="highlighter-rouge">height</code> attributes of the event object  passed to the callback.</td>
      </tr>
    </tbody>
  </table>

  <p>Some of the attributes of the <code class="highlighter-rouge">event</code> class</p>

  <p>| Attribute          | Description                                                  |
| —————— | ———————————————————— |
| <code class="highlighter-rouge">x</code>, <code class="highlighter-rouge">y</code>           | The current mouse position, in pixels.                       |
| <code class="highlighter-rouge">x_root</code>, <code class="highlighter-rouge">y_root</code> | The current mouse position relative to the upper left corner of the screen, in pixels. |
| <code class="highlighter-rouge">char</code>             | The character code (keyboard events only), as a string.      |
| <code class="highlighter-rouge">width</code>, <code class="highlighter-rouge">height</code>  | The new size of the widget, in pixels (Configure events only). |
| <code class="highlighter-rouge">type</code>             | The event type.                                              |</p>
</div>

<h2 id="more-tkinter">More tkInter</h2>
<p>In this example, we will create a simple text editor application. This text editor will be able to open, edit, save and close files. We will also keep track of whether the text file has been edited without saving, and prompt the user to save before exiting.</p>

<p>We will introduce a new widget, <code class="highlighter-rouge">Text</code>, to represent the text editing area. This widget has three methods which will be useful in this application: <code class="highlighter-rouge">text.get(1.0, tk.END)</code> will retrieve the text which has been entered into the widget, <code class="highlighter-rouge">text.delete(1.0, tk.END)</code> will remove all the text from the widget, and <code class="highlighter-rouge">text.insert(tk.END, string)</code> will insert a <em><code class="highlighter-rouge">string</code></em> of text into the widget. There are many other types of widgets not described here, to represent other GUI elements, such as lists of elements, scroll bars, check boxes, and radio buttons. Each has its own set of methods which are useful in manipulating the information that type of widget stores.</p>

<p>To open and save files, we will use the tkInter <code class="highlighter-rouge">filedialog</code> module. This module is imported using the other type of <code class="highlighter-rouge">import</code> that is performed as follows: <code class="highlighter-rouge">from module import submodule_or_class</code> This comes with two methods, <code class="highlighter-rouge">askopenfilename</code> for choosing a file to open, and <code class="highlighter-rouge">asksaveasfilename</code> for choosing a file to save to. These functions will open a dialog box prompting the user to choose a file, and then return the file name. The appearance of the dialog boxes is determined by the operating system (that is, it is a <strong>native</strong> dialog box), so the user will already be familiar with using the dialog without requiring effort from the programmer.</p>

<p>We will also need to display short dialog message boxes. When the user tries to abandon a file without saving changes, we will prompt them to save. We will add this functionality to an “Exit” menu item, as well as when the user closes the window using the “X” button on the top of the window. We will also create a simple “About” dialog box, giving information about the text editor when the user asks for it. These dialog boxes will be <strong>modal</strong>; this means that the user will not be able to continue using the application until they respond to the dialog. We will use tkInter’s <code class="highlighter-rouge">messagebox</code> module. This comes with several functions for showing different types of dialog such as errors, warnings, “Yes/No” or “Retry/Cancel” questions. They can be customised to show different titles, messages, icons and buttons, and will return a value based on the user’s button choice.</p>

<p>We will also introduce the <code class="highlighter-rouge">Menu</code> widget, for adding the native menus on the top of the window. To make a set of menus, we create a <code class="highlighter-rouge">Menu</code> object to represent the menu bar. We then add more <code class="highlighter-rouge">Menu</code> objects to represent each of the drop-down menus. To add individual menu items, we give them a label and assign a callback <code class="highlighter-rouge">command</code>, just as we create callbacks for buttons.</p>

<p>We will now write the text editor application. As well as constructing the GUI, we will need to store the filename of the document being edited. We will also store a boolean flag indicating whether or not the file has been edited without saving. When we attempt to close the file or open a new one, we will check to see if the user wishes to save their work.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="n">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">filedialog</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">messagebox</span>


<span class="k">class</span> <span class="nc">TextEditor</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Simple text editing application."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">""" Create the screen for the text editor

        Parameters:
            master (Tk): Window in which this application is to be displayed.        
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Text Editor"</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="s">''</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_edited</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">"&lt;Key&gt;"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_edited</span><span class="p">)</span>

        <span class="c1"># Create the menu.
</span>        <span class="n">menubar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="n">master</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">menu</span><span class="o">=</span><span class="n">menubar</span><span class="p">)</span>

        <span class="n">filemenu</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="n">menubar</span><span class="p">)</span>
        <span class="n">menubar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"File"</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">filemenu</span><span class="p">)</span>
        <span class="n">filemenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"New"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>
        <span class="n">filemenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Open"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">open_file</span><span class="p">)</span>
        <span class="n">filemenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Save"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">)</span>
        <span class="n">filemenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Save As..."</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">save_as</span><span class="p">)</span>
        <span class="n">filemenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Exit"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>

        <span class="n">helpmenu</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="n">menubar</span><span class="p">)</span>
        <span class="n">menubar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Help"</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">helpmenu</span><span class="p">)</span>
        <span class="n">helpmenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"About"</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">about</span><span class="p">)</span>

        <span class="n">master</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s">"WM_DELETE_WINDOW"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">new</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Create a new text file."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_can_close</span><span class="p">()</span> <span class="p">:</span>
            <span class="c1"># Forget about the currently open file.
</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="s">''</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Text Editor"</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_edited</span> <span class="o">=</span> <span class="bp">False</span>


    <span class="k">def</span> <span class="nf">open_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Open a text file."""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_can_close</span><span class="p">()</span> <span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askopenfilename</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Text Editor: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_edited</span> <span class="o">=</span> <span class="bp">False</span>


    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">""" Save the contents of the text in memory to the file."""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_save</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">save_as</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">""" Allow saving the contents of the text in memory to a new file."""</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">asksaveasfilename</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_perform_save</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Exit the text editor application."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_can_close</span><span class="p">()</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">about</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Generate an 'About' dialog."""</span>
        <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">"Text Editor"</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s">"A simple text editor"</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_set_edited</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Record that the text file has been edited.
        
        Parameters:
            event (Tk.Event): Record that text has been edited if any event
                              occurs in the text.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_edited</span> <span class="o">=</span> <span class="bp">True</span>


    <span class="k">def</span> <span class="nf">_perform_save</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="p">:</span>
        <span class="s">"""Store the contents in memory into a file."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Text Editor: {0}"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">))</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">,</span> <span class="s">"w"</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_edited</span> <span class="o">=</span> <span class="bp">False</span>


    <span class="k">def</span> <span class="nf">_can_close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">""" Ask the user if they want to save the changed text to a file. 	
        Returns:
            (bool) True if it is safe to close the file;
                   False if the user wants to continue editing.
        """</span>
        <span class="n">can_close</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_edited</span> <span class="p">:</span>
            <span class="n">reply</span> <span class="o">=</span> <span class="n">messagebox</span><span class="o">.</span><span class="n">askquestion</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">messagebox</span><span class="o">.</span><span class="n">YESNOCANCEL</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="s">"File not saved!"</span><span class="p">,</span>
                        <span class="n">message</span><span class="o">=</span><span class="s">"Would you like to save this file?"</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">messagebox</span><span class="o">.</span><span class="n">YES</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>   <span class="c1"># can_close is already True.
</span>            <span class="c1"># elif reply == messagebox.NO :
</span>                <span class="c1"># can_close is already True.
</span>            <span class="k">elif</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">messagebox</span><span class="o">.</span><span class="n">CANCEL</span> <span class="p">:</span>
                <span class="n">can_close</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># else file is not edited, so can close.
</span>        <span class="k">return</span> <span class="n">can_close</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span> <span class="p">:</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
    <span class="n">TextEditor</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>First, we will look at the <code class="highlighter-rouge">__init__</code> method. We create and pack a <code class="highlighter-rouge">Text</code>, and bind the <code class="highlighter-rouge">"&lt;Key&gt;"</code> event to a method which will set the <code class="highlighter-rouge">_is_edited</code> flag to True whenever a key is pressed. The statement <code class="highlighter-rouge">menubar = tk.Menu(master)</code> will create a menu bar for the <code class="highlighter-rouge">master</code> window, and in the line below, we configure the <code class="highlighter-rouge">master</code> to display this menu bar. To create menus, <code class="highlighter-rouge">tk.Menu(menubar)</code> will create an empty menu list, and <code class="highlighter-rouge">menubar.add_cascade</code> will insert it onto the menu bar with the given text label. To add a menu item, we use the method <code class="highlighter-rouge">add_command</code>, and pass in a text label to display, and a callback function, just as with <code class="highlighter-rouge">Button</code> objects. If, for example, we wanted to create a sub-menu to the “File” menu, we would create <code class="highlighter-rouge">tk.Menu(filemenu)</code> and call <code class="highlighter-rouge">filemenu.add_cascade</code>; menu items and further sub-menus can then be added into this menu. The statement <code class="highlighter-rouge">master.protocol("WM_DELETE_WINDOW", self.close)</code> is similar to a binding; it allows us to set an action to perform when a particular event occurs. In this case, <code class="highlighter-rouge">"WM_DELETE_WINDOW"</code> is the event represented by closing the window (using the “X” icon), and we set the <code class="highlighter-rouge">self.close</code> method as a callback. Note that the same callback is also assigned to the “File -&gt; Exit” menu item, so either of these actions will do the same thing.</p>

<p>In the <code class="highlighter-rouge">new</code>, <code class="highlighter-rouge">open</code> and <code class="highlighter-rouge">close</code> methods, we need to check if the user has edited the file and wishes to save. To do this, we use the <code class="highlighter-rouge">_can_close</code> helper method to ask this question, save if necessary, and return <code class="highlighter-rouge">False</code> if the user wishes to continue editing the file. Since the <code class="highlighter-rouge">save</code> and <code class="highlighter-rouge">save_as</code> functionality is similar (they both save the text to a file), we abstract this to the <code class="highlighter-rouge">_perform_save</code> method.</p>

<p>This program is available to download as <code class="highlighter-rouge">text_editor.py</code>. When we run the application, we now see this:</p>

<p><img src="images/9B0_GUI_05.png" alt="" /></p>

<blockquote class="blockquote">
  <p>I warn this programme that any recurrence of this sloppy long-haired civilian plagiarism</p>
  <p>will be dealt with most severely</p>
</blockquote>

<h1 id="recursion">Recursion</h1>

<p>Here is a famous example of visual recursion often called the Droste effect. Droste is a Dutch chocolate maker. Notice that the box has a picture of the box on it, which itself has a picture of the box on it. If the picture were detailed enough, this would continue endlessly.</p>

<p><img src="images/11A0_recursion_01.png" alt="" /></p>

<h2 id="another-problem-solving-strategy">Another Problem Solving Strategy</h2>
<p>In this section, we will look into another way of solving problems. To do this, we will start with a very simple example.</p>

<p>Suppose we have the problem of summing a list of numbers (without using the existing sum function). This is an easy task, but we’ll take a different approach to solving it than we’ve seen before. To be explicit, we need to write the body for this function definition:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Add up a list of numbers.
    
    Parameters:
        numbers (list): List of numbers to be summed.

    Return:
        float: Sum of all the values in 'numbers'.
    """</span>
    <span class="k">pass</span> <span class="c1"># Something else goes here.
</span></code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">pass</code> keyword is a statement that does nothing when it is executed; it is known as a “no operation” statement, usually abbreviated to NOP or NOOP (pronounced “no-op”). It is useful as a placeholder when a block of code is needed but has not been written yet. When we write the function body, we will remove the <code class="highlighter-rouge">pass</code> statement.</p>

<p>Here is the plan: To add up a list of numbers, we will take the first number, and add on the sum of the remaining (all but the first) numbers. Check that this process will give the correct sum. Here is an expression which should get the first number of a list and add together the remaining numbers:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">numbers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">add</span><span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</code></pre>
    </div>
  </div>
</div>

<p>Notice what is happening here: that we are solving the problem of adding up a list of numbers by adding up a smaller list of numbers. To add up this smaller list of numbers, we can apply this process again, and add up an even smaller list of numbers, and so on. A function that computes a result by calling the same function is called a <strong>recursive</strong> function. <strong>Recursion</strong> is the method of problem solving by using recursive functions.</p>

<p>But there is a slight problem here: we are not really ever adding up the numbers, we are just constantly changing the problem to a smaller list of numbers. We need to decide on a point where it is more sensible to just return a result instead of trying to go further. That point comes when we have reached the smallest list possible, which is the empty list. If the list is empty, then the result of the sum should be 0 (when there are no numbers to add up, the total is zero).</p>

<p>Summarising, our strategy is now in two separate cases: if the list is empty, then the result is 0. Otherwise, the result is <code class="highlighter-rouge">numbers[0] + add(numbers[1:])</code>. This makes it very easy to write the function:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Add up a list of numbers.
    
    Parameters:
        numbers (list): List of numbers to be summed.

    Return:
        float: Sum of all the values in 'numbers'.
    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">numbers</span> <span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">numbers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">add</span><span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</code></pre>
    </div>
  </div>
</div>

<p>We have seen plenty of examples of functions or methods whose definitions contain occurrences of other functions or methods. The above example shows that there is nothing to stop us defining a function that contains an occurrence of itself. Does this <code class="highlighter-rouge">add</code> function work? Download <code class="highlighter-rouge">add.py</code> to test it.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">add</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="mi">16</span>
</code></pre>
    </div>
  </div>
</div>

<div class="aside">

  <h4 id="aside-be-efficient">Aside: Be Efficient</h4>
  <p>Notice that each recursive step of our <code class="highlighter-rouge">add</code> function performs a list slice <code class="highlighter-rouge">numbers[1:]</code>, which essentially makes a copy of the whole list. Doing this at every step makes the recursive function inefficient. In the <code class="highlighter-rouge">next section</code>, we will return to the question of efficiency. A more efficient way to add a list of numbers would be to use a loop, or the built-in <code class="highlighter-rouge">sum</code> function.</p>
</div>

<h2 id="using-recursion">Using Recursion</h2>
<p>What is involved in designing a recursive function? One is the <strong>recursive step</strong> case, which typically involves solving the problem by calling the same function with a slightly smaller input. Examples of “smaller input” are a list or string with the first element removed, or a number minus one. The other is the <strong>base case</strong> or termination case, which is typically on the smallest possible input, where solving the problem is typically a trivial task. For example, the input for a base case might be an empty list or string, or the number 0 (or another small number).</p>

<p>In the case of the <code class="highlighter-rouge">add</code> example, the recursive step is to say that the sum of the list <code class="highlighter-rouge">numbers</code> is given by <code class="highlighter-rouge">numbers[0] + add(numbers[1:])</code>, where <code class="highlighter-rouge">numbers[1:]</code> is our slightly smaller sub-problem. The base case is found when the list is empty, in this case the result is 0. It is useful to ensure that the base case deals with any situation that does not apply to the recursive step. In the <code class="highlighter-rouge">add</code> function, the expression <code class="highlighter-rouge">numbers[0] + add(numbers[1:])</code> doesn’t work when the list is empty (since “<code class="highlighter-rouge">numbers[0]</code>” will raise an <code class="highlighter-rouge">IndexError</code>), so this must be handled by the base case.</p>

<p>It may be useful to explicitly study how the recursive <code class="highlighter-rouge">add</code> function computes a result. See the visualisation of the <code class="highlighter-rouge">add</code> function on BlackBoard.</p>

<p>When writing a recursive function, it is often helpful to apply wishful thinking. In this process, we assume that we can solve the problem with smaller inputs and think about how that could be used. That is, if we knew the solution to a smaller problem, how could we find the solution to our problem? Once that is answered, how does that recursive step eventually reach a “simplest case,” and how do we handle that case?</p>

<h2 id="recursive-definitions">Recursive Definitions</h2>

<p>In computer science and mathematics, <strong>recursive definitions</strong> are definitions that refer to themselves. For example, one definition of the factorial function <code class="highlighter-rouge">n!</code> is:</p>

<p><img src="images/11A0_recursion_02.png" alt="" /></p>

<p>A recursive definition is very easy to translate directly into Python code. The above definition of the factorial function can be represented in Python as:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Calculate the factorial of the given number 'n'.
     
    Parameters:
        n (int): Number for which the factorial is to be calculated.

    Return:
        int: Factorial of 'n'.
    """</span>
     <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span>
</code></pre>
    </div>
  </div>
</div>

<p>Do we really need recursion? Can’t we just write a while loop to do the work? How about the following definition?</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">factorial2</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Calculate the factorial of the given number 'n'.
     
    Parameters:
        n (int): Number for which the factorial is to be calculated.

    Return:
        int: Factorial of 'n'.
    """</span>
    <span class="n">factorial</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="n">factorial</span> <span class="o">*=</span> <span class="n">n</span>
        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">factorial</span>
</code></pre>
    </div>
  </div>
</div>

<p>This certainly works — not exactly. Both versions have a problem if we supply them with a negative integer or a float. They will both go into ‘infinite loops’ as subtracting 1 will never reach the terminating condition <code class="highlighter-rouge">n == 0</code>. We really need to constrain <code class="highlighter-rouge">n</code> to be a non-negative integer.</p>

<p>It is clear that the recursive Python definition is an obviously correct implementation of the mathematical definition but it is not so clear that the non-recursive definition is a correct implementation. This is to be expected though — a recursive mathematical definition should have a more direct translation into a recursive program than a non-recursive one.</p>

<p>Still, recursion is not really needed here — we can work a bit harder and avoid recursion. Is this always the case? No — it turns out that there a certain kinds of problems that are just “inherently recursive”.</p>

<h2 id="a-counting-problem">A Counting Problem</h2>

<p>As an example, we will write a recursive function to solve the following counting problem.</p>

<p>Consider the grid below, each corner is at integer coordinates. We start at the top-left, <code class="highlighter-rouge">(0,0)</code>, and we are allowed to move down and right along the lines in the grid to reach the coordinates <code class="highlighter-rouge">(x,y)</code>. The task to solve is, how many different paths can we take to reach the point <code class="highlighter-rouge">(x,y)</code>? For example, two possible paths from <code class="highlighter-rouge">(0,0)</code> to <code class="highlighter-rouge">(3,4)</code> are shown below.</p>

<p><img src="images/11A0_recursion_03.png" alt="" /></p>

<p>We will write a function <code class="highlighter-rouge">num_paths(x, y)</code> to solve this problem. To solve a problem like this it can help to start with a pen and paper and try a few examples to get a handle on the problem. We can try this and use wishful thinking: if we knew the number of paths to other points on the grid, could we easily find the number of paths to the one we’re interested in?</p>

<p>We quickly notice that every path to <code class="highlighter-rouge">(x,y)</code> must finish by going through either of the points next to it: <code class="highlighter-rouge">(x-1,y)</code> or <code class="highlighter-rouge">(x,y-1)</code>. How does this help? We can see from this that the number of paths to <code class="highlighter-rouge">(x,y)</code> is the sum of the number of paths to each of these adjacent points: 
<code class="highlighter-rouge">num_paths(x-1, y) + num_paths(x, y-1)</code>. <em>Here we have the recursive step</em>.</p>

<p>In finding the base case, we need to consider, what case does every recursive step eventually lead to? In this problem, the recursive step moves backwards along the grid, both left and up. This will eventually reach either the left or top edge (that is, when <code class="highlighter-rouge">x == 0</code> or <code class="highlighter-rouge">y == 0</code>). So now we consider, how many paths are there to a point on the top or left edges?</p>

<p>In fact, there is only one path, which goes either straight down or straight to the right. So, if <code class="highlighter-rouge">x == 0</code> or <code class="highlighter-rouge">y == 0</code>, the result is 1.</p>

<p>These observations lead to the following definition.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">num_paths</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""Calculate the number of paths to point (x,y)
     
    Parameters:
        x (int): x coordinate of the point.
        y (int): y coordinate of the point.

    Return:
        int: Number of paths from (0,0) to (x,y).
    """</span>

     <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">num_paths</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">num_paths</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>This turns out to be a simple, elegant solution. We argue that, without knowing the mathematical function for the number of paths, it is extremely difficult to write a non-recursive program to solve the problem.</p>

<h2 id="recursive-adts">Recursive ADTs</h2>
<p>Now we will look at a slightly different topic. We will start with a new ADT, the <strong>binary search tree</strong> (actually, a simplified version of it). A binary search tree is a way of storing a collection of values in order, which is useful in many applications where lots of data needs to be efficiently stored and accessed. A binary search tree is made of multiple <strong>nodes</strong>, each node contains these things:</p>
<ul>
  <li>A value, which is the piece of information being stored. It can be any type of data that allows <code class="highlighter-rouge">==</code>, <code class="highlighter-rouge">&lt; </code>and <code class="highlighter-rouge">&gt; </code>comparisons.</li>
  <li>An optional “left child”, which is another node. All the nodes to the left of this one (called the left subtree) must have values that are less than the value of this node.</li>
  <li>An optional “right child”, which is another node. All the nodes to the right of this one (the right subtree) must have values that are greater than or equal to the value of this node.
To visualise this definition, the diagram below shows a common way to represent a tree. Each node is a circle with the value inside. The top-most node (in this case, the one with value 5) is called the <strong>root</strong>, which can be used to access the entire tree. Nodes without any children (in this case, 2, 4, 6, and 8) are called <strong>leaves</strong>.</li>
</ul>

<p><img src="images/11A0_recursion_04.png" alt="" /></p>

<p>Take a moment to understand how this diagram relates to the definition above. For example, 3 and 7 are the left and right children of 5. The nodes with 2, 3 and 4 make up the left subtree of 5. We should also check that each node satisfies the “less than” and “greater than” properties described. 5 is greater than 2,3,4 and less than 6,7,8. 3 is greater than 2 and less than 4. 7 is greater than 6 and less than 8.</p>

<p>There is an important idea that has been introduced in this ADT: nodes store other nodes. This is an example of a <strong>recursive ADT</strong>, a data type which stores other instances of itself. These nodes can themselves store other nodes, and so on. They are analogous to a recursive step in a recursive function. Leaf nodes are analogous to a base case in a recursive function, because they are the simplest type of node, and also where the path of “travelling along” nodes stops. One other interesting property of the binary search tree is that each subtree is itself a tree: for example, the nodes 2, 3 and 4 form a tree by themselves.</p>

<p>Nodes in a binary search tree can support the following operations:</p>
<ul>
  <li><code class="highlighter-rouge">Node.insert(value)</code> — insert a new value into one of the subtrees of this node, preserving the tree ordering property.</li>
  <li><code class="highlighter-rouge">Node.to_list()</code> — return a sorted list of values of this node and its subtrees.</li>
  <li><code class="highlighter-rouge">value in node</code> — a boolean test that checks if this value is stored in this node or its subtrees.</li>
</ul>

<p>All of these are easiest to implement recursively, which is helped by the recursive nature of the tree structure. Let’s start writing a <code class="highlighter-rouge">Node</code> class to represent nodes. When a node is created, it has no children yet, so we will use <code class="highlighter-rouge">None</code> to represent indicate that there are no left or right sub-trees.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A node in a binary search tree."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""A new Node in a Binary Search Tree
     
        Parameters:
            value: Element to be stored in this Node. 
                   Must be comparable by ==, &gt; and &lt;.
        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="bp">None</span>
</code></pre>
    </div>
  </div>
</div>

<p>For the <code class="highlighter-rouge">insert</code> method, the value should be added as a new node in either the left or right subtree, whichever is appropriate. Note that the method does this by making recursive calls to <code class="highlighter-rouge">insert</code> on other nodes. The “base case” is when the left or right child does not exist, so a new <code class="highlighter-rouge">Node</code> is created. Note also that if the value being inserted is equal to the value, it will go in the right subtree, but there is no reason it cannot go in the left subtree instead.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Add 'value' into this Node in the search tree.
     
        Parameters:
            value: Element to be stored in this Node. 
                   Must be comparable by ==, &gt; and &lt;.
        """</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>To write the <code class="highlighter-rouge">to_list</code> method, we can use this rationale: all the nodes in the left subtree will be less than the current node, so recursively calling <code class="highlighter-rouge">self._left.to_list()</code> will give us the first portion of the list in sorted order. We can then append the current value. Similarly, a call to <code class="highlighter-rouge">self._right.to_list()</code> will give us the last portion of the list in sorted order, which can be extended onto the end. Notice that the base case is not explicitly written, but it is still there: if both of the children are <code class="highlighter-rouge">None</code>, then no recursive calls will be made.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">to_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Return a sorted list of the values of this Node's children."""</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="o">.</span><span class="n">to_list</span><span class="p">())</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_value</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="o">.</span><span class="n">to_list</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre>
    </div>
  </div>
</div>

<p>To use the <code class="highlighter-rouge">value in node</code> syntax, a class must implement the <code class="highlighter-rouge">__contains__</code> method and return <code class="highlighter-rouge">True</code> or <code class="highlighter-rouge">False</code>. We will determine if the value we are searching for is greater or less than the current node’s value, then we will search for the value in either the right or left subtree. Notice below that <code class="highlighter-rouge">value in self._left</code> and <code class="highlighter-rouge">value in self._right</code> are actually recursive steps, because they both use the same <code class="highlighter-rouge">__contains__</code> method on a subtree. If the value is the one that we are searching for, we can return <code class="highlighter-rouge">True</code>, otherwise, there is no other way to find the value and we return <code class="highlighter-rouge">False</code>, these are both base cases.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_left</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
</code></pre>
    </div>
  </div>
</div>

<p>Lastly, we can implement a <code class="highlighter-rouge">__str__</code> method:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="s">"({0}, {1}, {2})"</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>How does this work? When performing the <code class="highlighter-rouge">.format</code> on each child, if the child is <code class="highlighter-rouge">None</code>, then <code class="highlighter-rouge">"None"</code> will appear in the string result. If the child is a <code class="highlighter-rouge">Node</code>, then <code class="highlighter-rouge">.format</code> method will recursively call <code class="highlighter-rouge">str</code> on that node. This is an example of the potential for writing very elegant recursive functions.</p>

<p>It is sometimes much easier to write a function recursively than iteratively, and being able to work with recursive methods is an important skill.</p>

<p>For completeness, we will also give an implementation of a binary search tree class, which simply keeps track of the root node (if there is one — the tree might not have any nodes) and refers to the root node when its methods are called. The two classes can be downloaded: <code class="highlighter-rouge">search_tree.py</code></p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">BinarySearchTree</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A binary search tree."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""A new empty binary search tree."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Add 'value' into the tree.
        
        Preconditions:
            'value' is comparable by at least the ==, &gt; and &lt; operators.
        """</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""Return a sorted list of the values in this tree."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="bp">None</span> <span class="p">:</span>
            <span class="k">return</span> <span class="s">"()"</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>Here are some examples of using this tree. The interaction below creates a tree with the same structure as the diagram above, the second is a simple function that sorts a list of numbers that takes advantage of <code class="highlighter-rouge">to_list</code>. Study the output of <code class="highlighter-rouge">print(tree)</code> and relate it to both the diagram and the <code class="highlighter-rouge">Node.__str__</code> method above.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">tree</span> <span class="o">=</span> <span class="n">BinarySearchTree</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]:</span>
        <span class="n">tree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="p">(((</span><span class="bp">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="bp">None</span><span class="p">)),</span> <span class="mi">5</span><span class="p">,</span> <span class="p">((</span><span class="bp">None</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">None</span><span class="p">),</span> <span class="mi">7</span><span class="p">,</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="bp">None</span><span class="p">)))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tree</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">4</span> <span class="ow">in</span> <span class="n">tree</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mf">7.5</span> <span class="ow">in</span> <span class="n">tree</span>
<span class="bp">False</span>


<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">tree_sort</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="p">:</span>
        <span class="s">"""A sort implementation using a tree.
        
        Parameters:
            lst: List of elements to be sorted.

        Return:
            Sorted list of elements.

        Preconditions:
            All elements of 'lst' are comparable by 
            at least the ==, &gt;, and &lt; operators.
        """</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">BinarySearchTree</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">lst</span> <span class="p">:</span>
            <span class="n">tree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tree</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<div class="aside">

  <h4 id="aside-an-advanced-implementation">Aside: An advanced implementation</h4>
  <p>Some students may wish to challenge themselves and experiment with another implementation of a binary search tree. <code class="highlighter-rouge">search_tree2.py</code> contains a more elegant implementation, as well as support for the len function and for-loops (using content from the optional material on functional programming.</p>
</div>

<div class="aside">

  <h4 id="aside-is-recursion-necessary">Aside: Is recursion necessary?</h4>
  <p>The problems we have looked at in this section were solved by writing recursive functions, but did we need to use recursion? When can a recursive function be written iteratively (using a loop) instead?</p>

  <p>A function is <strong>tail recursive</strong> if the recursive call is the last thing that happens before the function returns. Tail recursive functions can be directly translated into an iterative function. In fact, some other programming languages will notice when tail recursion is used and optimise it so it behaves iteratively.</p>

  <p>For example, the <code class="highlighter-rouge">Node.insert</code> method is tail recursive, because when the <code class="highlighter-rouge">insert</code> method is called recursively, that is the last step the function takes. The <code class="highlighter-rouge">insert</code> method can be defined iteratively as below.</p>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="s"&gt;"""Add a value into this node in the search tree."""&lt;/span&gt;
    &lt;span class="n"&gt;node&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_value&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_left&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_left&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Node&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;node&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_left&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_right&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_right&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Node&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;node&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;_right&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>However, with a good understanding of recursion, many people would prefer the original recursive method.</p>

  <p>The <code class="highlighter-rouge">__contains__</code> method is also tail recursive, and can similarly be defined using a while loop. However, <code class="highlighter-rouge">to_list</code> and <code class="highlighter-rouge">__str__</code> are not tail recursive, because after a recursive call is made, there is still more work to be done before returning the result. These two methods are very difficult to write without using recursion. The <code class="highlighter-rouge">num_paths</code> function above is also not tail recursive, and cannot easily be translated into an iterative function.</p>

  <p>Note however that there are functions, such as <code class="highlighter-rouge">add</code> and <code class="highlighter-rouge">factorial</code> from earlier, which are not tail recursive but can be rewritten iteratively using a bit more thought.</p>
</div>

<blockquote class="blockquote">
  <p>And now for something completely different.</p>
  <p class="indent">– John Cleese</p>
</blockquote>

<h1 id="functional-programming-list-comprehension-iterators-generators">Functional Programming, List Comprehension, Iterators, Generators</h1>
<h2 id="functional-programming">Functional Programming</h2>
<p><strong>Functional Programming</strong> is a programming paradigm in which problems are decomposed into collections of functions (in the mathematical sense) and computation is expression evaluation. Functional Programming languages are examples of declarative languages in which the programmer writes a specification of the problem to be solved and the <strong>declarative</strong> language implementation determines how to solve the problem given the specification. In functional languages the specification is a collection of definitions of mathematical functions and the problem to be solved is expressed as a mathematical expression to be evaluated based on the given function definitions.</p>

<p>In <strong>pure</strong> functional programming there is no state (program variables) that can be modified. A consequence of this is that it is much easier to reason about the correctness of programs written in that style than in procedural languages where state changes. An example of a popular (pure) functional programming language is <a href="https://www.haskell.org/">Haskell</a>.</p>

<p>Python is not a functional programming language but it does borrow some ideas from functional languages such as anonymous functions, higher-order programming, list comprehension and lazy evaluation that, for example, provide powerful list processing techniques. We will look at examples shortly.</p>

<h2 id="iterators">Iterators</h2>
<p>We are familiar with the concept of for-loops by now. They take a collection of data and look at it one piece at a time from start to end. An object that can be iterated over is called an <strong>iterable</strong>. For example, strings, tuples, lists, and dictionaries are all iterables. But how do they work? How can we write our own iterables? How can we take advantage of iterables to do more powerful things?</p>

<p>All <code class="highlighter-rouge">iterables</code> can create a ‘stream of data’ that can be accessed one element at a time, called an <strong>iterator</strong>. Python uses the iterator to perform for-loops. Iterators are made using the <code class="highlighter-rouge">iter</code> function, and the “one element at a time” access is done using the <code class="highlighter-rouge">next</code> function. <code class="highlighter-rouge">next</code> will return the next piece of data. If there is no more data, then a <code class="highlighter-rouge">StopIteration</code> exception will be raised. Here is an example using a string. In this case, <code class="highlighter-rouge">x</code> is an iterable, and <code class="highlighter-rouge">it</code> is an iterator.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>&gt;&gt;&gt; s = 'spam'
&gt;&gt;&gt; it = iter(s)
&gt;&gt;&gt; next(it)
's'
&gt;&gt;&gt; next(it)
'p'
&gt;&gt;&gt; next(it)
'a'
&gt;&gt;&gt; next(it)
'm'
&gt;&gt;&gt; next(it)
Traceback (most recent call last):
  File "&lt;pyshell#6&gt;", line 1, in &lt;module&gt;
    next(it)
StopIteration
</code></pre>
    </div>
  </div>
</div>

<p>Since iterators are only accessed one element at a time, there are a few advantages. If possible, iterators can be written to calculate the data ‘on the fly’ when requested, instead of calculating and storing all the data at once. This idea is called <strong>lazy evaluation</strong>. In fact, this approach can be used to generate an infinite stream of data. As long as we do not want to get all the elements (which would lead to infinite computation) this idea can lead to elegant solutions to problems that can be difficult to express with finite structures.</p>

<p>Where can lazy evaluation be useful? The <code class="highlighter-rouge">range</code> and <code class="highlighter-rouge">enumerate</code> functions are example of this. Recall that <code class="highlighter-rouge">range</code> and <code class="highlighter-rouge">enumerate</code> return a special class that is a sequence of numbers and objects. The reason for this is that these two functions are mainly used in just performing a for-loop over the data. Therefore, they are iterator types, making use of them for very large data sets avoids using up too much of the computer’s resources.</p>

<div class="important">

  <h4 id="iterables-and-iterators">Iterables and Iterators</h4>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="nb"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;iterable&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nb"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;iterator&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nb"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;iterator&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics">Semantics</h4>
  <p>An <strong>iterable</strong> is an object which can be iterated over (for example, used in for-loops). An <strong>iterator</strong> is an object which produces a stream or sequence of data one element at a time. <code class="highlighter-rouge">iter(iterable)</code> will create a new iterator. <code class="highlighter-rouge">iter(iterator)</code> will return the same iterator.
<code class="highlighter-rouge">next(iterator)</code> will return the next value in the sequence. If the sequence has finished, this function will raise <code class="highlighter-rouge">StopIteration</code>.</p>
</div>

<p>How do we write an iterable class, and the corresponding iterator? An <code class="highlighter-rouge">iterable</code> class must have an <code class="highlighter-rouge">__iter__</code> method to support the <code class="highlighter-rouge">iter</code> function. The method should return an iterator. The iterator object must have a <code class="highlighter-rouge">next</code> method which either returns the next value or raises <code class="highlighter-rouge">StopIteration</code>. The iterator must also have an <code class="highlighter-rouge">__iter__</code> method which returns the iterator itself; this is so that the iterator itself can also be iterated over. To demonstrate, here is an example (<code class="highlighter-rouge">geometric.py</code>) involving a geometric sequence, which is a sequence where each term is multiplied by a fixed ratio.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">class</span> <span class="nc">GeometricSequence</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""A geometric sequence of numbers.

    The sequence of numbers:
    start, start * ratio, start * ratio**2, ..., start * ratio**(length-1)
    Without a length parameter, the sequence is infinite.
    """</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span> <span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ratio</span> <span class="o">=</span> <span class="n">ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_len</span> <span class="o">=</span> <span class="n">length</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">GeometricIterator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_len</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">GeometricIterator</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="p">:</span>
    <span class="s">"""An iterator on a geometric sequence."""</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span> <span class="p">:</span>
        <span class="c1"># Store values for later
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_ratio</span> <span class="o">=</span> <span class="n">ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_len</span> <span class="o">=</span> <span class="n">length</span>
        <span class="c1"># Store information about position in the sequence
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_pos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">start</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="c1"># Check if the sequence has finished
</span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_len</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pos</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_len</span> <span class="p">:</span>
            <span class="k">raise</span> <span class="nb">StopIteration</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>
        <span class="c1"># Update for next time.
</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pos</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">tmp</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">powers_two</span> <span class="o">=</span> <span class="n">GeometricSequence</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">powers_two</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="mi">8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">powers_two</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1000</span> <span class="p">:</span>
        <span class="k">break</span>

<span class="mi">1</span> <span class="mi">2</span> <span class="mi">4</span> <span class="mi">8</span> <span class="mi">16</span> <span class="mi">32</span> <span class="mi">64</span> <span class="mi">128</span> <span class="mi">256</span> <span class="mi">512</span> <span class="mi">1024</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">seq</span> <span class="o">=</span> <span class="n">GeometricSequence</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">seq</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span>

<span class="mi">2</span> <span class="mi">6</span> <span class="mi">18</span> <span class="mi">54</span> <span class="mi">162</span> <span class="mi">486</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="mi">54</span> <span class="ow">in</span> <span class="n">seq</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">20</span> <span class="ow">in</span> <span class="n">seq</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">GeometricSequence</span><span class="p">(</span><span class="s">'*'</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
<span class="o">*</span> <span class="o">**</span> <span class="o">****</span> <span class="o">********</span>
</code></pre>
    </div>
  </div>
</div>

<p>Notice that the for-loop in the first example exits with a <code class="highlighter-rouge">break</code>. Since the sequence is infinite, there is no way to exit the loop other than specifying a condition we are interested in (which depends on the problem we are solving). The second sequence is defined with a length of 6, so after enough calls to <code class="highlighter-rouge">next</code>, a <code class="highlighter-rouge">StopIteration</code> is raised and the for loop exits naturally. The second sequence can also perform <code class="highlighter-rouge">in</code> tests. Be careful of performing <code class="highlighter-rouge">in</code> tests on infinite sequences like <code class="highlighter-rouge">powers_two</code>, because it will never stop looking through the sequence if the value is not there. The third example shows a geometric sequence of strings instead of numbers.</p>

<h2 id="generators">Generators</h2>
<p>That last example was pretty big for code that generates a simple sequence, especially having to write two classes. As always, Python has found a simpler way of doing it.</p>

<p><strong>Generators</strong> are iterators that use a syntax very similar to functions, using a <code class="highlighter-rouge">yield</code> statement instead of <code class="highlighter-rouge">return</code>. When a normal function in Python is called, the body is executed, and there is a return statement (possibly implicit) that stops the function and returns control back to the caller. When a generator function is called, the body of the function is not executed, instead we get a generator object. When <code class="highlighter-rouge">next</code> is called on the generator object, the function body begins executing and when the <code class="highlighter-rouge">yield</code> statement is reached the value supplied to <code class="highlighter-rouge">yield</code> is returned. The execution of the function is suspended at this point and the local state of the function is preserved. When <code class="highlighter-rouge">next</code> is again called the program resumes from the point of suspension and continues until the next <code class="highlighter-rouge">yield</code> statement is reached. In this way, the generator code is constantly starting and stopping, generating values through repetitive <code class="highlighter-rouge">yield</code> statements. Below is an example of a generator that illustrates this behaviour using the geometric sequence concept from before, which is also in <code class="highlighter-rouge">geometric2.py</code>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">geometric</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">start</span>
    <span class="k">while</span> <span class="n">length</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">length</span> <span class="p">:</span>
        <span class="k">yield</span> <span class="n">value</span>
        <span class="n">value</span> <span class="o">*=</span> <span class="n">ratio</span>
        <span class="n">pos</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">powers_two</span> <span class="o">=</span> <span class="n">geometric</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">powers_two</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">powers_two</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">powers_two</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">geometric</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">162</span><span class="p">,</span> <span class="mi">486</span><span class="p">]</span>
</code></pre>
    </div>
  </div>
</div>

<p>Here is another simple example. The <code class="highlighter-rouge">print</code> statements are added to show how the execution of the generator body works.</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>def gen_range(n) :
    print('start')
    for i in range(n) :
        print('before yield: i =', i)
        yield i
        print('after yield: i =', i)

&gt;&gt;&gt; gen = gen_range(3)
&gt;&gt;&gt; gen
&lt;generator object gen_range at 0x011DC350&gt;
&gt;&gt;&gt; next(gen)
start
before yield: i = 0
0
&gt;&gt;&gt; next(gen)
after yield: i = 0
before yield: i = 1
1
&gt;&gt;&gt; next(gen)
after yield: i = 1
before yield: i = 2
2
&gt;&gt;&gt; next(gen)
after yield: i = 2
Traceback (most recent call last):
  File "&lt;pyshell#5&gt;", line 1, in &lt;module&gt;
    next(gen)
StopIteration
</code></pre>
    </div>
  </div>
</div>

<div class="important">

  <h4 id="generator-syntax">Generator Syntax</h4>
  <p>The syntax for writing a generator is the same as for functions, except the body of the generator uses <code class="highlighter-rouge">yield</code> statements in the function body, and cannot return a value. The syntax for a yield statement is</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;yield&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <h4 id="semantics-1">Semantics</h4>
  <p>Calling the function does not execute the body, but returns an iterator. Calling <code class="highlighter-rouge">next</code> on that iterator will begin executing the function body, stopping at the first yield statement and returning the associated <em><code class="highlighter-rouge">value</code></em>. Subsequent uses of <code class="highlighter-rouge">next</code> resumes from the point where the function body was stopped. <code class="highlighter-rouge">StopIteration</code> is raised when the function body ends.</p>
</div>

<h2 id="list-comprehensions">List Comprehensions</h2>
<p>We already know how to construct lists out of other iterables, using loops and append. For example, if we have a file containing a collection of numbers, such as the <code class="highlighter-rouge">data1.txt</code> file, and we want to read in the numbers into a list, then we would do something like this:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'data1.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>For what is arguably a simple operation, it takes a few lines of code, and it might not be immediately obvious what it does. There is a way of doing the same thing with a better syntax, called a <strong>list comprehension</strong>:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'data1.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

</code></pre>
    </div>
  </div>
</div>

<p>This syntax is much easier to type and read, and it is more efficient. What if we wanted to ignore certain lines in the dataset? For example, if there are blank lines in the file, we want to skip those lines and not attempt to add <code class="highlighter-rouge">float(line)</code> to the list. We can ignore the unwanted values by adding an <code class="highlighter-rouge">if</code> test to the comprehension, as shown below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'data1.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">if</span> <span class="n">line</span><span class="p">]</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>

<p>Recall that <code class="highlighter-rouge">if</code> line is equivalent to <code class="highlighter-rouge">if line != ""</code>. Below are three more examples of list comprehension in action. In the first, we simply copy the list <code class="highlighter-rouge">l</code>. In the second we produce the list of squares of <code class="highlighter-rouge">l</code> and in the third we produce the list of squares of the even elements of <code class="highlighter-rouge">l</code>. The last example is more complex, it shows how comprehensions can be used to generate a list of prime numbers.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">l</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">l</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">64</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span> <span class="k">if</span> <span class="mi">0</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">i</span><span class="p">)]]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">47</span><span class="p">]</span>
</code></pre>
    </div>
  </div>
</div>

<p>A list comprehension can handle more than one nested loop. The first two examples below are shown as both a loop and a comprehension.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span> <span class="o">=</span> <span class="s">"spam"</span>
<span class="o">&gt;&gt;&gt;</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">letters</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">nums</span> <span class="p">:</span>
            <span class="n">pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span>
<span class="p">[(</span><span class="s">'s'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'s'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'s'</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">letters</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span>
<span class="p">[(</span><span class="s">'s'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'s'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'s'</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'p'</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'m'</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sums</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">:</span>
                <span class="n">sums</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">sums</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">+</span><span class="n">k</span><span class="o">+</span><span class="n">l</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="s">'01'</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="s">'01'</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="s">'01'</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="s">'01'</span><span class="p">]</span>
<span class="p">[</span><span class="s">'0000'</span><span class="p">,</span> <span class="s">'0001'</span><span class="p">,</span> <span class="s">'0010'</span><span class="p">,</span> <span class="s">'0011'</span><span class="p">,</span> <span class="s">'0100'</span><span class="p">,</span> <span class="s">'0101'</span><span class="p">,</span> <span class="s">'0110'</span><span class="p">,</span> <span class="s">'0111'</span><span class="p">,</span> <span class="s">'1000'</span><span class="p">,</span> <span class="s">'1001'</span><span class="p">,</span> <span class="s">'1010'</span><span class="p">,</span> <span class="s">'1011'</span><span class="p">,</span> <span class="s">'1100'</span><span class="p">,</span> <span class="s">'1101'</span><span class="p">,</span> <span class="s">'1110'</span><span class="p">,</span> <span class="s">'1111'</span><span class="p">]</span>
</code></pre>
    </div>
  </div>
</div>

<div class="important">

  <h4 id="list-comprehension-syntax">List Comprehension Syntax</h4>
  <p>The syntax for list comprehension takes one of the following forms:</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;var&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;iterable&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;var&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;iterable&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>
  <p>In general, there can be any number of “<code class="highlighter-rouge">for var in iterable</code>” forms used as shown below, and each one may have an optional “<code class="highlighter-rouge">if test</code>” after it.</p>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;var1&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;iterable1&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;var2&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;iterable2&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;var3&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;iterable3&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;expression&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;var1&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;iterable1&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;test1&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;var2&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;iterable2&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;test2&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
</code></pre></div>    </div>

    <p>&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;</p>
  </div>

  <h4 id="semantics-2">Semantics</h4>
  <p>The comprehension is equivalent to constructing a list using for-loops and if statements.</p>

  <p>If there is only one iterable (the first two forms above), set <code class="highlighter-rouge">var</code> to each element of <em><code class="highlighter-rouge">iterable</code></em> and evaluate <em><code class="highlighter-rouge">expression</code></em> and add it to the list. If there is an <code class="highlighter-rouge">if test</code>, then include only those expressions where the <em><code class="highlighter-rouge">test</code></em> is <code class="highlighter-rouge">True</code>.</p>

  <p>If there are multiple iterables, then it is equivalent to nested for-loops, where <code class="highlighter-rouge">for var1 in iterable1</code> is the outermost loop.</p>
</div>
<p>We can also use a similar notation to that of list comprehension to create generators using <strong>generator expressions</strong>, simply by replacing the square brackets in the list comprehension by round brackets <code class="highlighter-rouge">()</code>. All of the examples of list comprehensions above can be turned into generator expressions by using round brackets. Often the result of a comprehension will be iterated over, and using a generator expression in this situation is more efficient. Below is an example.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">gen</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="mi">9</span>
</code></pre>
    </div>
  </div>
</div>

<div class="aside">

  <h4 id="aside-more-comprehensions">Aside: More Comprehensions</h4>
  <p>There are also two other types of comprehensions in Python. One is the dictionary comprehension, which can be used to make a dictionary, using <code class="highlighter-rouge">{}</code> braces instead of <code class="highlighter-rouge">[]</code> brackets, as well as a <code class="highlighter-rouge">key: value</code> expression.</p>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)}&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;36&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;'CSSE1001'&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;'1'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'0'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'S'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)}&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'S'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'S'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'1'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'0'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'0'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'1'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>Another is the set comprehension. A <strong>set</strong> is a data type that represents an unordered collection of unique elements. They are efficient at checking whether or not an element is in a collection. Here are some examples of sets and set comprehensions:</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="s"&gt;'CSSE1001'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;'1'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'0'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'C'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'E'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'S'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)}&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;36&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
</code></pre></div>    </div>

    <p>&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;</p>
  </div>
</div>

<h2 id="higher-order-functions">Higher-Order Functions</h2>
<p>Now that we have seen iterators, list comprehension and generators we return to functional programming. Let’s say that we have two very similar functions in our code. The first sums all the elements in a list, the second multiplies them. (There is already a built-in <a href="https://docs.python.org/3/library/functions.html#sum">sum</a> function, for the purposes of this section, we will ignore it and write our own.)</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">my_sum</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span> <span class="p">:</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span> <span class="nf">product</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span> <span class="p">:</span>
        <span class="n">result</span> <span class="o">*=</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre>
    </div>
  </div>
</div>
<p>At the start of this course, we learnt to <code class="highlighter-rouge">abstract</code> similar code so that it does not need to be repeated, and turn the slight differences into parameters of the function, so we should be able to perform the same process here, and abstract these functions into a “combine” function which reduces a list into one value.</p>

<p>There are two extra arguments that the <code class="highlighter-rouge">combine</code> function needs: an initial value to set <code class="highlighter-rouge">result</code> to, and an operation to combine elements with. A way that we can do this is to use a function as a parameter which represents the operation to perform on <code class="highlighter-rouge">result</code> and <code class="highlighter-rouge">x</code>. Now we can write the abstracted function.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">combine</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">lst</span><span class="p">,</span> <span class="n">initial</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">initial</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span> <span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">operation</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre>
    </div>
  </div>
</div>

<p>This function is different to ones we have seen before, since the <code class="highlighter-rouge">operation</code> parameter is actually another function. A function which uses other functions in the parameter or return values, such as <code class="highlighter-rouge">combine</code>, is called a <strong>higher-order function</strong>. We have seen this before, when creating tkInter Button widgets: <code class="highlighter-rouge">Button(frame, command=function)</code>, and using the <code class="highlighter-rouge">bind</code> method: <code class="highlighter-rouge">widget.bind("&lt;Button-1&gt;", function)</code>. Notice that what is really happening here is that the function is being treated as an object that can be used in the function call. Not all programming languages offer the ability to do this, but it is still very useful.</p>

<h2 id="anonymous-functions">Anonymous Functions</h2>
<p>So how do we use the <code class="highlighter-rouge">combine</code> function? If we want to sum a list of numbers, we can do this:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">combine</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="n">lst</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="mi">15</span>
</code></pre>
    </div>
  </div>
</div>

<p>It works! But, that seems like a lot of effort, having to define an addition function just so that the combine function works. Then for every other operation, we would need another trivial function definition just so that the combine function can use it. It would be helpful if there was a way of specifying simple functions without needing to write a <code class="highlighter-rouge">def</code> statement. Functions like this are called <strong>anonymous functions</strong>. The Python syntax to write an anonymous function is called a <strong>lambda form</strong>. The name lambda comes from <a href="https://en.wikipedia.org/wiki/Lambda_calculus">the Lambda Calculus</a> upon which functional languages are built. The equivalent of the <code class="highlighter-rouge">add</code> function above is just:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</code></pre>
    </div>
  </div>
</div>

<p>Here it is used with <code class="highlighter-rouge">combine</code>. Some more examples of lambda expressions are shown below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">combine</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="n">lst</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="mi">15</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">double</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">double</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="o">&lt;</span><span class="k">lambda</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x011F2270</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">double</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="mi">6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">double</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="mi">16</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">multiply</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">multiply</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="mi">12</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">multiply</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">'abc'</span><span class="p">)</span>
<span class="s">'abcabc'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">zero</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">zero</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="o">&lt;</span><span class="k">lambda</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x011F22F0</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">zero</span><span class="p">()</span>
<span class="mi">0</span>
</code></pre>
    </div>
  </div>
</div>

<div class="important">

  <h4 id="lambda-expression-syntax">Lambda Expression Syntax</h4>
  <p>The syntax for a lambda form is:</p>
  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;expression&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
</code></pre></div>    </div>
  </div>

  <p>There may be zero or more <code class="highlighter-rouge">args</code>.</p>
  <h4 id="semantics-3">Semantics</h4>
  <p>The lambda form is a function which can be treated as an expression. This means it can be assigned to variables, used in function calls and return values, or used in larger expressions. It is often used as a way of defining simple functions instead of using the <code class="highlighter-rouge">def</code> statement. It is equivalent to the function definition below, except that the lambda expression does not have the name <code class="highlighter-rouge">f</code>.</p>

  <div class="viz">

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="language-python highlighter-rouge"&gt;&lt;div class="highlight"&gt;&lt;pre class="highlight"&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;expression&lt;/span&gt;
</code></pre></div>    </div>

    <p>&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;</p>
  </div>
  <p>Note that the only thing a lambda function can do is evaluate and return an expression. A function that requires loops or large blocks of code should be created using a <code class="highlighter-rouge">def</code> statement.</p>
</div>

<p>As a final thought, we can redefine the original <code class="highlighter-rouge">my_sum</code> and <code class="highlighter-rouge">product</code> functions using <code class="highlighter-rouge">combine</code>, and specifying what the operation and initial value are. The third <code class="highlighter-rouge">concat</code> function concatenates a list of strings into one string. As a challenge, try thinking of other operations that can be used with <code class="highlighter-rouge">combine</code>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">my_sum</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="n">combine</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="n">lst</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">product</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="n">combine</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">lst</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">concat</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="n">combine</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="n">strings</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>These examples can be downloaded, including the original definitions of <code class="highlighter-rouge">my_sum</code>, <code class="highlighter-rouge">product</code> and <code class="highlighter-rouge">combine</code>: <code class="highlighter-rouge">higher_order.py</code></p>

<div class="aside">

  <h4 id="aside-reduce-and-operator">Aside: reduce and operator</h4>
  <p>The <code class="highlighter-rouge">combine</code> function is a very useful function, so it is no surprise that there is a Python library for functional programming (called <code class="highlighter-rouge">functools</code>), which has a function that does the same thing, called <code class="highlighter-rouge">functools.reduce</code>. In functional programming languages, this operation is known as a <em>fold</em>.</p>

  <p>The most common use of <code class="highlighter-rouge">reduce</code> is with operations like <code class="highlighter-rouge">+</code> and <code class="highlighter-rouge">*</code>, so it would be nice to have these as functions instead of having to write <code class="highlighter-rouge">lambda x,y: x+y</code>. The <a href="https://docs.python.org/3/library/operator.html">operator</a> module provides many operators as functions. Try <code class="highlighter-rouge">import operator</code>.</p>
</div>

<h2 id="returning-functions">Returning Functions</h2>
<p>Another form of higher-order functions are those that return a function. Imagine a situation with lots of similar incrementing functions:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">add1</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">add5</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">5</span>

<span class="k">def</span> <span class="nf">add10</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">10</span>
</code></pre>
    </div>
  </div>
</div>
<p>We want to abstract these, but in particular we want to write a function that takes a number <code class="highlighter-rouge">n</code> (like 1, 5 or 10), and gives back a function that adds <code class="highlighter-rouge">n</code>. A function that adds <code class="highlighter-rouge">n</code> to its input <code class="highlighter-rouge">x</code> is simply:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span>
</code></pre>
    </div>
  </div>
</div>
<p>Then this lambda expression is what we must return. The “add n” function is shown below with examples.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">add_n</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">add_n</span><span class="p">(</span><span class="mi">3</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span>
<span class="mi">7</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">add_n</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">add1</span> <span class="o">=</span> <span class="n">add_n</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">add5</span> <span class="o">=</span> <span class="n">add_n</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">add10</span> <span class="o">=</span> <span class="n">add_n</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>
<p>Another way to think of this is as a <strong>partial application</strong>, because when we call the <code class="highlighter-rouge">add_n</code> function, we are not giving it all the information it needs to work out an answer. So instead, <code class="highlighter-rouge">add_n</code> gives back another function which waits for the remaining input.</p>

<h2 id="itertools">Itertools</h2>
<p>We have seen some of the potential of using iterators and generators. Python includes a module called <code class="highlighter-rouge">itertools</code> that contains a variety of useful iterators. Here we will briefly explore some of these. There are more details in the Python <a href="https://docs.python.org/3/library/itertools.html">documentation</a>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
</code></pre>
    </div>
  </div>
</div>
<p>The <code class="highlighter-rouge">count</code> function returns an iterator that counts numbers from a given starting number (or 0 if no number is given).</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="mi">5</span>
</code></pre>
    </div>
  </div>
</div>

<p><code class="highlighter-rouge">map</code> applies a function to each value in an iterable. In the first example below, it uses a squaring function on the values of <code class="highlighter-rouge">count(1)</code> which has the effect of making an iterator of square numbers. <code class="highlighter-rouge">filter</code> applies a test to each value in the iterable, and only gives back the values that pass the test. In the second example below, only the numbers which satisfy <code class="highlighter-rouge">x%2 == 0</code> are allowed. The third example shows a combination of both a filter and a map.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">squares</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">evens</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">evens</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">evens</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">evens</span><span class="p">)</span>
<span class="mi">6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">even_squares</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">even_squares</span><span class="p">)</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">even_squares</span><span class="p">)</span>
<span class="mi">16</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">even_squares</span><span class="p">)</span>
<span class="mi">36</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="s">"This is a short sentence"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:(</span><span class="n">x</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
<span class="p">[(</span><span class="s">'This'</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">'short'</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="s">'sentence'</span><span class="p">,</span> <span class="mi">8</span><span class="p">)]</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">product</code>, <code class="highlighter-rouge">permutations</code>, <code class="highlighter-rouge">combinations</code> and <code class="highlighter-rouge">combinations_with_replacement</code> functions provide the Cartesian product and other combinatoric selections of elements.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span><span class="p">,</span> <span class="n">permutations</span><span class="p">,</span> <span class="n">combinations</span><span class="p">,</span> <span class="n">combinations_with_replacement</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">product</span><span class="p">(</span><span class="s">'ABC'</span><span class="p">,</span> <span class="s">'123'</span><span class="p">))</span>
<span class="p">[(</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'1'</span><span class="p">),</span> <span class="p">(</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">),</span> <span class="p">(</span><span class="s">'A'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">),</span> <span class="p">(</span><span class="s">'B'</span><span class="p">,</span> <span class="s">'1'</span><span class="p">),</span> <span class="p">(</span><span class="s">'B'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">),</span> <span class="p">(</span><span class="s">'B'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">),</span> <span class="p">(</span><span class="s">'C'</span><span class="p">,</span> <span class="s">'1'</span><span class="p">),</span> <span class="p">(</span><span class="s">'C'</span><span class="p">,</span> <span class="s">'2'</span><span class="p">),</span> <span class="p">(</span><span class="s">'C'</span><span class="p">,</span> <span class="s">'3'</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="s">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="s">'01'</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="mi">3</span><span class="p">)]</span>
<span class="p">[</span><span class="s">'000'</span><span class="p">,</span> <span class="s">'001'</span><span class="p">,</span> <span class="s">'010'</span><span class="p">,</span> <span class="s">'011'</span><span class="p">,</span> <span class="s">'100'</span><span class="p">,</span> <span class="s">'101'</span><span class="p">,</span> <span class="s">'110'</span><span class="p">,</span> <span class="s">'111'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations_with_replacement</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
</code></pre>
    </div>
  </div>
</div>

<p>To finish this section we give two more advanced examples using this module.</p>

<h3 id="adding-line-numbers">Adding Line Numbers</h3>
<p>For the first example we want to write a function that takes a text file as input and prints out the contents of the file with each line prepended with the line number. Here is the code (<code class="highlighter-rouge">add_linenum.py</code>).</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">itertools</span>

<span class="n">in_file</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_file</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="s">"{0:4d}: {1}"</span><span class="o">.</span><span class="nb">format</span><span class="p">,</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">f</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>

<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
    </div>
  </div>
</div>
<p>This program is designed to be run from the command line as follows:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">python</span> <span class="n">add_linenum</span><span class="o">.</span><span class="n">py</span> <span class="n">name_of_text_file</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">sys</code> module, among other things, provides a mechanism to access the arguments of the command. The attribute <code class="highlighter-rouge">argv</code> is the list of arguments. The 0’th argument is the name of the command itself (in this case <code class="highlighter-rouge">add_linenum.py</code>) and the first argument is the name of the file we want processed. The first step is to open the file. Now <code class="highlighter-rouge">f</code> is a generator and so we can use the iterator functions on it. We use <code class="highlighter-rouge">map</code> with three arguments: a function that takes two arguments and two iterators. The result will be an iterator that uses the function to pairwise combine the contents of the two input iterators. Note that, by using the infinite iterator <code class="highlighter-rouge">count</code> we do not have to go to the trouble of constructing some list that has the same length as the contents of the file.</p>

<h3 id="sieve-of-eratosthenes">Sieve of Eratosthenes</h3>
<p>The final example is to implement the <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a> for computing the list of prime numbers using generators. This is a very complicated but dramatic example of the power of lazy evaluation (using generators)! Here is the code (<code class="highlighter-rouge">sieve.py</code>).</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="kn">import</span> <span class="nn">itertools</span>

<span class="k">def</span> <span class="nf">isnotdiv</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">return</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">(</span><span class="n">v</span> <span class="o">%</span> <span class="n">p</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">primes</span><span class="p">()</span> <span class="p">:</span>
    <span class="n">ints</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">while</span> <span class="bp">True</span> <span class="p">:</span>
        <span class="n">prime</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">ints</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">prime</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">isnotdiv</span><span class="p">(</span><span class="n">prime</span><span class="p">),</span> <span class="n">ints</span><span class="p">)</span>


<span class="o">&gt;&gt;&gt;</span> <span class="n">prime</span> <span class="o">=</span> <span class="n">primes</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">prime</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">prime</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">prime</span><span class="p">)</span>
<span class="mi">5</span>
</code></pre>
    </div>
  </div>
</div>

<blockquote class="blockquote">
  <p>Our two weapons are fear and surprise…and ruthless efficiency</p>
</blockquote>

<h1 id="complexity-and-computability">Complexity and Computability</h1>
<h2 id="efficiency">Efficiency</h2>
<p>It is not enough to write a program that works correctly, the program must also be efficient. What makes a program efficient? There are two types of efficiency that we consider in software development: time (how fast the program runs) and space (how much of the computer’s memory is being used).</p>

<p>Writing fast software is important because users will be less satisfied if a program is slow. Writing software that uses minimal space is important because computers have limited resources. In this section, we will discuss time efficiency, but similar techniques can be applied to work out space efficiency.</p>

<p>How different can two programs be in time efficiency? Let’s look at an example involving the Fibonacci sequence, which is a sequence of numbers defined as:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="n">fib</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">fib</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">=</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">1</span>
</code></pre>
    </div>
  </div>
</div>

<p>This recursive definition can be directly translated into a recursive function in Python as follows.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">fibonacci1</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fibonacci1</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci1</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>


<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span> <span class="k">print</span><span class="p">(</span><span class="n">fibonacci1</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s">" "</span><span class="p">)</span>

<span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> 
</code></pre>
    </div>
  </div>
</div>

<p>It turns out that this direct translation does not produce a very efficient algorithm because we end up recomputing Fibonacci numbers over and over again. We can do much better by keeping track of the previous two Fibonacci numbers and that leads to the solution below.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">fibonacci2</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">fib1</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">fib2</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">:</span>
        <span class="c1"># loop invariant: a is the i'th fib and b is the (i+1)'th fib
</span>        <span class="n">fib1</span><span class="p">,</span> <span class="n">fib2</span> <span class="o">=</span> <span class="n">fib2</span><span class="p">,</span> <span class="n">fib1</span><span class="o">+</span><span class="n">fib2</span>
    <span class="k">return</span> <span class="n">fib1</span>
</code></pre>
    </div>
  </div>
</div>

<p>These functions are in <code class="highlighter-rouge">fib.py</code>. We have also included functions to determine the runtime of the two Fibonacci functions using the time module. Let’s run them to see the results:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">time_fib1</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">fibonacci1</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">took</span> <span class="mf">309.849</span> <span class="n">ms</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time_fib1</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span>
<span class="n">fibonacci1</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span> <span class="n">took</span> <span class="mf">455.199</span> <span class="n">ms</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time_fib1</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
<span class="n">fibonacci1</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span> <span class="n">took</span> <span class="mf">763.001</span> <span class="n">ms</span>
</code></pre>
    </div>
  </div>
</div>

<p>We would like to analyse these results, and estimate the running time of <code class="highlighter-rouge">fibionacci1(n)</code> for large values of <code class="highlighter-rouge">n</code>. How does the running time change when we increase <code class="highlighter-rouge">n</code> by 1?</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="mf">455.199</span><span class="o">/</span><span class="mf">309.849</span>
<span class="mf">1.469099</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mf">763.001</span><span class="o">/</span><span class="mf">455.199</span>
<span class="mf">1.676192</span>
</code></pre>
    </div>
  </div>
</div>

<p>It turns out that if we compute <code class="highlighter-rouge">fibionacci1(n+1)</code>, the time taken is about 1.6 times the time it takes to compute <code class="highlighter-rouge">fibionacci1(n)</code>. From this, we can determine that the time to compute <code class="highlighter-rouge">fibionacci1(n+10)</code> is a little over 100 times the time to compute <code class="highlighter-rouge">fibionacci1(n)</code>.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="mf">1.6</span><span class="o">**</span><span class="mi">10</span>
<span class="mf">109.95116277760006</span>
</code></pre>
    </div>
  </div>
</div>

<p>How long will it take to compute <code class="highlighter-rouge">fibionacci1(40)</code>? We estimate that it would take <code class="highlighter-rouge">1.6**10 * 309.849 ms</code>, which is about 34 seconds. Extrapolating further, we find that <code class="highlighter-rouge">fibionacci1(50)</code> would take just over one hour, and <code class="highlighter-rouge">fibionacci1(100)</code> would take over 1,900,000 years! On the other hand we get the following for the second algorithm.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">time_fib2</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">fibonacci2</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">took</span> <span class="mf">0.000</span> <span class="n">ms</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time_fib2</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">fibonacci2</span><span class="p">(</span><span class="mi">30000</span><span class="p">)</span> <span class="n">took</span> <span class="mf">31.215</span> <span class="n">ms</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">time_fib2</span><span class="p">(</span><span class="mi">30000</span><span class="p">)</span>
<span class="n">fibonacci2</span><span class="p">(</span><span class="mi">300000</span><span class="p">)</span> <span class="n">took</span> <span class="mf">709.301</span> <span class="n">ms</span>
</code></pre>
    </div>
  </div>
</div>

<p>Note that the dramatic difference is not because one is recursive and one is not — if we rewrote the second algorithm as a recursive function, it would still be very efficient.</p>

<p>Note also that the exact running times will be different when it is run on different processors, in different programming languages, etc. However, the resulting analysis will still be the same, that as <code class="highlighter-rouge">n</code> increases, the running time increases by a factor of about 1.6.</p>

<h2 id="measuring-efficiency">Measuring Efficiency</h2>
<p>In the above analysis, we have seen how to estimate the running time of the <code class="highlighter-rouge">fibionacci1</code> function for certain values of <code class="highlighter-rouge">n</code>. We would like to make this more general and describe the efficiency, called the <strong>complexity</strong>, of <code class="highlighter-rouge">fibionacci1</code> so that it can be compared to other functions. Since the exact running time can differ, we will instead describe how the running time grows with larger inputs, without having to worry about exact details.</p>

<p>From the analysis above, we see that the running time of <code class="highlighter-rouge">fibionacci1(n)</code> is related to 1.6<sup>n</sup>. In fact, the only important information is that the running time is exponential in <code class="highlighter-rouge">n</code>. The 1.6 is not important, and the complexity could equally be described as 2<sup>n</sup> or e<sup>n</sup> (it is common to use either of these to describe exponential functions).</p>

<p>Before continuing, we need a notation that we can use to mean that we do not care about the exact details.</p>

<h2 id="big-o-notation">Big O Notation</h2>
<p>The <strong>big O notation</strong> is used to provide an upper bound on a mathematical function. Formally, we say that “f(n) is of order g(n)”, and write “f(n) is O(g(n))”, if there are constants a and k such that f(n)≤a×g(n) for all n &gt;k. Informally, f(n) is of order g(n) if some multiple of g(n) is an upper bound of f(n).</p>

<p>It is common to use only the most significant term when describing the order of a function, and to ignore any coefficients. For example, 3n^2+4n-2 is O(n^2), 2n^2+8n is also O(n^2), and 3^n+n^2 is O(2^n).</p>

<p>Big O notation is used to describe the complexity of a program, where n represents the size of the input. For example, the running time of <code class="highlighter-rouge">fibionacci1</code> is O(2^n).</p>

<p>A <strong>complexity class</strong> is a collection of functions with the same complexity (when expressed in the big O notation). Some of the common complexity classes are:</p>

<table>
  <thead>
    <tr>
      <th><strong>Complexity</strong></th>
      <th><strong>Common Name</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>O(1)</td>
      <td>Constant</td>
    </tr>
    <tr>
      <td>O(log n)</td>
      <td>Logarithmic</td>
    </tr>
    <tr>
      <td>O(n)</td>
      <td>Linear</td>
    </tr>
    <tr>
      <td>O(n^2)</td>
      <td>Quadratic</td>
    </tr>
    <tr>
      <td>O(2^n)</td>
      <td>Exponential</td>
    </tr>
  </tbody>
</table>

<p>Once the complexity of a function is known, we can compare it to the complexity of other functions. In the table above, we have listed the classes from the most efficient (constant) to the least efficient (exponential). When designing algorithms we strive for the most efficient algorithm.</p>

<h2 id="calculating-rate-of-growth">Calculating Rate of Growth</h2>
<p>How can we determine the complexity of a function? Instead of performing an experimental analysis, we can directly analyse the source code. In practice this can be quite difficult, so we will consider several examples. In our analysis, we will think about how many steps the function takes to complete if it were executed. Looking at how many times a loop body is executed, or how many recursive calls are needed to reach the base case, will give a good indication of the complexity.</p>

<h3 id="constant-time">Constant Time</h3>
<p>A function that runs in constant time — O(1) — cannot have any loops or recursive steps which depend on the size of the input. The defining characteristic of constant time functions is that changing the size of the input has no effect on the running time. For example, these functions run in constant time:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">**</span><span class="mi">2</span>

<span class="k">def</span> <span class="nf">abs</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">n</span>
</code></pre>
    </div>
  </div>
</div>

<h3 id="linear-time">Linear Time</h3>
<p>A function runs in linear time — O(n) — if the number of iterations of loops in the function is proportional to the size of the input (and the body of the loops run in constant time). A characteristic to observe in linear-time functions is that doubling the size of the input makes the function twice as slow. Below are examples of functions that run in linear time.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">char</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="n">char</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

<span class="k">def</span> <span class="nf">sumto</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">total</span>
</code></pre>
    </div>
  </div>
</div>

<p>It is important to specify what inputs determine the complexity of the function. The <code class="highlighter-rouge">find</code> function above is linear in terms of the length of the string, and the <code class="highlighter-rouge">sumto</code> function is linear in terms of the input <code class="highlighter-rouge">n</code>.</p>

<p>A recursive function runs in linear time if the number of recursive steps to the base case is proportional to the size of the input. The <code class="highlighter-rouge">factorial</code> function below must make a total of <code class="highlighter-rouge">n</code> recursive steps, so its running time is O(n).</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span>
</code></pre>
    </div>
  </div>
</div>

<h3 id="quadratic-time">Quadratic Time</h3>
<p>A characteristic of quadratic time — O(n^2) — functions is that doubling the size of the input makes the running time four times as large. Many functions that run in quadratic time have two nested loops, where the number of iterations in each loop is proportional to the size of the input. The following functions run in quadratic time.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">pairs</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">element1</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">element2</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">element1</span><span class="p">,</span> <span class="n">element2</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">result</span>
<span class="k">def</span> <span class="nf">primes_to</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="s">"""Return a list of primes &lt;= n."""</span>
    <span class="n">primes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">is_prime</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">is_prime</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">is_prime</span><span class="p">:</span>
            <span class="n">primes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">primes</span>
</code></pre>
    </div>
  </div>
</div>

<p>The <code class="highlighter-rouge">pairs</code> function runs in O(n^2) time where n is the length of the list. This is because the inner loop takes n steps to run, which is then repeated n times by the outer loop.</p>

<p>The <code class="highlighter-rouge">primes_to</code> function is slightly different. The outer loop runs <code class="highlighter-rouge">n-1</code> times, which is O(n). The inner loop runs <code class="highlighter-rouge">i-2</code> times, but <code class="highlighter-rouge">i</code> takes a different value on each iteration, so how do we represent the running time in terms of <code class="highlighter-rouge">n</code>?</p>

<p>If we sum up the number of iterations of the inner loop, we get 0+1+2+3+⋯+(n-3)=(n-3)(n-2)⁄2, which is quadratic. A less formal reasoning would be that <code class="highlighter-rouge">i</code> averages to about n⁄2 over all iterations of the outer loop, so the total running time is about n^2⁄2, which is quadratic.</p>

<h3 id="logarithmic-time">Logarithmic Time</h3>
<p>The defining characteristic of logarithmic — O(log⁡(n)) — functions is that doubling the input size will only increase the running time by a fixed amount. A way of recognising a logarithmic function is that at each step through the function, the “remaining problem” will be reduced by a significant factor. For example, consider the following function, which computes the binary digits of a number, starting with the least significant.</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">binary</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">number</span> <span class="o">/=</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre>
    </div>
  </div>
</div>

<p>Notice that each step through the loop halves the <code class="highlighter-rouge">number</code>, which halves the size of the remaining problem. Because of this, the <code class="highlighter-rouge">binary</code> function runs in O(log⁡(n)) time.</p>

<p>Two of the methods in the <code class="highlighter-rouge">Node</code> class from the module about recursion are also logarithmic: the <code class="highlighter-rouge">insert</code> and <code class="highlighter-rouge">__contains__</code> methods both make a recursive call into one of the two children of the node. In effect, this (roughly) halves the size of the “remaining problem”, which is the number of nodes that still need to be considered. Because binary search trees have very efficient <code class="highlighter-rouge">insert</code> and <code class="highlighter-rouge">__contains__</code> methods, they can be very useful ways of storing data.</p>

<p>This only holds true if the tree is balanced, that is, if each node in the tree has a roughly equal distribution of nodes in the left and right subtrees. The other possible extreme is that each node in the tree has only one child, then the tree behaves more like a consecutive list of values, and <code class="highlighter-rouge">insert</code> and <code class="highlighter-rouge">__contains__</code> will run in linear time, and the tree will no longer be a useful way of storing data. For this reason, many forms of self-balancing binary search trees have been developed, which ensure they remain balanced when data is inserted or removed.</p>

<h3 id="exponential-time">Exponential Time</h3>
<p>An example of a function which runs in exponential time — O(2^n) — is the <code class="highlighter-rouge">fibionacci1</code> function from above (which is available in <code class="highlighter-rouge">fib.py</code>). This function is exponential because there are two recursive calls made in the recursive step. The effect of this is that when the input n increases by 1, our function needs to do nearly twice as many steps (more accurately, 1.6 times as many steps) to compute a result.</p>

<p>The important characteristic of exponential time functions is that increasing the input size by 1 will multiply the running time by a factor.</p>

<div class="aside">

  <h4 id="aside-things-arent-as-they-seem">Aside: Things aren’t as they seem…</h4>
  <p>Though it may seem obvious that a function appears to have a certain time complexity, other factors can come into the running time as well. If we analyse the efficient Fibonacci algorithm it appears to be linear. However, if we do the timing experiment we see that it is not linear. It turns out that Fibonacci numbers get very big very quickly and so the time taken to add two adjacent Fibonacci numbers becomes significant — and has to be factored into the calculations. It appears from timing experiments that, for very large <code class="highlighter-rouge">n</code>, doubling <code class="highlighter-rouge">n</code> will make the time go up by about a factor of 3 — so the complexity is worse than linear but better than quadratic.</p>
</div>

<h2 id="functions-within-functions">Functions within Functions</h2>
<p>How is the complexity of a function affected when it calls other functions? If a function calls another function, the complexity of that other function will have an impact on the complexity of the first function. As an example, consider these two functions:</p>
<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span>

<span class="k">def</span> <span class="nf">sum_factorial</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="s">""" Return 1! + 2! + ... + n! - i.e. the sum of the factorials up to n."""</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">m</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="nb">sum</span> <span class="o">+=</span> <span class="n">factorial</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="nb">sum</span>
</code></pre>
    </div>
  </div>
</div>

<p>We already know that the <code class="highlighter-rouge">factorial</code> function runs in O(n) time, but what about the <code class="highlighter-rouge">sum_factorial</code> function? In the loop, <code class="highlighter-rouge">m</code> starts at <code class="highlighter-rouge">1</code> and increments until it gets to <code class="highlighter-rouge">n</code>. However, this does <strong><em>not</em></strong> make it a linear algorithm because the body of the loop contains a call that is linear in <code class="highlighter-rouge">m</code>. So the time taken is proportional to 1+2+3+⋯+n=(n×(n+1))⁄2 — making the function quadratic.</p>

<p>What about when we are using other functions that we did not write? Without knowing the complexity of other functions, we cannot determine the running time of our own programs. If the source code is available, we could analyse it as above. The author of the other code may have included information about the time and space complexities in the documentation. This would be very helpful, especially if we do not have access to the source code. Alternatively, we could carry out timing experiments, as we did with <code class="highlighter-rouge">fibionacci1</code>, to deduce the complexity.</p>

<p>The complexity of standard Python functions and operations also needs to be considered. What is the complexity of the built-in functions and methods, such as <code class="highlighter-rouge">sum</code>, <code class="highlighter-rouge">min</code>, or <code class="highlighter-rouge">list.append</code>? What about list addition? Or string addition?</p>

<p>The code in <code class="highlighter-rouge">list_time.py</code> will experimentally determine the running time of many list operations. Below are some results (each command was repeated 1000 times, the results were averaged, and are measured in microseconds).</p>

<div class="viz">

  <div class="highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code>xs.append(0):
  list of length 10000: 0.8640663673243391 us
  list of length 20000: 0.9903276535270789 us
  list of length 40000: 1.578083090180371 us
xs[0]:
  list of length 10000: 0.3674386415868369 us
  list of length 20000: 0.6851047181877234 us
  list of length 40000: 0.684738743433666 us
xs[-1]:
  list of length 10000: 0.3872012777055289 us
  list of length 20000: 0.7191403692736742 us
  list of length 40000: 0.8018506610625309 us
xs[0:100]:
  list of length 10000: 1.2208917414007203 us
  list of length 20000: 1.7446015980686624 us
  list of length 40000: 1.8748886064123838 us
xs[0:10000]:
  list of length 10000: 53.55271811269802 us
  list of length 20000: 57.665908245043696 us
  list of length 40000: 62.512145786778106 us
xs[1:-1]:
  list of length 10000: 54.147427069450416 us
  list of length 20000: 112.26568009637639 us
  list of length 40000: 230.8202701698896 us
xs.insert(0, 0):
  list of length 10000: 8.216132971785584 us
  list of length 20000: 15.295182418274322 us
  list of length 40000: 29.147692401203074 us
xs.pop(0):
  list of length 10000: 6.027604010938603 us
  list of length 20000: 12.176711636406878 us
  list of length 40000: 22.701779259406862 us
xs.pop(-1):
  list of length 10000: 0.806608332709402 us
  list of length 20000: 1.1729490500478335 us
  list of length 40000: 1.3764310069532826 us
xs + xs:
  list of length 10000: 112.45232721501708 us
  list of length 20000: 232.56779956593476 us
  list of length 40000: 470.1520149288214 us
</code></pre>
    </div>
  </div>
</div>

<p>It can be seen that <code class="highlighter-rouge">append</code> and list indexing both run in constant time (allowing for slight variations in the running times). A list slice runs in time proportional to the length of the slice. This means that if a slice is taken from the start to the end of the list, it will take linear time in terms of the length of the list. Inserting to the front of a list runs in linear time, as does list addition. The <code class="highlighter-rouge">pop</code> method is somewhat more interesting: it runs in linear time if the first element is removed, and constant time if the last element is removed.</p>

<p>Note that one consequence of this is that inserting and removing from a list is best done from the end of the list, using <code class="highlighter-rouge">append</code> and <code class="highlighter-rouge">pop(-1)</code>, because these are both constant, whereas the same operations on the start of the list are slower. Being able to take advantage of properties like this one is an important skill in software engineering.</p>

<div class="aside">

  <h4 id="aside-guess-the-implementation">Aside: Guess the implementation</h4>
  <p>Sometimes it can be insightful to “guess” what the implementation of a function would look like to get a better understanding of why the time complexity is what it is, and whether or not it can be improved. For example, it’s not difficult to determine that the <code class="highlighter-rouge">sum</code> function must visit every element of the list to calculate the total, so <code class="highlighter-rouge">sum</code> must be linear, it can’t be logarithmic or constant.</p>

  <p>From the experiment above on lists, we can guess that slicing and addition work by copying all of the required elements into a new list, which is why they are linear. If inserting and removing from the start of a list runs in linear time, we might guess that the underlying implementation needs to do some extra work on the rest of the list. It may be interesting to research two different implementations of lists: “arrays” and “linked lists”.</p>
</div>

<h2 id="computability-the-halting-problem">Computability: The Halting Problem</h2>
<p>In the remainder of this section we will look at a new topic, <strong>computability theory</strong>, which studies functions and algorithms from a mathematical perspective. One question in this field is deciding whether or not a given function will finish executing or loop forever. In this section, we will only consider functions that take a single string argument. For example, consider this function:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
    <span class="n">fact</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">fact</span> <span class="o">*=</span> <span class="n">n</span>
        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">fact</span>

</code></pre>
    </div>
  </div>
</div>
<p>Calling this function with a positive integer, such as <code class="highlighter-rouge">factorial('3')</code>, will finish executing. However, <code class="highlighter-rouge">factorial('-2')</code> will never finish executing, as the loop will never stop. Note that we are considering if the function will ever finish, even if it takes a long time. For example, <code class="highlighter-rouge">factorial('1000000000000')</code> will take a very long time, but it will still be able to finish.</p>

<p>We now pose the problem: Write a program which takes the source code of a function (as a string) and an input, and determines whether or not the function will stop executing. This problem is known as the <strong>halting problem</strong>. This would not be an easy task, because it would have to handle every possible function we could write.</p>

<p>In fact, Alan Turing proved in 1936 that writing such a program is impossible. This is an alarming result, as it was one of the first problems where it could be proved that a solution could not be found. Here we will give a <strong>proof by contradiction</strong>, where we assume that we can solve the halting problem, and then prove that assumption leads to a contradiction.</p>

<p>Assume that we have a function <code class="highlighter-rouge">halt</code>, which takes the source code of a function (as a string), and an <code class="highlighter-rouge">input</code>, and returns <code class="highlighter-rouge">True</code> if the function will finish when given that input. The function definition would look like this:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">halt</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
    <span class="s">"""Determine if the given function 'code' will finish executing.

    Parameters:
        code (str): Source code for the function to be analysed.
        input: The input to be passed to the function 'code'.

    Return (bool):
        True if the function stops when given the input.
        False if the function continues forever when given the input.
    """</span>
    <span class="c1"># Solution goes here...
</span>    <span class="c1"># ...
</span></code></pre>
    </div>
  </div>
</div>

<p>For example, <code class="highlighter-rouge">halt(factorial_code, '3')</code> is <code class="highlighter-rouge">True</code> and <code class="highlighter-rouge">halt(factorial_code, '-2')</code> is <code class="highlighter-rouge">False</code>, where <code class="highlighter-rouge">factorial_code</code> is the function definition above. Notice that, in a proof by contradiction, it is enough to assume that a working function is available to us, we do not actually need to write it. Now, consider this function, which takes a string <code class="highlighter-rouge">x</code>:</p>

<div class="viz">

  <div class="language-python highlighter-rouge">
    <div class="highlight">
      <pre class="highlight"><code><span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">halt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Keep going..."</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Stop!"</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<p>Now we ask, if <code class="highlighter-rouge">g_code</code> is the source code of the function above, what does <code class="highlighter-rouge">g(g_code)</code> do?</p>
<ul>
  <li>If <code class="highlighter-rouge">halt(g_code, g_code)</code> is <code class="highlighter-rouge">True</code>, then <code class="highlighter-rouge">g(g_code)</code> runs forever, meaning that <code class="highlighter-rouge">halt(g_code, g_code)</code> gave an incorrect result.</li>
  <li>If <code class="highlighter-rouge">halt(g_code, g_code)</code> is <code class="highlighter-rouge">False</code>, then <code class="highlighter-rouge">g(g_code)</code> stops, meaning that <code class="highlighter-rouge">halt(g_code, g_code)</code> gave an incorrect result.</li>
</ul>

<p>This means that our initial assumption that a working <code class="highlighter-rouge">halt</code> function exists leads to a contradiction. Therefore, it is impossible to write a function that will solve the halting problem.</p>


    </div>
</body>

</html>